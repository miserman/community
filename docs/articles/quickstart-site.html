<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Build a Data Site • community</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Build a Data Site">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">community</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Examples</h6></li>
    <li><a class="dropdown-item" href="../articles/quickstart-site.html">Build a Data Site</a></li>
    <li><a class="dropdown-item" href="../articles/datacommons_projects.html">Build a Data Commons</a></li>
    <li><a class="dropdown-item" href="../articles/casestudy-arrests.html">Illinois Arrests</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/developer-course.html">Developer Course</a></li>
    <li><a class="dropdown-item" href="../articles/anti-patterns.html">Alan Notes</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/miserman/community/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Build a Data Site</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/miserman/community/blob/HEAD/vignettes/quickstart-site.Rmd" class="external-link"><code>vignettes/quickstart-site.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart-site.Rmd</code></div>
    </div>

    
    
<p><em>Built with R 4.5.0</em></p>
<hr>
<div class="section level2">
<h2 id="basic-example">Basic example<a class="anchor" aria-label="anchor" href="#basic-example"></a>
</h2>
<p>Building a data site consists of 3 steps:</p>
<ol style="list-style-type: decimal">
<li>Initialize the site</li>
<li>Add data to the site</li>
<li>Specify the site’s layout</li>
</ol>
<div class="section level3">
<h3 id="initialize">1. Initialize<a class="anchor" aria-label="anchor" href="#initialize"></a>
</h3>
<p>Start by loading the library and initializing a site.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://miserman.github.io/community">community</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># this can be in an existing or new directory</span></span>
<span><span class="co"># for this example, it is a temporary directory</span></span>
<span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/example_site"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/init_site.html">init_site</a></span><span class="op">(</span><span class="va">output</span>, template <span class="op">=</span> <span class="st">"basic"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-data">2. Add Data<a class="anchor" aria-label="anchor" href="#add-data"></a>
</h3>
<p>Now you should have a <code>data</code> folder in <code>output</code>
where you can put your data files, and a <code>build.R</code> file which
you can use to reformat those files if needed, and add them to the
site.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make a simple example set</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">78</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">234</span><span class="op">)</span>, <span class="fl">78</span>, dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="cn">NULL</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># write that set to a file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">output</span>, <span class="st">"/data.csv"</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add it to the site</span></span>
<span><span class="fu"><a href="../reference/data_add.html">data_add</a></span><span class="op">(</span><span class="st">"../../data.csv"</span>, dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">output</span>, <span class="st">"/docs/data"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>This sets up the data’s metadata (written to
<code>datapackage.json</code>), which the site will use when it’s
built.</p>
<p>Including this code in <code>build.R</code> is not necessary, but can
be a way to organize things, and make any data processing steps
repeatable.</p>
<p>Including the original data (<code>data.csv</code> in this case) is
not also strictly necessary – the data file made when you build the site
(by default) is all that will actually be used by the site.</p>
</div>
<div class="section level3">
<h3 id="specify">3. Specify<a class="anchor" aria-label="anchor" href="#specify"></a>
</h3>
<p>Everything to do with the look and functionality of the site happens
between <code>site.R</code> and the <code>site_build</code>
function.</p>
<p>For an initial site, replace the template content of
<code>site.R</code> with this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/page_navbar.html">page_navbar</a></span><span class="op">(</span><span class="st">"Site Title"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/output_plot.html">output_plot</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span></span></code></pre></div>
<p>Then save and build the site:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/site_build.html">site_build</a></span><span class="op">(</span><span class="va">output</span>, open_after <span class="op">=</span> <span class="cn">TRUE</span>, serve <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><code>open_after</code> opens the build page in a browser, which
might get annoying as you edit and rebuild the site.</p>
<p><code>serve</code> starts a local server to view the page.</p>
</div>
</div>
<div class="section level2">
<h2 id="add-inputs">Add inputs<a class="anchor" aria-label="anchor" href="#add-inputs"></a>
</h2>
<p>Inputs can be named and then referred to in outputs. For example, you
might want to allow plot variables to be changed. To do that, you can
add a select input with variables as options.</p>
<p>Change <code>site.R</code> to this:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/page_navbar.html">page_navbar</a></span><span class="op">(</span><span class="st">"Site Title"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/input_select.html">input_select</a></span><span class="op">(</span><span class="st">"X Variable:"</span>, <span class="st">"variables"</span>, default <span class="op">=</span> <span class="st">"x"</span>, id <span class="op">=</span> <span class="st">"selected_x"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/output_plot.html">output_plot</a></span><span class="op">(</span><span class="st">"selected_x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span></span></code></pre></div>
<p>Then rebuild:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/site_build.html">site_build</a></span><span class="op">(</span><span class="va">output</span>, open_after <span class="op">=</span> <span class="cn">TRUE</span>, serve <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="add-structure">Add structure<a class="anchor" aria-label="anchor" href="#add-structure"></a>
</h2>
<p><code>page_section</code> is the main way to arrange components of
the site, which can be wrapped around any set of input or output
elements.</p>
<p><code>page_menu</code> can be a nice way to arrange inputs.</p>
<p>These can be added to the previous example like this:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/page_navbar.html">page_navbar</a></span><span class="op">(</span><span class="st">"Site Title"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/page_menu.html">page_menu</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/input_select.html">input_select</a></span><span class="op">(</span><span class="st">"X Variable:"</span>, <span class="st">"variables"</span>, default <span class="op">=</span> <span class="st">"x"</span>, id <span class="op">=</span> <span class="st">"selected_x"</span><span class="op">)</span>,</span>
<span>  default_open <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/page_section.html">page_section</a></span><span class="op">(</span></span>
<span>  wraps <span class="op">=</span> <span class="st">"col"</span>,</span>
<span>  <span class="fu"><a href="../reference/output_plot.html">output_plot</a></span><span class="op">(</span><span class="st">"selected_x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="add-interactions">Add interactions<a class="anchor" aria-label="anchor" href="#add-interactions"></a>
</h2>
<p>Plots (as well as maps) can be the source of mouse events (such as
hovers and clicks). Information panes can respond to these events by
displaying additional information.</p>
<p>For example, we can tie a tooltip-like output to the plot like
this:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/page_navbar.html">page_navbar</a></span><span class="op">(</span><span class="st">"Site Title"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/page_menu.html">page_menu</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/input_select.html">input_select</a></span><span class="op">(</span><span class="st">"X Variable:"</span>, <span class="st">"variables"</span>, default <span class="op">=</span> <span class="st">"x"</span>, id <span class="op">=</span> <span class="st">"selected_x"</span><span class="op">)</span>,</span>
<span>  default_open <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># give the plot an ID</span></span>
<span><span class="fu"><a href="../reference/output_plot.html">output_plot</a></span><span class="op">(</span><span class="st">"selected_x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>, id <span class="op">=</span> <span class="st">"main_plot"</span><span class="op">)</span></span>
<span><span class="co"># then make an information output that subscribes to it</span></span>
<span><span class="fu"><a href="../reference/output_info.html">output_info</a></span><span class="op">(</span><span class="st">"features.name"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"variables.short_name"</span> <span class="op">=</span> <span class="st">"value"</span></span>
<span><span class="op">)</span>, subto <span class="op">=</span> <span class="st">"main_plot"</span>, floating <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>In <code>output_info</code>, <code>features.</code>,
<code>variables.</code>, and <code>data.</code> refer to aspects of the
hovered-over entity. <code>variables.</code> and <code>data.</code> also
implicitly refer to a particular variable – by default, this will be the
variable used for color, but setting the <code>variable</code> argument
can change that (e.g., <code>variable = "x"</code> or
<code>variable = "selected_x"</code>).</p>
<p>You can also add <code>floating = TRUE</code> to make the output pane
more like a tooltip.</p>
</div>
<div class="section level2">
<h2 id="add-variable-information">Add variable information<a class="anchor" aria-label="anchor" href="#add-variable-information"></a>
</h2>
<p>The information output can also display additional information about
the variables, which you can fill in when you add the data.</p>
<p>For example, run the same <code>data_add</code> command as before,
but include some information about one of the variables:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/data_add.html">data_add</a></span><span class="op">(</span></span>
<span>  <span class="st">"../../data.csv"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        long_name <span class="op">=</span> <span class="st">"Variable Z"</span>,</span>
<span>        description <span class="op">=</span> <span class="st">"A random variable, drawn from a normal distribution."</span>,</span>
<span>        statement <span class="op">=</span> <span class="st">"{features.name} has a Z value of {value}"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">output</span>, <span class="st">"/docs/data"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then, you can draw from that in the information output in
<code>site.R</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/page_navbar.html">page_navbar</a></span><span class="op">(</span><span class="st">"Site Title"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/page_menu.html">page_menu</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/input_select.html">input_select</a></span><span class="op">(</span><span class="st">"X Variable:"</span>, <span class="st">"variables"</span>, default <span class="op">=</span> <span class="st">"x"</span>, id <span class="op">=</span> <span class="st">"selected_x"</span><span class="op">)</span>,</span>
<span>  default_open <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/output_plot.html">output_plot</a></span><span class="op">(</span><span class="st">"selected_x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>, id <span class="op">=</span> <span class="st">"main_plot"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/output_info.html">output_info</a></span><span class="op">(</span><span class="st">"features.name"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"variables.long_name"</span> <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  <span class="st">"variables.description"</span>,</span>
<span>  <span class="st">"variables.statement"</span></span>
<span><span class="op">)</span>, subto <span class="op">=</span> <span class="st">"main_plot"</span>, floating <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="add-a-map">Add a Map<a class="anchor" aria-label="anchor" href="#add-a-map"></a>
</h2>
<p>Maps will generally require shapes to be added from a separate,
GeoJSON file. You can use the <code>download_census_shapes</code>
function from the <a href="https://github.com/uva-bi-sdad/catchment" class="external-link">catchment package</a> to
download shapes for Census regions within the United States.</p>
<p>For example, we might download the shapes of states:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remotes::install_github("uva-bi-sdad/catchment")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">catchment</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># save the state shapes to the distribution directory</span></span>
<span><span class="fu">download_census_shapes</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">output</span>, <span class="st">"/docs"</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"states"</span><span class="op">)</span></span></code></pre></div>
<p>Then add a map to <code>site.R</code> (also subscribing the info pane
to it):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/page_navbar.html">page_navbar</a></span><span class="op">(</span><span class="st">"Site Title"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/page_menu.html">page_menu</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/input_select.html">input_select</a></span><span class="op">(</span><span class="st">"X Variable:"</span>, <span class="st">"variables"</span>, default <span class="op">=</span> <span class="st">"x"</span>, id <span class="op">=</span> <span class="st">"selected_x"</span><span class="op">)</span>,</span>
<span>  default_open <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/output_plot.html">output_plot</a></span><span class="op">(</span><span class="st">"selected_x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>, id <span class="op">=</span> <span class="st">"main_plot"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/output_info.html">output_info</a></span><span class="op">(</span><span class="st">"features.name"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"variables.long_name"</span> <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  <span class="st">"variables.description"</span>,</span>
<span>  <span class="st">"variables.statement"</span></span>
<span><span class="op">)</span>, subto <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"main_plot"</span>, <span class="st">"main_map"</span><span class="op">)</span>, floating <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/output_map.html">output_map</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>    id_property <span class="op">=</span> <span class="st">"GEOID"</span>,</span>
<span>    url <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">output</span>, <span class="st">"/docs/states.geojson"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  color <span class="op">=</span> <span class="st">"z"</span>, id <span class="op">=</span> <span class="st">"main_map"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Because the shapes also had some properties, these were added as
entity features, giving some names.</p>
<p>Here, shapes were loaded in from a local file as part of the build
process, but this same file could also be served and referred to by URL,
in which case it would be loaded in separately. Loading the map shapes
separately means the shapes can be independently cached by the browser,
which can improve load times between sites that use the same make.</p>
</div>
<div class="section level2">
<h2 id="add-entity-metadata">Add Entity Metadata<a class="anchor" aria-label="anchor" href="#add-entity-metadata"></a>
</h2>
<p>The map shapes file added some additional information about entities,
such as their name, but this type of information can be added more
directly through the <code>data_add</code> function’s <code>meta</code>
argument. We’ve already used this argument to add variable metadata with
a list in the <code>variables</code> entry. Similarly, entity metadata
can be added in an <code>ids</code> entry.</p>
<p>For example, you might add names to some of the entries for which
there is no state:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># include the ids list in your call to `data_add`</span></span>
<span><span class="fu"><a href="../reference/data_add.html">data_add</a></span><span class="op">(</span></span>
<span>  <span class="st">"../../data.csv"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        long_name <span class="op">=</span> <span class="st">"Variable Z"</span>,</span>
<span>        description <span class="op">=</span> <span class="st">"A random variable, drawn from a normal distribution."</span>,</span>
<span>        statement <span class="op">=</span> <span class="st">"{features.name} has a Z value of {value}"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      variable <span class="op">=</span> <span class="st">"ID"</span>,</span>
<span>      map<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"61"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"No State 61"</span><span class="op">)</span>,</span>
<span>        <span class="st">"43"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"No State 43"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">output</span>, <span class="st">"/docs/data"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># then rebuild</span></span>
<span><span class="fu"><a href="../reference/site_build.html">site_build</a></span><span class="op">(</span><span class="va">output</span>, open_after <span class="op">=</span> <span class="cn">TRUE</span>, serve <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Now you should see names for entities 61 and 43.</p>
<p>The <code>ids</code> field might be particularly useful if you
already have metadata like this in a separate file, or plan to use that
information between sites. In that case, you can replace the list in
<code>map</code> with the path to a local file, or a URL to be loaded in
dynamically.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://biocomplexity.virginia.edu/institute/divisions/social-and-decision-analytics" class="external-link">Biocomplexity Institute</a>, Micah Iserman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
