{"version":3,"file":"community.min.js","sources":["../../../js/site/palettes.ts","../../../js/site/patterns.ts","../../../js/site/value_types.ts","../../../js/site/defaults.ts","../../../js/site/summary_levels.ts","../../../js/site/index.js","../../../js/site/utils.ts"],"sourcesContent":["export const palettes: {[index: string]: {name: string; type: string; colors: string[] | (number[] | number[][])[]}} = {\r\n  // discrete palettes from https://colorbrewer2.org\r\n  rdylbu7: {\r\n    name: 'Red-Yellow-Blue (7)',\r\n    type: 'discrete',\r\n    colors: ['#d73027', '#fc8d59', '#fee090', '#adadad', '#e0f3f8', '#91bfdb', '#4575b4'],\r\n  },\r\n  orrd7: {\r\n    name: 'Orange-Red (7)',\r\n    type: 'discrete',\r\n    colors: ['#fef0d9', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#990000'],\r\n  },\r\n  gnbu7: {\r\n    name: 'Green-Blue (7)',\r\n    type: 'discrete',\r\n    colors: ['#a8ddb5', '#ccebc5', '#f0f9e8', '#adadad', '#4eb3d3', '#2b8cbe', '#08589e'],\r\n  },\r\n  brbg7: {\r\n    name: 'Brown-Teal (7)',\r\n    type: 'discrete',\r\n    colors: ['#8c510a', '#d8b365', '#f6e8c3', '#adadad', '#c7eae5', '#5ab4ac', '#01665e'],\r\n  },\r\n  puor7: {\r\n    name: 'Purple-Orange (7)',\r\n    type: 'discrete',\r\n    colors: ['#b35806', '#f1a340', '#fee0b6', '#adadad', '#d8daeb', '#998ec3', '#542788'],\r\n  },\r\n  prgn6: {\r\n    name: 'Purple-Green (6)',\r\n    type: 'discrete',\r\n    colors: ['#762a83', '#af8dc3', '#e7d4e8', '#d9f0d3', '#7fbf7b', '#1b7837'],\r\n  },\r\n  reds5: {\r\n    name: 'Red (5)',\r\n    type: 'discrete',\r\n    colors: ['#f1eef6', '#d7b5d8', '#df65b0', '#dd1c77', '#980043'],\r\n  },\r\n  greens5: {\r\n    name: 'Green (5)',\r\n    type: 'discrete',\r\n    colors: ['#ffffcc', '#c2e699', '#78c679', '#31a354', '#006837'],\r\n  },\r\n  paired4: {\r\n    name: 'Blue-Green (4)',\r\n    type: 'discrete',\r\n    colors: ['#1f78b4', '#a6cee3', '#b2df8a', '#33a02c'],\r\n  },\r\n  greys4: {\r\n    name: 'Grey (4)',\r\n    type: 'discrete',\r\n    colors: ['#f7f7f7', '#cccccc', '#969696', '#525252'],\r\n  },\r\n  grey: {\r\n    name: 'Grey',\r\n    type: 'continuous',\r\n    colors: [\r\n      [\r\n        [70, 70, 70],\r\n        [80, 80, 80],\r\n      ],\r\n      [150, 150, 150],\r\n      [\r\n        [230, 230, 230],\r\n        [-80, -80, -80],\r\n      ],\r\n    ],\r\n  },\r\n  brown: {\r\n    name: 'Brown',\r\n    type: 'continuous',\r\n    colors: [\r\n      [\r\n        [131, 30, 0],\r\n        [62, 85, 95],\r\n      ],\r\n      [193, 115, 95],\r\n      [\r\n        [255, 200, 190],\r\n        [-62, -85, -95],\r\n      ],\r\n    ],\r\n  },\r\n  purple: {\r\n    name: 'Purple',\r\n    type: 'continuous',\r\n    colors: [\r\n      [\r\n        [90, 14, 213],\r\n        [52.5, 89, 16],\r\n      ],\r\n      [142.5, 103, 229],\r\n      [\r\n        [195, 192, 245],\r\n        [-52.5, -89, -16],\r\n      ],\r\n    ],\r\n  },\r\n  prgn: {\r\n    name: 'Purple-Green',\r\n    type: 'continuous-divergent',\r\n    colors: [\r\n      [\r\n        [27, 120, 55],\r\n        [207, 107, 168.5],\r\n      ],\r\n      [234, 227, 223.5],\r\n      [\r\n        [118, 42, 131],\r\n        [116, 185, 92.5],\r\n      ],\r\n    ],\r\n  },\r\n  puor: {\r\n    name: 'Purple-Orange',\r\n    type: 'continuous-divergent',\r\n    colors: [\r\n      [\r\n        [179, 88, 6],\r\n        [56, 133, 202.5],\r\n      ],\r\n      [235, 221, 208.5],\r\n      [\r\n        [84, 39, 136],\r\n        [151, 182, 72.5],\r\n      ],\r\n    ],\r\n  },\r\n  rdbu: {\r\n    name: 'Red-Blue',\r\n    type: 'continuous-divergent',\r\n    colors: [\r\n      [\r\n        [69, 117, 180],\r\n        [170, 116.5, 16],\r\n      ],\r\n      [239, 233.5, 196],\r\n      [\r\n        [215, 48, 39],\r\n        [24, 185.5, 157],\r\n      ],\r\n    ],\r\n  },\r\n  vik: {\r\n    name: 'vik',\r\n    type: 'continuous-polynomial',\r\n    colors: [\r\n      [97.031, 18.4251, 0.4149],\r\n      [461.7602, 637.5326, 244.4647],\r\n      [-2434.798, -2838.5427, -5893.4695],\r\n      [9665.3469, 14405.823, 44072.722],\r\n      [-2575.9109, -25871.106, -109792.1319],\r\n      [-42510.0569, 8528.3288, 120953.8594],\r\n      [63342.3061, 14006.291, -59644.4457],\r\n      [-26045.0391, -8868.9621, 10155.5667],\r\n    ],\r\n  },\r\n  lajolla: {\r\n    name: 'lajolla',\r\n    type: 'continuous-polynomial',\r\n    colors: [\r\n      [256.0016, 255.9138, 204.945],\r\n      [-187.6735, -46.2889, -768.5655],\r\n      [1022.785, -1057.5602, 1782.0325],\r\n      [-2032.382, 1490.8271, -1785.9056],\r\n      [966.8373, -617.1949, 567.7715],\r\n    ],\r\n  },\r\n}\r\n","export const patterns: {[index: string]: RegExp} = {\r\n  seps: /[\\s,/._-]+/g,\r\n  period: /\\./,\r\n  all_periods: /\\./g,\r\n  word_start: /\\b(\\w)/g,\r\n  settings: /^settings\\./,\r\n  features: /^features\\./,\r\n  filter: /^filter\\./,\r\n  data: /^data\\./,\r\n  variables: /^variables\\./,\r\n  properties: /prop/,\r\n  palette: /^pal/,\r\n  datasets: /^dat/,\r\n  variable: /^var/,\r\n  levels: /^lev/,\r\n  ids: /^ids/,\r\n  minmax: /^m[inax]{2}$/,\r\n  int_types: /^(?:year|int|integer)$/,\r\n  end_punct: /[.?!]$/,\r\n  mustache: /\\{(.*?)\\}/g,\r\n  measure_name: /(?:^measure|_name)$/,\r\n  http: /^https?:\\/\\//,\r\n  bool: /^(?:true|false)$/,\r\n  number: /^[\\d-][\\d.,]*$/,\r\n  leading_zeros: /^0+/,\r\n  url_spaces: /%20/g,\r\n  hashes: /#/g,\r\n  embed_setting: /^(?:hide_|navcolor|close_menus)/,\r\n  median: /^med/i,\r\n  location_string: /^[^?]*/,\r\n  time_ref: /\\{time\\}/g,\r\n  pre_colon: /^[^:]*:/,\r\n  exclude_query: /^(?:features|time_range|id)$/,\r\n  space: /\\s+/,\r\n  has_equation: /<math/,\r\n  bracket_content: /(?:^|>)[^<]*(?:<|$)/,\r\n  math_tags: /^(?:semantics|annotation|annotation\\-xml|m)/,\r\n  math_attributes: /^(?:xmlns|display|displaystyle|style|encoding|stretchy|alttext|scriptlevel|fence|math)/,\r\n}\r\n","export const value_types: {[index: string]: Function} = {\r\n  percent: function (v: number): string {\r\n    return v + '%'\r\n  },\r\n  'drive time': function (v: number): string {\r\n    return v + ' minutes'\r\n  },\r\n  minutes: function (v: number): string {\r\n    return v + ' minutes'\r\n  },\r\n  dollar: function (v: number): string {\r\n    return '$' + v\r\n  },\r\n  'internet speed': function (v: number): string {\r\n    return v + ' MB/s'\r\n  },\r\n}\r\n","export const defaults: {[index: string]: string} = {\r\n  time: 'time',\r\n  dataview: 'default_view',\r\n  palette: 'vik',\r\n  background_highlight: '#adadad',\r\n  border: '#7e7e7e',\r\n  border_highlight_true: '#ffffff',\r\n  border_highlight_false: '#000000',\r\n  missing: '#00000000',\r\n}\r\n","export const summary_levels: {[index: string]: string} = {\r\n  dataset: 'Overall',\r\n  filtered: 'Filtered',\r\n  children: 'Unfiltered selection',\r\n  all: 'Selection',\r\n}\r\n","'use strict'\r\nimport {palettes} from './palettes'\r\nimport {patterns} from './patterns'\r\nimport {value_types} from './value_types'\r\nimport {defaults} from './defaults'\r\nimport {summary_levels} from './summary_levels'\r\nimport {set_description} from './utils'\r\nconst community = function (window, document, site) {\r\n  const tooltip_icon_rule =\r\n      'button.has-note::after,.button-wrapper.has-note button::before,.has-note legend::before,.has-note label::before,.wrapper.has-note > div > label::before{display:none}',\r\n    conditionals = {\r\n      setting: function (u) {\r\n        const v = u.value(),\r\n          theme = v ? 'dark' : 'light'\r\n        if (v !== site.settings[u.setting]) {\r\n          site.settings[u.setting] = v\r\n          if ('theme_dark' === u.setting) {\r\n            v\r\n              ? document.body.classList.replace('light-theme', 'dark-theme')\r\n              : document.body.classList.replace('dark-theme', 'light-theme')\r\n            if (site.plotly) Object.keys(site.plotly).forEach(k => update_plot_theme(site.plotly[k].u))\r\n            if (site.map)\r\n              Object.keys(site.map).forEach(k => {\r\n                const u = site.map[k].u\r\n                if (u && theme in u.tiles) {\r\n                  Object.keys(u.tiles).forEach(l => {\r\n                    if (theme !== l) u.tiles[l].removeFrom(u.map)\r\n                  })\r\n                  u.tiles[theme].addTo(u.map)\r\n                }\r\n              })\r\n          } else if ('hide_url_parameters' === u.setting) {\r\n            window.history.replaceState(\r\n              Date.now(),\r\n              '',\r\n              site.settings.hide_url_parameters\r\n                ? window.location.protocol + '//' + window.location.host + window.location.pathname\r\n                : get_options_url()\r\n            )\r\n          } else if ('hide_tooltips' === u.setting) {\r\n            v ? page.script_style.sheet.insertRule(tooltip_icon_rule, 0) : page.script_style.sheet.removeRule(0)\r\n          } else if ('map_overlay' === u.setting) {\r\n            Object.keys(site.map).forEach(id => {\r\n              if ('_' !== id[0]) {\r\n                if (v) {\r\n                  site.map[id].u.update()\r\n                } else {\r\n                  site.map[id].u.overlay.clearLayers()\r\n                  site.map[id].u.overlay_control.remove()\r\n                }\r\n              }\r\n            })\r\n          } else if ('tracking' === u.setting) {\r\n            if (v && site.tag_id && !dataLayer.length) {\r\n              gtag('js', new Date())\r\n              gtag('config', site.tag_id)\r\n              gtag('consent', 'default', {analytics_storage: 'denied'})\r\n            }\r\n            gtag('consent', 'update', {analytics_storage: v ? 'granted' : 'denied'})\r\n          } else {\r\n            global_update()\r\n          }\r\n          gtag('event', 'setting', {event_category: u.setting, event_label: v})\r\n          storage.set(u.setting, site.settings[u.setting])\r\n        }\r\n      },\r\n      options: function (u) {\r\n        const no_view = !u.view || !site.dataviews[u.view].selection,\r\n          d = valueOf(u.dataset),\r\n          va = valueOf(u.variable),\r\n          k = d + (va ? va : ''),\r\n          combobox = 'combobox' === u.type\r\n        if (!(k in u.option_sets)) {\r\n          if (patterns.variable.test(u.optionSource)) {\r\n            fill_variables_options(u, d, u.option_sets)\r\n          } else if (patterns.levels.test(u.optionSource)) {\r\n            fill_levels_options(u, d, va, u.option_sets)\r\n          } else if (patterns.ids.test(u.optionSource)) {\r\n            fill_ids_options(u, d, u.option_sets)\r\n          }\r\n        }\r\n        if (k in u.option_sets) {\r\n          const fresh = k !== u.current_set && (u.sensitive || !u.current_set),\r\n            c = u[combobox ? 'listbox' : 'e']\r\n          if (fresh || u.filter || u.selection_subset) {\r\n            if (fresh) {\r\n              c.innerHTML = ''\r\n              u.values = u.option_sets[k].values\r\n              u.display = u.option_sets[k].display\r\n              u.options = u.option_sets[k].options\r\n            }\r\n            let ns = 0\r\n            if ('ID' === u.variable || patterns.ids.test(u.optionSource)) {\r\n              const value = u.value()\r\n              let selection = -1 === value || '' === value ? u.subset : u.selection_subset,\r\n                v = {}\r\n              if (!no_view) {\r\n                if (selection in _u) selection = valueOf(selection)\r\n                if ('siblings' === selection) {\r\n                  const rel = site.data.entity_tree && site.data.entity_tree[value]\r\n                  if (rel) {\r\n                    const parents = Object.keys(rel.parents)\r\n                    if (parents.length) {\r\n                      v = {}\r\n                      parents.forEach(id => {\r\n                        v = {...v, ...site.data.entity_tree[id].children}\r\n                      })\r\n                    }\r\n                  }\r\n                } else {\r\n                  v = site.dataviews[u.view].selection[selection]\r\n                }\r\n              }\r\n              u.options.forEach(si => {\r\n                if (fresh && !u.groups) c.appendChild(si)\r\n                if (no_view || (si.value || si.dataset.value) in v) {\r\n                  si.classList.remove('hidden')\r\n                  ns++\r\n                } else {\r\n                  si.classList.add('hidden')\r\n                }\r\n              })\r\n            } else if (fresh) {\r\n              u.options.forEach(si => {\r\n                si.classList.remove('hidden')\r\n                if (!u.groups) c.appendChild(si)\r\n                ns++\r\n              })\r\n            } else ns++\r\n            if (fresh && u.groups) u.groups.e.forEach(e => c.appendChild(e))\r\n            toggle_input(u, ns)\r\n            u.current_set = k\r\n            if (fresh) {\r\n              if (combobox) {\r\n                u.source = []\r\n              } else {\r\n                u.e.selectedIndex = -1\r\n                u.source = ''\r\n              }\r\n              u.id in site.url_options\r\n                ? u.set(site.url_options[u.id])\r\n                : u.state in u.values\r\n                ? u.set(u.state)\r\n                : u.reset()\r\n            }\r\n            if (u.filter) u.filter()\r\n          }\r\n        }\r\n      },\r\n      set_current: function () {\r\n        this.values = this.option_sets[this.dataset].values\r\n        this.display = this.option_sets[this.dataset].display\r\n        this.options = this.option_sets[this.dataset].options\r\n        this.source = ''\r\n        this.id in site.url_options\r\n          ? this.set(site.url_options[this.id])\r\n          : this.state in this.values\r\n          ? this.set(this.state)\r\n          : this.reset()\r\n      },\r\n      min: async function (u, c) {\r\n        let cv = c.value(),\r\n          uv = u.value(),\r\n          v = _u[u.view || c.view],\r\n          variable\r\n        if (patterns.minmax.test(cv)) cv = c.parsed.min\r\n        if (v && v.y) {\r\n          variable = valueOf(v.y)\r\n          if (variable in site.data.variables) {\r\n            if (!v.time_range.time.length) await conditionals.time_range(v, u, true)\r\n            cv = Math.max(v.time_range.time[0], parseFloat(cv))\r\n          }\r\n          u.update()\r\n        }\r\n        u.e.min = 'undefined' === typeof u.parsed.min ? parseFloat(cv) : Math.max(u.parsed.min, parseFloat(cv))\r\n        if (!u.e.value) {\r\n          u.reset()\r\n        } else if ('number' === typeof uv && isFinite(uv) && uv < cv) {\r\n          u.set(cv)\r\n        }\r\n        if (u.min_indicator) u.min_indicator.firstElementChild.innerText = cv\r\n      },\r\n      max: async function (u, c) {\r\n        let cv = c.value(),\r\n          uv = u.value(),\r\n          v = _u[u.view || c.view],\r\n          variable\r\n        if (patterns.minmax.test(cv)) cv = c.parsed.max\r\n        if (v && v.y) {\r\n          variable = valueOf(v.y)\r\n          if (variable in site.data.variables) {\r\n            if (!v.time_range.time.length) await conditionals.time_range(v, u, true)\r\n            cv = Math.min(v.time_range.time[1], parseFloat(cv))\r\n          }\r\n          u.update()\r\n        }\r\n        u.e.max = 'undefined' === typeof u.parsed.max ? parseFloat(cv) : Math.min(u.parsed.max, parseFloat(cv))\r\n        if (!u.e.value) {\r\n          u.reset()\r\n        } else if ('number' === typeof uv && isFinite(uv) && uv > cv) {\r\n          u.set(cv)\r\n        }\r\n        if (u.max_indicator) u.max_indicator.firstElementChild.innerText = cv\r\n      },\r\n      dataview: function (f) {\r\n        f = f || _u[defaults.dataview]\r\n        const state = f.value()\r\n        if (state !== f.state && _u._entity_filter.registered[f.parsed.dataset]) {\r\n          if (site.data.inited[f.parsed.dataset]) {\r\n            f.valid = true\r\n            f.n_selected.ids = 0\r\n            f.n_selected.children = 0\r\n            f.n_selected.features = 0\r\n            f.n_selected.variables = 0\r\n            f.n_selected.dataset = 0\r\n            f.n_selected.filtered = 0\r\n            f.n_selected.full_filter = 0\r\n            f.n_selected.all = 0\r\n            f.selection.ids = {}\r\n            f.selection.children = {}\r\n            f.selection.features = {}\r\n            f.selection.variables = {}\r\n            f.selection.dataset = {}\r\n            f.selection.filtered = {}\r\n            f.selection.full_filter = {}\r\n            f.selection.all = {}\r\n            _u._base_filter.c.forEach(f => {\r\n              f.passed = 0\r\n              f.failed = 0\r\n            })\r\n            _u._entity_filter.entities.forEach(e => {\r\n              const c = f.check(e),\r\n                id = e.features.id\r\n              c.all = 0\r\n              if (c.ids) {\r\n                f.selection.ids[id] = e\r\n                f.n_selected.ids++\r\n                c.all++\r\n              }\r\n              if (c.features) {\r\n                f.selection.features[id] = e\r\n                f.n_selected.features++\r\n                c.all++\r\n              }\r\n              if (c.variables) {\r\n                f.selection.variables[id] = e\r\n                f.n_selected.variables++\r\n                c.all++\r\n              }\r\n              if (c.dataset) {\r\n                f.selection.dataset[id] = e\r\n                f.n_selected.dataset++\r\n                c.all++\r\n              }\r\n              if (c.dataset && c.ids) {\r\n                f.selection.children[id] = e\r\n                f.n_selected.children++\r\n              }\r\n              if (c.features && c.variables) {\r\n                f.selection.full_filter[id] = e\r\n                f.n_selected.full_filter++\r\n              }\r\n              if (c.variables && c.features && c.ids) {\r\n                f.selection.filtered[id] = e\r\n                f.n_selected.filtered++\r\n              }\r\n              if (4 === c.all) {\r\n                f.selection.all[id] = e\r\n                f.n_selected.all++\r\n              }\r\n            })\r\n            request_queue(f.id)\r\n          } else {\r\n            f.valid = false\r\n            site.data.data_queue[f.parsed.dataset][f.id] = function () {\r\n              return conditionals.dataview(f)\r\n            }\r\n          }\r\n        }\r\n      },\r\n      time_filters: function (u) {\r\n        u.time_range.filtered[0] = Infinity\r\n        u.time_range.filtered[1] = -Infinity\r\n        const d = u.get.dataset(),\r\n          time = site.data.meta.times[d],\r\n          current = u.time_range.filtered_index + ''\r\n        if (!site.data.inited[d]) return\r\n        for (let i = time.n; i--; ) {\r\n          let pass = false\r\n          if (i >= u.time_range.index[0] && i <= u.time_range.index[1]) {\r\n            for (let f = u.time_filters.length; f--; ) {\r\n              const v = {},\r\n                tf = u.time_filters[f]\r\n              if (!(tf.value in v)) v[tf.value] = valueOf(tf.value)\r\n              pass = DataHandler.checks[tf.type](time.value[i], v[tf.value])\r\n              if (!pass) break\r\n            }\r\n          }\r\n          u.times[i] = pass\r\n          if (pass) {\r\n            if (u.time_range.filtered[0] > time.value[i]) u.time_range.filtered[0] = time.value[i]\r\n            if (u.time_range.filtered[1] < time.value[i]) u.time_range.filtered[1] = time.value[i]\r\n          }\r\n        }\r\n        u.time_range.filtered_index = [\r\n          u.time_range.index[0] + u.time_range.filtered[0] - u.time_range.time[0],\r\n          u.time_range.index[1] + u.time_range.filtered[1] - u.time_range.time[1],\r\n        ]\r\n        if (current !== u.time_range.filtered_index + '') {\r\n          const c = _c[u.id + '_filter']\r\n          if (c)\r\n            c.forEach(ci => {\r\n              if ('update' === ci.type) {\r\n                _u[ci.id].update()\r\n              } else if (ci.type in conditionals) {\r\n                conditionals[ci.type](_u[ci.id], u)\r\n              }\r\n            })\r\n        }\r\n      },\r\n      time_range: async function (u, c, passive) {\r\n        const v = c && c.value(),\r\n          d = u.get.dataset(),\r\n          tv = u.time ? valueOf(u.time) : defaults.time,\r\n          t = tv in site.data.variables ? site.data.variables[tv].info[d].min : 1,\r\n          s = _c[u.id + '_time'],\r\n          variable = v in site.data.variables ? v : valueOf(u.y)\r\n        let r = variable && (await site.data.get_variable(variable, u.id))\r\n        if (r) {\r\n          const reset = d + variable != u.time_range.dataset + u.time_range.variable\r\n          r = r.time_range[d]\r\n          if (-1 !== r[0]) {\r\n            u.time_range.dataset = d\r\n            u.time_range.variable = variable\r\n            u.time_range.index[0] = r[0]\r\n            u.time_range.time[0] = u.time_range.filtered[0] = t + r[0]\r\n            u.time_range.index[1] = r[1]\r\n            u.time_range.time[1] = u.time_range.filtered[1] = t + r[1]\r\n          }\r\n          if (!passive && s) {\r\n            s.forEach(si => {\r\n              const su = _u[si.id],\r\n                value = su.value()\r\n              if ('min' === si.type) {\r\n                if (reset || (isFinite(u.time_range.time[0]) && parseFloat(su.e.min) !== u.time_range.time[0])) {\r\n                  su.e.min = u.time_range.time[0]\r\n                  if (reset || !meta.retain_state || u.time_range.time[0] > value) {\r\n                    su.current_default = u.time_range.time[0]\r\n                    su.set(su.current_default)\r\n                  }\r\n                }\r\n              } else if ('max' === si.type) {\r\n                if (reset || (isFinite(u.time_range.time[1]) && parseFloat(su.e.max) !== u.time_range.time[1])) {\r\n                  su.e.max = u.time_range.time[1]\r\n                  if (reset || !meta.retain_state || u.time_range.time[1] < value || value < u.time_range.time[0]) {\r\n                    su.current_default = u.time_range.time[1]\r\n                    su.set(su.current_default)\r\n                  }\r\n                }\r\n              }\r\n            })\r\n            conditionals.time_filters(u)\r\n          }\r\n        } else {\r\n          u.time_range.dataset = d\r\n          u.time_range.index[0] = 0\r\n          u.time_range.time[0] = u.time_range.filtered[0] = 1\r\n          u.time_range.index[1] = 0\r\n          u.time_range.time[1] = u.time_range.filtered[1] = 1\r\n        }\r\n      },\r\n      id_filter: function () {\r\n        const ids = {}\r\n        _u._entity_filter.selected = []\r\n        _u._entity_filter.select_ids = ids\r\n        if (site.metadata.datasets) {\r\n          site.metadata.datasets.forEach(d => {\r\n            if (d in page.modal.filter.entity_inputs) {\r\n              const s = page.modal.filter.entity_inputs[d].value(),\r\n                cs = []\r\n              if (s && s.length) {\r\n                s.forEach(id => {\r\n                  const e = site.data.entities[id]\r\n                  if (e) {\r\n                    cs.push(id)\r\n                    _u._entity_filter.selected.push(id)\r\n                    ids[id] = true\r\n                    if (e.relations) {\r\n                      Object.keys(e.relations.parents).forEach(k => (ids[k] = true))\r\n                      Object.keys(e.relations.children).forEach(k => (ids[k] = true))\r\n                    }\r\n                  }\r\n                })\r\n                page.modal.filter.entity_inputs[d].source = cs\r\n              }\r\n            }\r\n          })\r\n        }\r\n      },\r\n    },\r\n    elements = {\r\n      button: {\r\n        init: function (o) {\r\n          o.target = o.e.getAttribute('data-target')\r\n          if ('copy' === o.target) o.settings.endpoint = site.endpoint\r\n          if ('filter' === o.target) {\r\n            o.e.setAttribute('data-bs-toggle', 'modal')\r\n            o.e.setAttribute('data-bs-target', '#filter_display')\r\n            o.notification = document.createElement('span')\r\n            o.notification.className = 'filter-notification hidden'\r\n            o.e.parentElement.appendChild(o.notification)\r\n            add_dependency('_base_filter', {type: 'update', id: o.id})\r\n            add_dependency('_entity_filter', {type: 'update', id: o.id})\r\n            o.update = elements.button.update.bind(o)\r\n            if (site.data) o.update()\r\n          } else\r\n            o.e.addEventListener(\r\n              'click',\r\n              o.settings.effects\r\n                ? 'export' === o.target || 'copy' === o.target\r\n                  ? function () {\r\n                      const f = {},\r\n                        s = this.settings,\r\n                        v = _u[s.dataview],\r\n                        d = v && v.parsed.dataset\r\n                      Object.keys(s.query).forEach(k => (f[k] = valueOf(s.query[k])))\r\n                      if (v) {\r\n                        if (!('include' in f) && v.y) f.include = valueOf(v.y)\r\n                        if (!('id' in f) && v.ids) f.id = valueOf(v.ids)\r\n                      }\r\n                      if ('copy' === this.target || this.api) {\r\n                        let q = []\r\n                        if ('id' in f && '' !== f.id && -1 != f.id) {\r\n                          q.push('id=' + f.id)\r\n                        } else {\r\n                          if (_u._entity_filter.selected.length) q.push('id=' + _u._entity_filter.selected.join(','))\r\n                        }\r\n                        if (v) {\r\n                          if (!f.time_range && v.time_range.filtered_index + '' !== v.time_range.index + '') {\r\n                            q.push(\r\n                              'time_range=' +\r\n                                site.data.meta.times[d].value[v.time_range.filtered_index[0]] +\r\n                                ',' +\r\n                                site.data.meta.times[d].value[v.time_range.filtered_index[1]]\r\n                            )\r\n                          }\r\n                          if (!v.features) v.features = {}\r\n                          Object.keys(v.features).forEach(k => {\r\n                            if (!(k in f)) {\r\n                              f[k] = valueOf(v.features[k])\r\n                              if (Array.isArray(f[k])) f[k] = f[k].join(',')\r\n                              q.push(k + '=' + f[k])\r\n                            }\r\n                          })\r\n                          if (_u._base_filter.c.size) _u._base_filter.value(q, v.parsed.time_agg)\r\n                        }\r\n                        Object.keys(f).forEach(k => {\r\n                          if (!patterns.exclude_query.test(k) && !(k in v.features)) q.push(k + '=' + f[k])\r\n                        })\r\n                        const k = s.endpoint + (q.length ? '?' + q.join('&') : '')\r\n                        if (this.api) {\r\n                          window.location.href = k\r\n                        } else {\r\n                          navigator.clipboard.writeText(k).then(\r\n                            () => {\r\n                              if ('Copied!' !== o.e.innerText) {\r\n                                o.text = o.e.innerText\r\n                                o.e.innerText = 'Copied!'\r\n                                setTimeout(function () {\r\n                                  o.e.innerText = o.text\r\n                                }, 500)\r\n                                gtag('event', 'export', {event_category: 'api link'})\r\n                              }\r\n                            },\r\n                            e => {\r\n                              if (e !== o.e.innerText) {\r\n                                o.text = o.e.innerText\r\n                                o.e.innerText = e\r\n                                setTimeout(function () {\r\n                                  o.e.innerText = o.text\r\n                                }, 1500)\r\n                              }\r\n                            }\r\n                          )\r\n                        }\r\n                      } else {\r\n                        if (v && 'selection' in v) {\r\n                          if (!f.time_range)\r\n                            f.time_range =\r\n                              site.data.meta.times[d].value[v.time_range.filtered_index[0]] +\r\n                              ',' +\r\n                              site.data.meta.times[d].value[v.time_range.filtered_index[1]]\r\n                          site.data.export(f, v.selection.all, true)\r\n                        } else site.data.export(f, site.data.entities, true, true)\r\n                        gtag('event', 'export', {event_category: 'download'})\r\n                      }\r\n                    }.bind(o)\r\n                  : function () {\r\n                      Object.keys(this.settings.effects).forEach(k => {\r\n                        this.settings.effects[k] === '' || -1 == this.settings.effects[k]\r\n                          ? _u[k].reset()\r\n                          : _u[k].set(this.settings.effects[k])\r\n                      })\r\n                    }.bind(o)\r\n                : 'refresh' === o.target\r\n                ? global_update\r\n                : 'reset_selection' === o.target\r\n                ? global_reset\r\n                : 'reset_storage' === o.target\r\n                ? clear_storage\r\n                : function () {\r\n                    if (this.target in _u) _u[this.target].reset()\r\n                  }.bind(o)\r\n            )\r\n        },\r\n        update: function () {\r\n          let n = Number(0 !== _u._entity_filter.selected.length)\r\n          _u._base_filter.c.forEach(f => (n += f.active))\r\n          if (n) {\r\n            this.notification.innerText = n\r\n            this.notification.classList.remove('hidden')\r\n          } else {\r\n            this.notification.classList.add('hidden')\r\n          }\r\n        },\r\n      },\r\n      buttongroup: {\r\n        retrieve: function () {\r\n          for (let i = this.options.length; i--; )\r\n            if (this.options[i].checked) {\r\n              this.set(i)\r\n              break\r\n            }\r\n        },\r\n        setter: function (v) {\r\n          this.previous = this.value()\r\n          this.current_index = 'string' === typeof v ? this.values.indexOf(v) : v\r\n          if (-1 !== this.current_index) {\r\n            this.source =\r\n              this.values[this.current_index] in _u\r\n                ? _u[this.values[this.current_index]]\r\n                : this.values[this.current_index]\r\n            this.options[this.current_index].checked = true\r\n          } else this.source = undefined\r\n          request_queue(this.id)\r\n        },\r\n        listener: function (e) {\r\n          this.set(e.target.value)\r\n        },\r\n        adder: function (i, value, display, noadd) {\r\n          let e = [document.createElement('input'), document.createElement('label')]\r\n          e[0].className = 'btn-check'\r\n          e[0].type = 'radio'\r\n          e[0].name = this.e.id + '_options'\r\n          e[0].autocomplete = 'off'\r\n          e[0].value = value\r\n          e[0].id = this.e.id + '_option' + i\r\n          e[1].className = 'btn btn-primary'\r\n          e[1].innerText = display || site.data.format_label(value)\r\n          e[1].setAttribute('for', e[0].id)\r\n          if (!noadd) {\r\n            this.e.appendChild(e[0])\r\n            this.e.appendChild(e[1])\r\n          }\r\n          return e[0]\r\n        },\r\n      },\r\n      radio: {\r\n        retrieve: function () {\r\n          for (let i = this.options.length; i--; ) {\r\n            if (this.options[i].checked) {\r\n              this.set(i)\r\n              break\r\n            }\r\n          }\r\n        },\r\n        setter: function (v) {\r\n          this.current_index = 'string' === typeof v ? this.values.indexOf(v) : v\r\n          if (-1 !== this.current_index) {\r\n            this.source =\r\n              this.values[this.current_index] in _u\r\n                ? _u[this.values[this.current_index]]\r\n                : this.values[this.current_index]\r\n            this.options[this.current_index].checked = true\r\n          } else this.source = undefined\r\n          request_queue(this.id)\r\n        },\r\n        listener: function (e) {\r\n          this.set(e.target.value)\r\n        },\r\n        adder: function (value, display, noadd) {\r\n          const e = document.createElement('div'),\r\n            s = 'TRUE' === this.e.getAttribute('data-switch')\r\n          e.className = 'form-check' + (s ? ' form-switch' : '')\r\n          e.appendChild(document.createElement('input'))\r\n          e.appendChild(document.createElement('label'))\r\n          e.firstElementChild.autocomplete = 'off'\r\n          e.firstElementChild.className = 'form-check-input'\r\n          if (s) e.firstElementChild.role = 'switch'\r\n          e.firstElementChild.type = 'radio'\r\n          e.firstElementChild.name = this.e.id + '_options'\r\n          e.firstElementChild.id = this.e.id + '_option' + this.e.childElementCount\r\n          e.firstElementChild.value = value\r\n          e.lastElementChild.innerText = display || site.data.format_label(value)\r\n          e.lastElementChild.className = 'form-check-label'\r\n          e.lastElementChild.setAttribute('for', e.firstElementChild.id)\r\n          if (!noadd) this.e.appendChild(e)\r\n          return e.firstElementChild\r\n        },\r\n      },\r\n      checkbox: {\r\n        retrieve: function () {\r\n          this.source = []\r\n          this.current_index = []\r\n          this.off_default = false\r\n          this.options.forEach(o => {\r\n            if (o.checked) {\r\n              this.source.push(this.values[i])\r\n              this.current_index.push(i)\r\n            } else {\r\n              this.off_default = true\r\n            }\r\n          })\r\n          request_queue(this.id)\r\n        },\r\n        setter: function (v) {\r\n          if ('object' === typeof v) {\r\n            this.source = []\r\n            this.current_index = []\r\n            this.off_default = false\r\n            this.values.forEach((cv, i) => {\r\n              if (-1 !== v.indexOf(cv)) {\r\n                this.source.push(cv)\r\n                this.current_index.push(i)\r\n                this.options[i].checked = true\r\n              } else {\r\n                this.off_default = true\r\n                this.options[i].checked = false\r\n              }\r\n            })\r\n          } else {\r\n            if ('string' === typeof v) {\r\n              return this.set('' === v ? this.values : v.split(','))\r\n            } else {\r\n              if (-1 !== v) {\r\n                this.options[v].checked = true\r\n                this.off_default = false\r\n                this.options.forEach(o => {\r\n                  if (!o.checked) this.off_default = true\r\n                })\r\n              }\r\n            }\r\n          }\r\n          request_queue(this.id)\r\n        },\r\n        listener: function (e) {\r\n          if (e.target.checked) {\r\n            this.source.push(e.target.value)\r\n            this.current_index.push(this.values.indexOf(e.target.value))\r\n            this.off_default = false\r\n            this.options.forEach(o => {\r\n              if (!o.checked) this.off_default = true\r\n            })\r\n          } else {\r\n            let i = this.source.indexOf(e.target.value)\r\n            if (i !== -1) {\r\n              this.off_default = true\r\n              this.source.splice(i, 1)\r\n              this.current_index.splice(i, 1)\r\n            }\r\n          }\r\n          request_queue(this.id)\r\n        },\r\n        adder: function (value, display, noadd) {\r\n          let e = document.createElement('div'),\r\n            s = 'TRUE' === this.e.getAttribute('data-switch')\r\n          e.className = 'form-check' + (s ? ' form-switch' : '')\r\n          e.appendChild(document.createElement('input'))\r\n          e.appendChild(document.createElement('label'))\r\n          e.firstElementChild.autocomplete = 'off'\r\n          e.firstElementChild.className = 'form-check-input'\r\n          if (s) e.firstElementChild.role = 'switch'\r\n          e.firstElementChild.type = 'checkbox'\r\n          e.firstElementChild.name = this.e.id + '_options'\r\n          e.firstElementChild.id = this.e.id + '_option' + this.e.childElementCount\r\n          e.firstElementChild.value = value\r\n          e.lastElementChild.innerText = display || site.data.format_label(value)\r\n          e.lastElementChild.className = 'form-check-label'\r\n          e.lastElementChild.setAttribute('for', e.firstElementChild.id)\r\n          if (!noadd) this.e.appendChild(e)\r\n          return e.firstElementChild\r\n        },\r\n      },\r\n      switch: {\r\n        retrieve: function () {\r\n          this.set(this.e.checked)\r\n        },\r\n        setter: function (v) {\r\n          if ('string' === typeof v) v = 'on' === v\r\n          if (v !== this.source) {\r\n            this.previous = this.e.checked\r\n            this.e.checked = this.source = v\r\n            request_queue(this.id)\r\n          }\r\n        },\r\n        listener: function () {\r\n          this.set(this.e.checked)\r\n        },\r\n      },\r\n      number: {\r\n        init: function (o) {\r\n          const up = o.e.parentElement.parentElement.querySelector('.number-up')\r\n          const down = o.e.parentElement.parentElement.querySelector('.number-down')\r\n          if (down) {\r\n            down.addEventListener(\r\n              'click',\r\n              function () {\r\n                this.set(Math.max(this.parsed.min, this.value() - 1))\r\n              }.bind(o)\r\n            )\r\n          }\r\n          if (up) {\r\n            up.addEventListener(\r\n              'click',\r\n              function () {\r\n                this.set(Math.min(this.parsed.max, this.value() + 1))\r\n              }.bind(o)\r\n            )\r\n          }\r\n        },\r\n        retrieve: function () {\r\n          this.set(this.e.value)\r\n        },\r\n        setter: function (v, check) {\r\n          if (!v) v = null\r\n          if ('string' === typeof v) v = parseFloat(v)\r\n          if (isFinite(v) && v !== this.source) {\r\n            this.previous = parseFloat(this.e.value)\r\n            if (check) {\r\n              if (isFinite(this.parsed.min) && v < this.parsed.min) {\r\n                v = this.parsed.min\r\n              } else if (isFinite(this.parsed.max) && v > this.parsed.max) {\r\n                v = this.parsed.max\r\n              }\r\n            }\r\n            this.off_default = v !== this.current_default\r\n            this.e.value = this.source = v\r\n            this.current_index = v - this.parsed.min\r\n            if ('range' === this.e.type) {\r\n              this.e.nextElementSibling.firstElementChild.innerText = this.e.value\r\n            }\r\n            request_queue(this.id)\r\n          }\r\n        },\r\n        listener: function (e) {\r\n          this.set(this.e.value, true)\r\n        },\r\n      },\r\n      intext: {\r\n        retrieve: function () {\r\n          this.set(this.e.value)\r\n        },\r\n        setter: function (v, check) {\r\n          this.previous = this.e.value\r\n          this.e.value = this.source = v\r\n          request_queue(this.id)\r\n        },\r\n        listener: function (e) {\r\n          this.set(this.e.value, true)\r\n        },\r\n      },\r\n      text: {\r\n        init: function (o) {\r\n          if (site.text && o.id in site.text) {\r\n            o.text = site.text[o.id].text\r\n            o.condition = site.text[o.id].condition || []\r\n            o.depends = new Map()\r\n            o.text.forEach(oi => {\r\n              if ('text' in oi) {\r\n                init_text(o, oi)\r\n                o.e.appendChild(oi.parts)\r\n              } else {\r\n                o.e.appendChild(document.createElement('span'))\r\n                oi.forEach(t => init_text(o, t))\r\n              }\r\n            })\r\n            o.condition.forEach(c => {\r\n              if (c.id in _u) add_dependency(c.id, {type: 'display', id: o.id})\r\n            })\r\n            o.depends.forEach(d => add_dependency(d.id, {type: 'update', id: o.id}))\r\n            o.update = elements.text.update.bind(o)\r\n          }\r\n          o.update()\r\n        },\r\n        update: function () {\r\n          Object.keys(this.reference_options).forEach(k => (this.options[k] = valueOf(this.reference_options[k])))\r\n          this.depends.forEach(d => {\r\n            d.parsed = valueOf(d.id)\r\n            if (d.u) {\r\n              if (d.u.options) {\r\n                d.parsed = d.u.options['combobox' === d.u.type ? d.u.values[d.parsed] : d.u.current_index].innerText\r\n              } else {\r\n                d.parsed =\r\n                  d.u.display && d.parsed in d.u.display ? d.u.display[d.parsed] : site.data.format_label(d.parsed)\r\n              }\r\n            } else if (d.parsed in site.data.entities) {\r\n              d.parsed = site.data.entities[d.parsed].features.name\r\n            }\r\n          })\r\n          this.text.forEach((o, i) => {\r\n            let pass = true\r\n            if (o.length) {\r\n              for (let t = o.length; t--; ) {\r\n                if ('condition' in o[t]) {\r\n                  for (let c = o[t].condition.length; c--; ) {\r\n                    pass = o[t].condition[c].check()\r\n                    if (!pass) break\r\n                  }\r\n                  if (pass) {\r\n                    o = o[t]\r\n                    break\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              if ('condition' in o) {\r\n                for (let t = o.condition.length; t--; ) {\r\n                  pass = o.condition[t].check()\r\n                  if (!pass) break\r\n                }\r\n              }\r\n            }\r\n            if (pass) {\r\n              o.text.forEach((k, i) => {\r\n                if (Array.isArray(k)) {\r\n                  k.forEach(ki => {\r\n                    if ('default' === ki.id || DataHandler.checks[ki.type](valueOf(ki.id), valueOf(ki.value)))\r\n                      k = ki.text\r\n                  })\r\n                }\r\n                if (this.depends.has(k)) {\r\n                  o.parts.children[i].innerText = this.depends.get(k).parsed\r\n                } else if (k in o.button) {\r\n                  let s = ''\r\n                  o.button[k].text.forEach(b => {\r\n                    s = (this.depends.has(b) ? this.depends.get(b).parsed : b) + s\r\n                  })\r\n                  o.parts.children[i].innerText = s\r\n                } else o.parts.children[i].innerText = k\r\n              })\r\n              if (this.text[i].length) {\r\n                this.e.children[i].innerHTML = ''\r\n                this.e.children[i].appendChild(o.parts)\r\n              } else o.parts.classList.remove('hidden')\r\n            } else o.parts.classList.add('hidden')\r\n          })\r\n        },\r\n      },\r\n      select: {\r\n        retrieve: function () {\r\n          this.set(this.e.selectedIndex)\r\n        },\r\n        setter: function (v) {\r\n          if ('string' === typeof v && !(v in this.values) && patterns.number.test(v)) v = Number(v)\r\n          if ('number' === typeof v) v = this.options[v] ? this.options[v].value : v\r\n          if (!(v in this.values) && v in this.display) v = this.options[this.display[v]].value\r\n          if (v !== this.source) {\r\n            this.e.selectedIndex = v in this.values ? this.values[v] : -1\r\n            this.source = v\r\n            request_queue(this.id)\r\n          }\r\n        },\r\n        listener: function (e) {\r\n          this.set(e.target.selectedIndex)\r\n        },\r\n        adder: function (value, display, meta, noadd) {\r\n          const e = document.createElement('option')\r\n          e.value = value\r\n          e.innerText = display || site.data.format_label(value)\r\n          if (meta && meta.info) {\r\n            e.title = meta.info.description || meta.info.short_description\r\n          }\r\n          if (!noadd) this.e.appendChild(e)\r\n          return e\r\n        },\r\n      },\r\n      combobox: {\r\n        create: function (label, options, settings, id) {\r\n          id = id || 'created_combobox_' + ++page.elementCount\r\n          const e = document.createElement('div')\r\n          let c = document.createElement('div')\r\n          if (settings) {\r\n            if (!site.combobox) site.combobox = {}\r\n            site.combobox[id] = settings\r\n          }\r\n          e.className = 'wrapper combobox-wrapper'\r\n          e.appendChild(c)\r\n          c.id = id\r\n          c.setAttribute('data-autoType', 'combobox')\r\n          c.className = 'auto-input form-select combobox combobox-component'\r\n          c.role = 'combobox'\r\n          c.setAttribute('aria-haspopup', 'listbox')\r\n          c.setAttribute('aria-expanded', 'false')\r\n          c.setAttribute('aria-labelledby', id + '-label')\r\n          c.setAttribute('aria-controls', id + '-listbox')\r\n          c.appendChild((c = document.createElement('div')))\r\n          c.className = 'combobox-selection combobox-component'\r\n          c.appendChild(document.createElement('span'))\r\n          c.lastElementChild.className = 'combobox-component'\r\n          c.appendChild((c = document.createElement('input')))\r\n          c.className = 'combobox-input combobox-component'\r\n          c.type = 'text'\r\n          c.setAttribute('aria-labelledby', id + '-label')\r\n          c.id = id + '-input'\r\n          c.autocomplete = 'off'\r\n          if (settings && settings.clearable) {\r\n            e.firstElementChild.appendChild((c = document.createElement('button')))\r\n            c.type = 'button'\r\n            c.className = 'btn-close'\r\n            c.title = 'clear selection'\r\n          }\r\n          e.appendChild((c = document.createElement('div')))\r\n          c.className = 'combobox-options combobox-component'\r\n          c.role = 'listbox'\r\n          c.tabindex = '-1'\r\n          c.id = id + '-listbox'\r\n          e.appendChild((c = document.createElement('label')))\r\n          c.id = id + '-label'\r\n          c.innerText = label\r\n          elements.init_input(e.firstElementChild)\r\n          const u = _u[id]\r\n          let n = 0\r\n          u.options = []\r\n          if (options)\r\n            if (Array.isArray(options)) {\r\n              options.forEach(o => {\r\n                const l = site.data.format_label(o)\r\n                u.display[l] = n\r\n                u.values[o] = n++\r\n                u.options.push(u.add(o, l))\r\n              })\r\n            } else {\r\n              u.groups = {e: [], by_name: {}}\r\n              Object.keys(options).forEach(k => {\r\n                const g = options[k]\r\n                const e = document.createElement('div'),\r\n                  id = u.id + '_group_' + k.replace(patterns.seps, '-')\r\n                e.className = 'combobox-group combobox-component'\r\n                e.setAttribute('aria-labelledby', id)\r\n                e.appendChild(document.createElement('label'))\r\n                e.firstElementChild.innerText = k\r\n                e.firstElementChild.id = id\r\n                e.firstElementChild.className = 'combobox-group-label combobox-component'\r\n                u.groups.by_name[k] = e\r\n                u.groups.e.push(e)\r\n                g.forEach(o => u.groups.by_name[k].appendChild(u.add(o, o, true)))\r\n                u.listbox.appendChild(e)\r\n              })\r\n              Object.keys(u.groups.by_name).forEach(g => {\r\n                u.groups.by_name[g].querySelectorAll('.combobox-option').forEach(c => {\r\n                  u.options.push(c)\r\n                  c.setAttribute('data-group', g)\r\n                  u.values[c.dataset.value] = n\r\n                  u.display[c.innerText] = n++\r\n                })\r\n              })\r\n            }\r\n          return u\r\n        },\r\n        init: function (o) {\r\n          o.hover_index = -1\r\n          o.cleared_selection = ''\r\n          o.expanded = false\r\n          o.listbox = o.e.parentElement.children[1]\r\n          o.options = o.listbox.querySelectorAll('.combobox-option')\r\n          if (o.options.length) {\r\n            o.values = {}\r\n            o.display = {}\r\n            o.options.forEach((e, i) => {\r\n              o.values[e.dataset.value] = i\r\n              o.display[e.innerText] = i\r\n            })\r\n            const group = o.listbox.querySelectorAll('.combobox-group')\r\n            if (group.length) {\r\n              o.groups = {e: [], by_name: {}}\r\n              group.forEach(e => {\r\n                const name = e.dataset.group\r\n                o.groups.e[name] = e\r\n                o.groups.by_name[name] = e\r\n              })\r\n            }\r\n          }\r\n          o.container = document.createElement('div')\r\n          o.container.className = 'combobox-options-container combobox-component'\r\n          o.container.style.display = 'none'\r\n          page.overlay.appendChild(o.container)\r\n          o.container.appendChild(o.listbox)\r\n          o.selection = o.e.firstElementChild.firstElementChild\r\n          o.input_element = o.e.firstElementChild.lastElementChild\r\n          if (2 === o.e.childElementCount) {\r\n            o.e.lastElementChild.addEventListener(\r\n              'click',\r\n              function () {\r\n                if (!this.e.classList.contains('locked')) {\r\n                  this.cleared_selection = ''\r\n                  this.set([])\r\n                  this.input_element.focus()\r\n                }\r\n              }.bind(o)\r\n            )\r\n          }\r\n          o.value = function () {\r\n            return this.source\r\n              ? this.settings.multi\r\n                ? this.source\r\n                : this.source.length\r\n                ? this.source[0]\r\n                : ''\r\n              : valueOf(this.default)\r\n          }.bind(o)\r\n          o.input_element.addEventListener(\r\n            'focus',\r\n            function () {\r\n              this.e.classList.add('focused')\r\n            }.bind(o)\r\n          )\r\n          o.input_element.addEventListener(\r\n            'blur',\r\n            function () {\r\n              this.e.classList.remove('focused')\r\n            }.bind(o)\r\n          )\r\n          o.listbox.addEventListener('click', o.set)\r\n          o.close = function (e) {\r\n            if (this.expanded && (!e || !e.target.classList || !e.target.classList.contains('combobox-component'))) {\r\n              if ('' === this.selection.innerText && this.source.length)\r\n                this.selection.innerText = this.cleared_selection\r\n              if ('' !== this.input_element.value) setTimeout(this.set, 0)\r\n              this.e.setAttribute('aria-expanded', false)\r\n              this.expanded = false\r\n              this.container.style.display = 'none'\r\n              window.removeEventListener('click', o.close)\r\n            }\r\n          }.bind(o)\r\n          o.resize = function () {\r\n            const s = this.e.getBoundingClientRect()\r\n            this.container.style.left = s.x + 'px'\r\n            this.container.style.width = s.width + 'px'\r\n            if (window.screen.height / 2 > s.y) {\r\n              this.container.style.top = s.y + s.height + 'px'\r\n              this.container.style.bottom = ''\r\n            } else {\r\n              this.container.style.top = ''\r\n              this.container.style.bottom = -s.y + 'px'\r\n            }\r\n          }.bind(o)\r\n          window.addEventListener('resize', o.resize)\r\n          o.toggle = function (e) {\r\n            if (!e.button && !this.e.classList.contains('disabled') && 'BUTTON' !== e.target.tagName) {\r\n              if (this.expanded) {\r\n                if (e.target !== this.input_element) this.close()\r\n              } else {\r\n                if (site.combobox)\r\n                  Object.keys(site.combobox).forEach(id => {\r\n                    if (id !== this.id) {\r\n                      const ou = _u[id]\r\n                      ou.expanded && ou.close()\r\n                    }\r\n                  })\r\n                this.container.style.display = ''\r\n                if ('' !== this.selection.innerText) this.cleared_selection = this.selection.innerText\r\n                if (this.cleared_selection in this.display)\r\n                  this.highlight({target: this.options[this.display[this.cleared_selection]]})\r\n                this.selection.innerText = ''\r\n                window.addEventListener('click', this.close)\r\n                this.e.setAttribute('aria-expanded', true)\r\n                if (!e || e.target !== this.input_element) setTimeout(() => this.input_element.focus(), 0)\r\n                this.resize()\r\n                this.expanded = true\r\n              }\r\n            }\r\n          }.bind(o)\r\n          o.e.addEventListener('mousedown', o.toggle)\r\n          o.highlight = function (e) {\r\n            if (!e || !e.target || e.target.dataset.value in this.values) {\r\n              if (!this.groups) this.settings.accordion = false\r\n              if (e && e.target && e.target.dataset.value) {\r\n                this.hover_index = this.values[e.target.dataset.value]\r\n              } else if (-1 === this.hover_index && this.source) {\r\n                this.hover_index = this.values[this.source[0]]\r\n              }\r\n              if ('undefined' === typeof this.hover_index) this.hover_index = -1\r\n              const o = this.options[this.hover_index]\r\n              if (o) {\r\n                const previous = this.listbox.querySelector('.highlighted')\r\n                if (previous) previous.classList.remove('highlighted')\r\n                if (e && 'mouseover' === e.type) {\r\n                  e.target.classList.add('highlighted')\r\n                } else {\r\n                  o.classList.add('highlighted')\r\n                  if (this.settings.accordion) {\r\n                    const c = o.parentElement.parentElement\r\n                    if (!c.classList.contains('show')) {\r\n                      c.classList.add('show')\r\n                      c.previousElementSibling.firstElementChild.classList.remove('collapsed')\r\n                      c.previousElementSibling.firstElementChild.setAttribute('aria-expanded', true)\r\n                    }\r\n                  }\r\n                  this.e.setAttribute('aria-activedescendant', o.id)\r\n                  const port = this.container.getBoundingClientRect(),\r\n                    item = o.getBoundingClientRect()\r\n                  let top = port.top\r\n                  if (this.groups && o.getAttribute('data-group'))\r\n                    top +=\r\n                      this.groups.by_name[o.getAttribute('data-group')].firstElementChild.getBoundingClientRect().height\r\n                  if (top > item.top) {\r\n                    this.container.scrollTo(0, this.container.scrollTop + item.top - top)\r\n                  } else if (port.bottom < item.bottom) {\r\n                    this.container.scrollTo(0, this.container.scrollTop + item.bottom - port.bottom)\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }.bind(o)\r\n          o.listbox.addEventListener('mouseover', o.highlight)\r\n          if (o.settings.accordion) {\r\n            o.listbox.addEventListener('show.bs.collapse', e => {\r\n              const group = o.hover_index === -1 ? '' : o.options[o.hover_index].getAttribute('data-group')\r\n              if (group !== e.target.getAttribute('data-group')) {\r\n                o.highlight({target: e.target.firstElementChild.firstElementChild})\r\n                o.input_element.focus()\r\n              }\r\n            })\r\n          }\r\n          o.clear_highlight = function () {\r\n            if (-1 !== this.hover_index) {\r\n              this.options[this.hover_index].classList.remove('highlighted')\r\n              this.hover_index = -1\r\n            }\r\n          }.bind(o)\r\n          o.filter_reset = function () {\r\n            if (this.groups)\r\n              this.groups.e.forEach(g => g.firstElementChild.firstElementChild.classList.remove('hidden'))\r\n            this.input_element.value = ''\r\n            this.filter_index = []\r\n            this.listbox.querySelectorAll('.filter-hidden').forEach(o => o.classList.remove('filter-hidden'))\r\n          }.bind(o)\r\n          if (o.settings.search) {\r\n            o.filterer = function (e) {\r\n              const q = this.input_element.value.toLowerCase()\r\n              if ('' === q) {\r\n                this.filter_reset()\r\n              } else {\r\n                this.filter_index = []\r\n                if (this.groups) {\r\n                  this.groups.e.forEach(g => g.firstElementChild.firstElementChild.classList.add('hidden'))\r\n                }\r\n                this.options.forEach((o, i) => {\r\n                  if (o.innerText.toLowerCase().includes(q)) {\r\n                    o.classList.remove('filter-hidden')\r\n                    this.filter_index.push(i)\r\n                    const group = o.getAttribute('data-group')\r\n                    if (group) {\r\n                      this.groups.by_name[group].firstElementChild.firstElementChild.classList.remove('hidden')\r\n                      if (this.settings.accordion) {\r\n                        const g = this.groups.by_name[group]\r\n                        g.firstElementChild.nextElementSibling.classList.add('show')\r\n                        g.firstElementChild.firstElementChild.classList.remove('collapsed')\r\n                        g.firstElementChild.firstElementChild.setAttribute('aria-expanded', true)\r\n                      }\r\n                    }\r\n                  } else {\r\n                    o.classList.add('filter-hidden')\r\n                  }\r\n                })\r\n              }\r\n            }.bind(o)\r\n            o.input_element.addEventListener('keyup', o.filterer)\r\n          }\r\n          o.input_element.addEventListener(\r\n            'keydown',\r\n            function (e) {\r\n              const action = keymap[e.code]\r\n              if (action) {\r\n                if ('close' === action) {\r\n                  this.close()\r\n                } else if ('select' === action) {\r\n                  if (!this.expanded) return this.toggle({target: this.input_element})\r\n                  this.set(e)\r\n                } else if ('move' === action) {\r\n                  e.preventDefault()\r\n                  if ('ArrowUp' === e.code) {\r\n                    if (this.filter_index && this.filter_index.length) {\r\n                      this.hover_index = this.filter_index.indexOf(this.hover_index) - 1\r\n                      this.hover_index = this.filter_index[0 > this.hover_index ? 0 : this.hover_index]\r\n                    } else {\r\n                      this.hover_index = Math.max(0, this.hover_index - 1)\r\n                    }\r\n                  } else if ('ArrowDown' === e.code) {\r\n                    if (this.filter_index && this.filter_index.length) {\r\n                      this.hover_index = this.filter_index.indexOf(this.hover_index) + 1\r\n                      this.hover_index =\r\n                        this.filter_index[\r\n                          this.filter_index.length - 1 < this.hover_index\r\n                            ? this.filter_index.length - 1\r\n                            : this.hover_index\r\n                        ]\r\n                    } else {\r\n                      this.hover_index = Math.min(this.options.length - 1, this.hover_index + 1)\r\n                    }\r\n                  } else if ('Home' === e.code) {\r\n                    this.hover_index = 0\r\n                  } else if ('End' === e.code) {\r\n                    this.hover_index = this.options.length - 1\r\n                  }\r\n                  if (this.expanded) {\r\n                    this.highlight()\r\n                  } else {\r\n                    this.set(this.hover_index)\r\n                  }\r\n                }\r\n              } else if (!this.expanded) {\r\n                this.toggle({target: this.input_element})\r\n              } else {\r\n                this.clear_highlight()\r\n              }\r\n            }.bind(o)\r\n          )\r\n        },\r\n        retrieve: function () {\r\n          this.source = []\r\n          this.listbox.querySelectorAll('.selected').forEach(o => this.source.push(o.dataset.value))\r\n          request_queue(this.id)\r\n        },\r\n        setter: function (v, toggle) {\r\n          if (!v) v = this.input_element.value\r\n          if (v.target && (this.settings.accordion ? 'BUTTON' : 'LABEL') === v.target.tagName) return void 0\r\n          let update = false,\r\n            i = -1\r\n          if (v.target) {\r\n            i = this.hover_index\r\n            if (\r\n              -1 !== i &&\r\n              (this.options[i].classList.contains('hidden') || this.options[i].classList.contains('filter-hidden'))\r\n            )\r\n              i = -1\r\n            v =\r\n              -1 === i\r\n                ? v.target.dataset.value || v.target.innerText\r\n                : this.options[i].dataset.value || this.options[i].innerText\r\n            toggle = this.settings.multi\r\n          }\r\n          this.filter_reset()\r\n          if ('object' === typeof v) {\r\n            if (this.settings.multi) {\r\n              this.listbox.querySelectorAll('.selected').forEach(e => e.classList.remove('selected'))\r\n              this.source = -1 === v ? [] : v\r\n              v.forEach(vv => {\r\n                if (vv in this.values) this.options[this.values[vv]].classList.add('selected')\r\n              })\r\n            } else v = v[0]\r\n          }\r\n          if (!Array.isArray(this.source)) this.source = []\r\n          if ('object' === typeof v && this.settings.multi) {\r\n            update = true\r\n          } else {\r\n            if (this.settings.strict && 'string' === typeof v && !(v in this.values) && patterns.number.test(v))\r\n              v = Number(v)\r\n            if ('number' !== this.value_type && 'number' === typeof v && this.options[v]) {\r\n              v = this.options[v].dataset.value\r\n            }\r\n            if ('string' === typeof v && v in this.display) v = this.options[this.display[v]].dataset.value\r\n            if (this.settings.strict && !(v in this.values)) v = this.default\r\n            i = this.source.indexOf(v)\r\n            if (-1 === i) {\r\n              update = true\r\n              if (-1 === v || '' === v) {\r\n                this.source = []\r\n              } else {\r\n                if (this.settings.multi) {\r\n                  this.source.push(v)\r\n                } else this.source[0] = v\r\n              }\r\n              if (v in this.values) {\r\n                if (!this.settings.multi) {\r\n                  const selected = this.listbox.querySelector('.selected')\r\n                  if (selected) selected.classList.remove('selected')\r\n                }\r\n                this.options[this.values[v]].classList.add('selected')\r\n              }\r\n            } else if (toggle) {\r\n              update = true\r\n              this.source.splice(i, 1)\r\n              if (v in this.values) this.options[this.values[v]].classList.remove('selected')\r\n            }\r\n          }\r\n          if (!this.settings.multi && this.expanded) {\r\n            this.input_element.focus()\r\n            this.close()\r\n            this.filter_reset()\r\n          }\r\n          this.selection.innerText = this.source.length\r\n            ? this.settings.multi\r\n              ? this.source.length + ' of ' + this.options.length + ' selected'\r\n              : this.source[0] in this.values\r\n              ? this.options[this.values[this.source[0]]].firstChild.textContent\r\n              : this.settings.strict || -1 === this.source[0]\r\n              ? ''\r\n              : this.source[0]\r\n            : ''\r\n          if (this.onchange) this.onchange()\r\n          if (update) request_queue(this.id)\r\n        },\r\n        adder: function (value, display, noadd, meta) {\r\n          const e = document.createElement('div')\r\n          e.role = 'option'\r\n          e.setAttribute('aria-selected', false)\r\n          e.tabindex = '0'\r\n          e.className = 'combobox-option combobox-component'\r\n          e.dataset.value = value\r\n          e.innerText = display || site.data.format_label(value)\r\n          if (meta && meta.info) {\r\n            e.appendChild(document.createElement('p'))\r\n            e.lastElementChild.className = 'combobox-option-description combobox-component'\r\n            e.lastElementChild.innerText = meta.info.description || meta.info.short_description || ''\r\n          }\r\n          if (!noadd) this.listbox.appendChild(e)\r\n          return e\r\n        },\r\n      },\r\n      plotly: {\r\n        init: function (o) {\r\n          o.previous_span = 1\r\n          if (o.id in site.plotly) {\r\n            o.x = o.e.getAttribute('data-x')\r\n            o.y = o.e.getAttribute('data-y')\r\n            o.color = o.e.getAttribute('data-color')\r\n            o.time = o.e.getAttribute('data-colorTime')\r\n            o.click = o.e.getAttribute('data-click')\r\n            if (o.click in _u) o.clickto = _u[o.click]\r\n            o.parsed = {}\r\n            o.traces = {}\r\n            o.tab = 'tabpanel' === o.e.parentElement.getAttribute('role') ? o.e.parentElement : void 0\r\n            if (o.tab) {\r\n              document.getElementById(o.e.parentElement.getAttribute('aria-labelledby')).addEventListener(\r\n                'click',\r\n                function () {\r\n                  if (!this.e.parentElement.classList.contains('active')) {\r\n                    setTimeout(this.update, 155)\r\n                    setTimeout(trigger_resize, 155)\r\n                  }\r\n                }.bind(o)\r\n              )\r\n            }\r\n            o.show = function (e) {\r\n              o.revert()\r\n              let trace = make_data_entry(\r\n                this,\r\n                e,\r\n                0,\r\n                0,\r\n                'hover_line',\r\n                defaults['border_highlight_' + site.settings.theme_dark]\r\n              )\r\n              if (trace) {\r\n                trace.line.width = 4\r\n                trace.marker.size = 12\r\n                Plotly.addTraces(this.e, trace, this.e.data.length)\r\n              }\r\n            }\r\n            o.revert = function () {\r\n              if (this.e.data.length && 'hover_line' === this.e.data[this.e.data.length - 1].name)\r\n                Plotly.deleteTraces(this.e, this.e.data.length - 1)\r\n            }\r\n            if (o.options) site.plotly[o.id].u = o\r\n            site.plotly[o.id].data.forEach((p, i) => {\r\n              Object.keys(p).forEach(k => {\r\n                if (patterns.period.test(k)) {\r\n                  const es = k.split('.'),\r\n                    n = es.length - 1\r\n                  let pl = null\r\n                  es.forEach((e, ei) => {\r\n                    pl = pl ? (pl[e] = ei === n ? p[k] : {}) : (p[e] = {})\r\n                  })\r\n                }\r\n              })\r\n              if (!('textfont' in p)) p.textfont = {}\r\n              if (!('color' in p.textfont)) p.textfont.color = defaults.background_highlight\r\n              if (!('line' in p)) p.line = {}\r\n              if (!('color' in p.line)) p.line.color = defaults.background_highlight\r\n              if (!('marker' in p)) p.marker = {}\r\n              p.marker.size = 8\r\n              if (!('color' in p.marker)) p.marker.color = defaults.background_highlight\r\n              if (!('line' in p.marker)) p.marker.line = {}\r\n              if (!('color' in p.marker.line)) p.marker.line.color = defaults.background_highlight\r\n              if (!('text' in p)) p.text = []\r\n              if (!('x' in p)) p.x = []\r\n              if ('box' === p.type) {\r\n                p.hoverinfo = 'none'\r\n              } else if (!('y' in p)) p.y = []\r\n              o.traces[p.type] = JSON.stringify(p)\r\n              if (!i) {\r\n                o.base_trace = p.type\r\n                if (o.base_trace in _u) add_dependency(o.base_trace, {type: 'update', id: o.id})\r\n              }\r\n            })\r\n            if (o.x && !(o.x in site.data.variables)) {\r\n              add_dependency(o.x, {type: 'update', id: o.id})\r\n            }\r\n            if (o.y && !(o.y in site.data.variables)) {\r\n              add_dependency(o.y, {type: 'update', id: o.id})\r\n            }\r\n            if (o.color && !(o.color in site.data.variables)) {\r\n              add_dependency(o.color, {type: 'update', id: o.id})\r\n            }\r\n            if (o.time in _u) {\r\n              add_dependency(o.time, {type: 'update', id: o.id})\r\n            }\r\n            if (o.view) {\r\n              add_dependency(o.view, {type: 'update', id: o.id})\r\n              add_dependency(o.view + '_filter', {type: 'update', id: o.id})\r\n              if (_u[o.view].time_agg in _u) add_dependency(_u[o.view].time_agg, {type: 'update', id: o.id})\r\n            } else o.view = defaults.dataview\r\n            o.queue = this.queue_init.bind(o)()\r\n          }\r\n        },\r\n        queue_init: function () {\r\n          const showing = this.deferred || !this.tab || this.tab.classList.contains('show')\r\n          if (showing && window.Plotly) {\r\n            Plotly.newPlot(this.e, this.options)\r\n            this.e\r\n              .on('plotly_hover', elements.plotly.mouseover.bind(this))\r\n              .on('plotly_unhover', elements.plotly.mouseout.bind(this))\r\n              .on('plotly_click', elements.plotly.click.bind(this))\r\n            update_plot_theme(this)\r\n            this.update()\r\n          } else {\r\n            this.deferred = true\r\n            setTimeout(this.queue, showing ? 0 : 2000)\r\n          }\r\n        },\r\n        mouseover: function (d) {\r\n          if (d.points && 1 === d.points.length && this.e.data[d.points[0].fullData.index]) {\r\n            Plotly.restyle(this.e, {'line.width': 5}, d.points[0].fullData.index)\r\n            update_subs(this.id, 'show', site.data.entities[d.points[0].data.id])\r\n          }\r\n        },\r\n        mouseout: function (d) {\r\n          if (d.points && 1 === d.points.length && this.e.data[d.points[0].fullData.index]) {\r\n            Plotly.restyle(this.e, {'line.width': 2}, d.points[0].fullData.index)\r\n            update_subs(this.id, 'revert', site.data.entities[d.points[0].data.id])\r\n          }\r\n        },\r\n        click: function (d) {\r\n          this.clickto && this.clickto.set(d.points[0].data.id)\r\n        },\r\n        update: async function (pass) {\r\n          if (this.queue > 0) clearTimeout(this.queue)\r\n          this.queue = -1\r\n          if (!pass) {\r\n            if (!this.tab || this.tab.classList.contains('show')) this.queue = setTimeout(() => this.update(true), 50)\r\n          } else {\r\n            if (this.e.layout) {\r\n              const v = _u[this.view],\r\n                s = v.selection && v.selection.all,\r\n                d = v.get.dataset(),\r\n                y = _u[this.time || v.time_agg],\r\n                parsed = this.parsed\r\n              if (site.data.inited[d] && s && v.time_range.filtered.length) {\r\n                parsed.base_trace = valueOf(this.base_trace)\r\n                parsed.x = valueOf(this.x)\r\n                parsed.y = valueOf(this.y)\r\n                parsed.color = valueOf(this.color || v.y || parsed.y)\r\n                const varx = await site.data.get_variable(parsed.x, this.view),\r\n                  vary = await site.data.get_variable(parsed.y, this.view),\r\n                  varcol = await site.data.get_variable(parsed.color, this.view)\r\n                parsed.x_range = varx.time_range[d]\r\n                parsed.y_range = vary.time_range[d]\r\n                parsed.view = v\r\n                parsed.dataset = d\r\n                parsed.palette = valueOf(v.palette) || site.settings.palette\r\n                if (!(parsed.palette in palettes)) parsed.palette = defaults.palette\r\n                parsed.time = (y ? y.value() - site.data.meta.times[d].range[0] : 0) - varcol.time_range[d][0]\r\n                parsed.summary = varcol.views[this.view].summaries[d]\r\n                const ns = parsed.summary.n,\r\n                  display_time = ns[parsed.time] ? parsed.time : 0,\r\n                  summary = vary.views[this.view].summaries[d],\r\n                  missing = parsed.summary.missing[display_time],\r\n                  n = ns[display_time],\r\n                  subset = n !== v.n_selected.dataset,\r\n                  rank = subset ? 'subset_rank' : 'rank',\r\n                  order = subset ? varcol.views[this.view].order[d][display_time] : varcol.info[d].order[display_time],\r\n                  traces = []\r\n                let i = parsed.summary.missing[display_time],\r\n                  k,\r\n                  b,\r\n                  fn = order ? order.length : 0,\r\n                  lim = site.settings.trace_limit || 0,\r\n                  jump,\r\n                  state =\r\n                    v.value() +\r\n                    v.get.time_filters() +\r\n                    d +\r\n                    parsed.x +\r\n                    parsed.y +\r\n                    parsed.time +\r\n                    parsed.palette +\r\n                    parsed.color +\r\n                    site.settings.summary_selection +\r\n                    site.settings.color_scale_center +\r\n                    site.settings.color_by_order +\r\n                    site.settings.trace_limit +\r\n                    site.settings.show_empty_times\r\n                lim = jump = lim && lim < n ? Math.ceil(Math.min(lim / 2, n / 2)) : 0\r\n                Object.keys(this.reference_options).forEach(k => (this.options[k] = valueOf(this.reference_options[k])))\r\n                for (; i < fn; i++) {\r\n                  if (order[i][0] in s) {\r\n                    k = order[i][0]\r\n                    const e = s[k]\r\n                    state += k\r\n                    traces.push(\r\n                      make_data_entry(this, e, e.views[this.view][rank][parsed.color][parsed.time] - missing, n)\r\n                    )\r\n                    if (lim && !--jump) break\r\n                  }\r\n                }\r\n                if (lim && i < fn) {\r\n                  for (jump = i, i = fn - 1; i > jump; i--) {\r\n                    if (order[i][0] in s) {\r\n                      k = order[i][0]\r\n                      const e = s[k]\r\n                      state += k\r\n                      traces.push(\r\n                        make_data_entry(this, e, e.views[this.view][rank][parsed.color][parsed.time] - missing, n)\r\n                      )\r\n                      if (!--lim) break\r\n                    }\r\n                  }\r\n                }\r\n                state += traces.length && traces[0].type\r\n                if (site.settings.boxplots && 'box' in this.traces && s[k]) {\r\n                  state += 'box' + site.settings.iqr_box\r\n                  b = JSON.parse(this.traces.box)\r\n                  traces.push(b)\r\n                  b.line.color = defaults.border\r\n                  b.median = summary.median\r\n                  b.q3 = summary.q3\r\n                  b.q1 = summary.q1\r\n                  if (site.settings.iqr_box) {\r\n                    b.upperfence = []\r\n                    b.lowerfence = []\r\n                    b.q1.forEach((q1, i) => {\r\n                      if (isNaN(b.median[i])) b.median[i] = 0\r\n                      const n = (b.q3[i] - q1) * 1.5,\r\n                        med = b.median[i]\r\n                      b.q3[i] = isNaN(b.q3[i]) ? med : Math.max(med, b.q3[i])\r\n                      b.upperfence[i] = b.q3[i] + n\r\n                      b.q1[i] = isNaN(b.q1[i]) ? med : Math.min(med, q1)\r\n                      b.lowerfence[i] = q1 - n\r\n                    })\r\n                  } else {\r\n                    b.upperfence = summary.max\r\n                    b.lowerfence = summary.min\r\n                  }\r\n                  if (site.settings.show_empty_times) {\r\n                    b.x = b.q1.map((_, i) => s[k].get_value(parsed.x, i + parsed.y_range[0]))\r\n                  } else {\r\n                    b.x = []\r\n                    for (i = b.q1.length; i--; ) {\r\n                      if (ns[i]) {\r\n                        b.x[i] = s[k].get_value(parsed.x, i + parsed.y_range[0])\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n                if (state !== this.state) {\r\n                  if ('boolean' !== typeof this.e.layout.yaxis.title)\r\n                    this.e.layout.yaxis.title =\r\n                      site.data.format_label(parsed.y) +\r\n                      (site.settings.trace_limit < v.n_selected.all\r\n                        ? ' (' + site.settings.trace_limit + ' extremes)'\r\n                        : '')\r\n                  if ('boolean' !== typeof this.e.layout.xaxis.title)\r\n                    this.e.layout.xaxis.title = site.data.format_label(parsed.x)\r\n                  this.e.layout.yaxis.autorange = false\r\n                  this.e.layout.yaxis.range = [Infinity, -Infinity]\r\n                  if (!b) b = {upperfence: summary.max, lowerfence: summary.min}\r\n                  let any_skipped = false\r\n                  summary.min.forEach((min, i) => {\r\n                    if (site.settings.show_empty_times || ns[i]) {\r\n                      const l = Math.min(b.lowerfence[i], min),\r\n                        u = Math.max(b.upperfence[i], summary.max[i])\r\n                      if (this.e.layout.yaxis.range[0] > l) this.e.layout.yaxis.range[0] = l\r\n                      if (this.e.layout.yaxis.range[1] < u) this.e.layout.yaxis.range[1] = u\r\n                    } else any_skipped = true\r\n                  })\r\n                  const r = (this.e.layout.yaxis.range[1] - this.e.layout.yaxis.range[0]) / 10\r\n                  this.e.layout.yaxis.range[0] -= r\r\n                  this.e.layout.yaxis.range[1] += r\r\n                  if (site.data.variables[parsed.x].is_time) {\r\n                    const start = v.time_range.filtered[0],\r\n                      end = v.time_range.filtered[1],\r\n                      adj = any_skipped && end > start ? Math.log(end - start) : 0.5\r\n                    if (this.e.layout.xaxis.autorange) {\r\n                      this.e.layout.xaxis.autorange = false\r\n                      this.e.layout.xaxis.type = 'linear'\r\n                      this.e.layout.xaxis.dtick = 1\r\n                      this.e.layout.xaxis.range = [start - adj, end + adj]\r\n                    } else {\r\n                      this.e.layout.xaxis.range[0] = start - adj\r\n                      this.e.layout.xaxis.range[1] = end + adj\r\n                    }\r\n                  }\r\n                  if (b.lowerfence.length < this.previous_span) {\r\n                    Plotly.newPlot(this.e, traces, this.e.layout, this.e.config)\r\n                    this.e\r\n                      .on('plotly_hover', elements.plotly.mouseover.bind(this))\r\n                      .on('plotly_unhover', elements.plotly.mouseout.bind(this))\r\n                      .on('plotly_click', elements.plotly.click.bind(this))\r\n                  } else {\r\n                    Plotly.react(this.e, traces, this.e.layout, this.e.config)\r\n                  }\r\n                  setTimeout(trigger_resize, 300)\r\n                  this.previous_span = b.lowerfence.length\r\n                  this.state = state\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n      },\r\n      map: {\r\n        init: function (o) {\r\n          o.color = o.e.getAttribute('data-color')\r\n          o.time = o.e.getAttribute('data-colorTime')\r\n          o.click = o.e.getAttribute('data-click')\r\n          if (o.click && o.click in _u) o.clickto = _u[o.click]\r\n          o.parsed = {}\r\n          o.tab = 'tabpanel' === o.e.parentElement.getAttribute('role') ? o.e.parentElement : void 0\r\n          o.show = function (e) {\r\n            if (e.layer && e.layer[this.id]) {\r\n              const highlight_style = {\r\n                color: 'var(--border-highlight)',\r\n                weight: site.settings.polygon_outline + 1,\r\n                fillOpacity: 1,\r\n              }\r\n              if (!site.data.inited[this.parsed.dataset + o.id]) {\r\n                const time = site.map[this.id].match_time(\r\n                  site.data.meta.overall.value[\r\n                    site.data.variables[this.parsed.color].time_range[this.parsed.dataset][0] + this.parsed.time\r\n                  ]\r\n                )\r\n                if (e.layer[this.id][time]) e.layer[this.id][time].setStyle(highlight_style)\r\n              } else if (e.layer[this.id].setStyle) {\r\n                e.layer[this.id].setStyle(highlight_style)\r\n              }\r\n            }\r\n          }\r\n          o.revert = function (e) {\r\n            if (e.layer && e.layer[this.id]) {\r\n              const default_style = {\r\n                color: 'var(--border)',\r\n                weight: site.settings.polygon_outline,\r\n                fillOpacity: 0.7,\r\n              }\r\n              if (!site.data.inited[this.parsed.dataset + this.id]) {\r\n                const time = site.map[this.id].match_time(\r\n                  site.data.meta.overall.value[\r\n                    site.data.variables[this.parsed.color].time_range[this.parsed.dataset][0] + this.parsed.time\r\n                  ]\r\n                )\r\n                if (e.layer[this.id][time]) e.layer[this.id][time].setStyle(default_style)\r\n              } else {\r\n                e.layer[this.id].setStyle(default_style)\r\n              }\r\n            }\r\n          }\r\n          const dep = {type: 'update', id: o.id}\r\n          if (o.view) {\r\n            if (_u[o.view].time_agg in _u) add_dependency(_u[o.view].time_agg, dep)\r\n            if (_u[o.view].y) add_dependency(_u[o.view].y, dep)\r\n          } else o.view = defaults.dataview\r\n          add_dependency(o.view, dep)\r\n          if (o.color in _u) add_dependency(o.color, dep)\r\n          if (o.time) add_dependency(o.time, dep)\r\n          if (!o.e.style.height) o.e.style.height = o.options.height ? o.options.height : '400px'\r\n          if (o.options.overlays_from_measures && site.data.variable_info) {\r\n            if (!Array.isArray(site.map[o.id].overlays)) site.map[o.id].overlays = []\r\n            const overlays = site.map[o.id].overlays\r\n            Object.keys(site.data.variable_info).forEach(variable => {\r\n              const info = site.data.variable_info[variable]\r\n              if (info.layer && info.layer.source) {\r\n                if ('string' === typeof info.layer.source && patterns.time_ref.test(info.layer.source)) {\r\n                  const temp = info.layer.source\r\n                  info.layer.source = []\r\n                  for (\r\n                    let range = site.data.meta.ranges[variable], y = range[0], max = range[1] + 1, time;\r\n                    y < max;\r\n                    y++\r\n                  ) {\r\n                    time = site.data.meta.overall.value[y]\r\n                    info.layer.source.push({url: temp.replace(patterns.time_ref, time), time: time})\r\n                  }\r\n                }\r\n                patterns.time_ref.lastIndex = 0\r\n                const layer = {variable: variable, source: info.layer.source}\r\n                if (info.layer.filter && (Array.isArray(info.layer.filter) || info.layer.filter.feature))\r\n                  layer.filter = info.layer.filter\r\n                overlays.push(layer)\r\n              }\r\n            })\r\n          }\r\n          o.queue = this.queue_init.bind(o)()\r\n        },\r\n        queue_init: function () {\r\n          const theme = site.settings.theme_dark ? 'dark' : 'light',\r\n            showing = this.deferred || !this.tab || this.tab.classList.contains('show')\r\n          if (showing && window.L) {\r\n            this.map = L.map(this.e, this.options)\r\n            this.options = this.map.options\r\n            this.overlay = L.featureGroup().addTo(this.map)\r\n            this.displaying = L.featureGroup().addTo(this.map)\r\n            this.overlay_control = L.control\r\n              .layers()\r\n              .setPosition('topleft')\r\n              .addOverlay(this.overlay, 'Overlay')\r\n              .addTo(this.map)\r\n            this.tiles = {}\r\n            if (this.id in site.map) {\r\n              const tiles = site.map[this.id].tiles\r\n              site.map[this.id].u = this\r\n              if (tiles) {\r\n                if (tiles.url) {\r\n                  this.tiles[theme] = L.tileLayer(tiles.url, tiles.options)\r\n                  this.tiles[theme].addTo(this.map)\r\n                } else {\r\n                  Object.keys(tiles).forEach(k => {\r\n                    this.tiles[k] = L.tileLayer(tiles[k].url, tiles[k].options)\r\n                    if (theme === k) this.tiles[k].addTo(this.map)\r\n                  })\r\n                }\r\n              }\r\n              if (!('_raw' in site.map)) site.map._raw = {}\r\n              if (!('_queue' in site.map)) site.map._queue = {}\r\n              if (!('_layers' in site.map[this.id])) site.map[this.id]._layers = {}\r\n              const time = site.data.meta.overall.value[_u[this.view].parsed.time_agg],\r\n                by_time = []\r\n              site.map[this.id].shapes.forEach((shape, i) => {\r\n                const has_time = 'time' in shape\r\n                if (has_time) {\r\n                  if (!site.map[this.id].has_time) {\r\n                    site.map[this.id].has_time = true\r\n                    add_dependency(this.view, {type: 'update', id: this.id})\r\n                  }\r\n                  by_time.push(Number(shape.time))\r\n                }\r\n                let k = shape.name\r\n                if (!k) shape.name = k = site.metadata.datasets[i < site.metadata.datasets.length ? i : 0]\r\n                const mapId = k + (has_time ? shape.time : '')\r\n                if (!(mapId in site.map._queue)) site.map._queue[mapId] = shape\r\n                site.data.inited[mapId + this.id] = false\r\n                if (\r\n                  (site.data.loaded[k] || k === this.options.background_shapes) &&\r\n                  (k === mapId ||\r\n                    (time && site.map[this.id].match_time && shape.time == site.map[this.id].match_time(time)))\r\n                )\r\n                  retrieve_layer(this, shape)\r\n              })\r\n              if (site.map[this.id].has_time) {\r\n                by_time.sort()\r\n                site.map[this.id].match_time = function (time) {\r\n                  let i = by_time.length\r\n                  for (; i--; ) if (!i || by_time[i] <= time) break\r\n                  return by_time[i]\r\n                }.bind(by_time)\r\n              }\r\n              site.map[this.id].triggers = {}\r\n              site.map[this.id].overlay_summaries = {}\r\n              if (Array.isArray(site.map[this.id].overlays)) {\r\n                site.map[this.id].overlays.forEach(l => {\r\n                  if ('string' === typeof l.source) l.source = [{url: l.source}]\r\n                  const source = l.source\r\n                  source.forEach(s => {\r\n                    s.processed = false\r\n                    s.property_summaries = {}\r\n                    site.map._queue[s.url] = s\r\n                  })\r\n                  site.map[this.id].triggers[l.variable] = {source}\r\n                  const fs = l.filter\r\n                  if (fs) {\r\n                    const fa = Array.isArray(fs) ? fs : [fs]\r\n                    site.map[this.id].triggers[l.variable].filter = fa\r\n                    fa.forEach(f => {\r\n                      f.check = DataHandler.checks[f.operator]\r\n                    })\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          } else {\r\n            this.deferred = true\r\n            setTimeout(this.queue, showing ? 0 : 2000)\r\n          }\r\n        },\r\n        mouseover: function (e) {\r\n          e.target.setStyle({\r\n            color: 'var(--border-highlight)',\r\n          })\r\n          update_subs(this.id, 'show', site.data.entities[e.target.feature.properties[e.target.source.id_property]])\r\n        },\r\n        mouseout: function (e) {\r\n          update_subs(this.id, 'revert', site.data.entities[e.target.feature.properties[e.target.source.id_property]])\r\n          e.target.setStyle({\r\n            color: 'var(--border)',\r\n          })\r\n        },\r\n        click: function (e) {\r\n          if (this.clickto) this.clickto.set(e.target.feature.properties[e.target.source.id_property])\r\n        },\r\n        update: async function (entity, caller, pass) {\r\n          if (this.queue > 0) clearTimeout(this.queue)\r\n          this.queue = -1\r\n          if (!pass) {\r\n            if (!this.tab || this.tab.classList.contains('show'))\r\n              this.queue = setTimeout(() => this.update(void 0, void 0, true), 50)\r\n          } else {\r\n            if (this.view && this.displaying) {\r\n              const parsed = this.parsed,\r\n                view = site.dataviews[this.view],\r\n                d = view.get.dataset(),\r\n                time = valueOf(view.time_agg),\r\n                map_time = site.map[this.id].has_time ? site.map[this.id].match_time(time) : '',\r\n                inited = d + map_time + this.id in site.data.inited,\r\n                mapId = inited ? d + map_time : d\r\n              if (site.map._queue && mapId in site.map._queue && !site.data.inited[mapId + this.id]) {\r\n                if (!inited || null !== time)\r\n                  retrieve_layer(this, site.map._queue[mapId], () => this.update(void 0, void 0, true))\r\n                return\r\n              }\r\n              if (!view.valid && site.data.inited[d]) {\r\n                view.state = ''\r\n                conditionals.dataview(view, void 0, true)\r\n              }\r\n              parsed.view = view\r\n              parsed.dataset = d\r\n              const vstate =\r\n                  view.value() +\r\n                  mapId +\r\n                  site.settings.background_shapes +\r\n                  site.settings.background_top +\r\n                  site.settings.background_polygon_outline +\r\n                  site.data.inited[this.options.background_shapes],\r\n                a = view.selection.all,\r\n                s = view.selection[site.settings.background_shapes && this.options.background_shapes ? 'ids' : 'all'],\r\n                c = valueOf(this.color || view.y)\r\n              if (site.settings.map_overlay && c in site.map[this.id].triggers) {\r\n                show_overlay(this, site.map[this.id].triggers[c], site.data.meta.overall.value[view.parsed.time_agg])\r\n              } else {\r\n                this.overlay_control.remove()\r\n                this.overlay.clearLayers()\r\n              }\r\n              if (site.data.inited[mapId + this.id] && s && view.valid) {\r\n                const ys = this.time\r\n                  ? _u[this.time]\r\n                  : view.time_agg\r\n                  ? view.time_agg in _u\r\n                    ? _u[view.time_agg]\r\n                    : parseInt(view.time_agg)\r\n                  : 0\r\n                parsed.palette = valueOf(view.palette) || site.settings.palette\r\n                if (!(parsed.palette in palettes)) parsed.palette = defaults.palette\r\n                const varc = await site.data.get_variable(c, this.view),\r\n                  summary = varc.views[this.view].summaries[d],\r\n                  time = (ys.parsed ? ys.value() - site.data.meta.times[d].range[0] : 0) - varc.time_range[d][0]\r\n                parsed.summary = summary\r\n                parsed.time = time\r\n                parsed.color = c\r\n                const subset = summary.n[ys] === view.n_selected.dataset ? 'rank' : 'subset_rank'\r\n                if (vstate !== this.vstate) {\r\n                  this.map._zoomAnimated = 'none' !== site.settings.map_animations\r\n                  Object.keys(this.reference_options).forEach(k => {\r\n                    this.options[k] = valueOf(this.reference_options[k])\r\n                    if ('zoomAnimation' === k) this.map._zoomAnimated = this.options[k]\r\n                  })\r\n                  this.displaying.clearLayers()\r\n                  this.fresh_shapes = true\r\n                  this.vstate = false\r\n                  let n = 0\r\n                  Object.keys(s).forEach(k => {\r\n                    const skl = s[k].layer\r\n                    if (skl && skl[this.id]) {\r\n                      const fg = k in a,\r\n                        cl = skl[this.id].has_time ? skl[this.id][map_time] : skl[this.id]\r\n                      if (cl && (fg || this.options.background_shapes === site.data.entities[k].group)) {\r\n                        n++\r\n                        cl.options.interactive = fg\r\n                        cl.addTo(this.displaying)\r\n                        if (fg) {\r\n                          if (site.settings.background_top) cl.bringToBack()\r\n                        } else {\r\n                          if (!site.settings.background_top) cl.bringToBack()\r\n                          cl.setStyle({\r\n                            fillOpacity: 0,\r\n                            color: 'var(--border-highlight)',\r\n                            weight: site.settings.background_polygon_outline,\r\n                          })\r\n                        }\r\n                        if (!this.vstate) this.vstate = vstate\r\n                      }\r\n                    }\r\n                  })\r\n                  this.overlay.bringToFront()\r\n                  if (n)\r\n                    if ('fly' === site.settings.map_animations) {\r\n                      setTimeout(() => this.map.flyToBounds(this.displaying.getBounds()), 400)\r\n                    } else {\r\n                      this.map.fitBounds(this.displaying.getBounds())\r\n                    }\r\n                }\r\n\r\n                // coloring\r\n                const k =\r\n                  c +\r\n                  this.vstate +\r\n                  parsed.palette +\r\n                  time +\r\n                  site.settings.polygon_outline +\r\n                  site.settings.color_by_order +\r\n                  site.settings.color_scale_center\r\n                if (k !== this.cstate) {\r\n                  this.cstate = k\r\n                  if (site.map[this.id]) {\r\n                    const ls = this.displaying._layers\r\n                    const n = summary.n[time]\r\n                    const missing = summary.missing[time]\r\n                    Object.keys(ls).forEach(id => {\r\n                      const lsi = ls[id]\r\n                      if (d === lsi.entity.group) {\r\n                        const e = a[lsi.entity.features.id],\r\n                          es = e && e.views[this.view][subset]\r\n                        lsi.setStyle({\r\n                          fillOpacity: 0.7,\r\n                          color: 'var(--border)',\r\n                          fillColor:\r\n                            e && c in es\r\n                              ? pal(e.get_value(c, time), parsed.palette, summary, time, es[c][time] - missing, n)\r\n                              : defaults.missing,\r\n                          weight: site.settings.polygon_outline,\r\n                        })\r\n                      }\r\n                    })\r\n                  } else {\r\n                    if (!('_waiting' in site.map)) site.map._waiting = {}\r\n                    if (!(d in site.map._waiting)) site.map._waiting[d] = []\r\n                    if (-1 === site.map._waiting[d].indexOf(this.id)) site.map._waiting[d].push(this.id)\r\n                    if (-1 === site.map._waiting[d].indexOf(this.view)) site.map._waiting[d].push(this.view)\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n      },\r\n      info: {\r\n        init: function (o) {\r\n          o.depends = {}\r\n          o.has_default = o.options.default && (o.options.default.title || o.options.default.body)\r\n          add_subs(o.view, o)\r\n          if (o.options.floating) {\r\n            document.body.appendChild(o.e)\r\n            o.e.classList.add('hidden')\r\n            document.addEventListener('mousemove', function (e) {\r\n              if (o.showing) {\r\n                const f = page.content.getBoundingClientRect()\r\n                o.e.style.top = (e.y > f.height / 2 ? e.y - o.e.getBoundingClientRect().height - 10 : e.y + 10) + 'px'\r\n                o.e.style.left = (e.x > f.width / 2 ? e.x - o.e.getBoundingClientRect().width - 10 : e.x + 10) + 'px'\r\n              }\r\n            })\r\n          }\r\n          o.show = function (e, u) {\r\n            this.update(e, u)\r\n            this.showing = true\r\n            if (this.options.floating) this.e.classList.remove('hidden')\r\n            if (this.parts.title) {\r\n              if (this.selection) {\r\n                this.parts.title.base.classList.add('hidden')\r\n              } else this.parts.title.default.classList.add('hidden')\r\n              this.parts.title.temp.classList.remove('hidden')\r\n            }\r\n            if (this.parts.body) {\r\n              if (this.selection) {\r\n                this.parts.body.base.classList.add('hidden')\r\n              } else this.parts.body.default.classList.add('hidden')\r\n              this.parts.body.temp.classList.remove('hidden')\r\n            }\r\n          }\r\n          o.revert = function () {\r\n            this.showing = false\r\n            if (this.options.floating) {\r\n              this.e.classList.add('hidden')\r\n            } else {\r\n              if (this.parts.title) {\r\n                if (this.selection) {\r\n                  this.parts.title.base.classList.remove('hidden')\r\n                } else if (this.has_default) this.parts.title.default.classList.remove('hidden')\r\n                this.parts.title.temp.classList.add('hidden')\r\n              }\r\n              if (this.parts.body) {\r\n                if (this.selection) {\r\n                  this.parts.body.base.classList.remove('hidden')\r\n                } else if (this.has_default) this.parts.body.default.classList.remove('hidden')\r\n                this.parts.body.temp.classList.add('hidden')\r\n              }\r\n            }\r\n          }\r\n          o.parts = {}\r\n          function parse_part(o, t) {\r\n            const p = {\r\n              parent: o,\r\n              text: t,\r\n              parsed: {},\r\n              ref: true,\r\n              selection: false,\r\n              get: function (entity, caller) {\r\n                if (this.ref) {\r\n                  if (entity)\r\n                    if ('features' in this.parsed) {\r\n                      return entity.features[this.parsed.features]\r\n                    } else if ('data' in this.parsed) {\r\n                      if ('value' === this.text) {\r\n                        this.parsed.data = valueOf(o.options.variable || caller.color || caller.y || _u[o.view].y)\r\n                      } else if (this.text in _u) this.parsed.data = valueOf(this.text)\r\n                      if (!(this.parsed.data in site.data.variables)) return this.parsed.data\r\n                      const info = site.data.variable_info[this.parsed.data],\r\n                        v = site.data.format_value(\r\n                          entity.get_value(this.parsed.data, this.parent.time),\r\n                          info && info.type ? patterns.int_types.test(info.type) : true\r\n                        )\r\n                      return NaN !== v && info.type in value_types ? value_types[info.type](v) : v\r\n                    }\r\n                  if ('data' in this.parsed) {\r\n                    return site.data.meta.times[this.parent.dataset].value[this.parent.time_agg]\r\n                  } else if (\r\n                    'variables' in this.parsed &&\r\n                    (this.value_source || this.parent.v in site.data.variable_info)\r\n                  ) {\r\n                    return site.data.variable_info[valueOf(this.value_source || this.parent.v)][this.parsed.variables]\r\n                  }\r\n                  return this.text\r\n                } else return this.text\r\n              },\r\n            }\r\n            if ('value' === t) {\r\n              p.parsed.data = o.options.variable\r\n            } else if ('summary' === t) {\r\n              o.options.show_summary = true\r\n              o.e.classList.add('info-summary-wrapper')\r\n              const e = document.createElement('table')\r\n              e.className = 'info-summary'\r\n              p.parsed.summary = e\r\n              e.appendChild(document.createElement('tr'))\r\n              e.appendChild(document.createElement('tr'))\r\n              ;['NAs', 'Min', 'Q1', 'Mean', 'Median', 'Q3', 'Max'].forEach(h => {\r\n                e.firstElementChild.appendChild(document.createElement('th'))\r\n                e.firstElementChild.lastElementChild.innerText = h\r\n                e.lastElementChild.appendChild(document.createElement('td'))\r\n                e.lastElementChild.lastElementChild.innerText = 'NA'\r\n              })\r\n            } else if ('filter' === t) {\r\n              const e = document.createElement('table')\r\n              e.className = 'info-filter'\r\n              p.parsed.filter = e\r\n            }\r\n            if (patterns.features.test(t)) {\r\n              p.parsed.features = t.replace(patterns.features, '')\r\n            } else if (patterns.data.test(t)) {\r\n              p.parsed.data = t.replace(patterns.data, '')\r\n            } else if (patterns.variables.test(t)) {\r\n              p.parsed.variables = t.replace(patterns.variables, '')\r\n            } else p.ref = false\r\n            return p\r\n          }\r\n          if (o.options.title) {\r\n            o.parts.title = parse_part(o, o.options.title)\r\n            if ('variables' in o.parts.title.parsed && patterns.measure_name.test(o.parts.title.parsed.variables)) {\r\n              o.parts.title.base = document.createElement('button')\r\n              o.parts.title.base.type = 'button'\r\n              o.parts.title.base.setAttribute('data-bs-toggle', 'modal')\r\n              o.parts.title.base.setAttribute('data-bs-target', '#variable_info_display')\r\n              o.parts.title.base.addEventListener('click', show_variable_info.bind(o))\r\n            } else o.parts.title.base = document.createElement('p')\r\n            o.parts.title.base.appendChild(document.createElement('span'))\r\n            o.parts.title.temp = document.createElement('p')\r\n            o.parts.title.default = document.createElement('p')\r\n            o.parts.title.temp.className =\r\n              o.parts.title.base.className =\r\n              o.parts.title.default.className =\r\n                'info-title hidden'\r\n            if (o.has_default && o.options.default.title) {\r\n              o.e.appendChild(o.parts.title.default)\r\n              o.parts.title.default.innerText = o.options.default.title\r\n            }\r\n            if (!o.parts.title.ref) o.parts.title.base.firstElementChild.innerText = o.parts.title.get()\r\n            o.e.appendChild(o.parts.title.base)\r\n            o.e.appendChild(o.parts.title.temp)\r\n            o.parts.title.base.classList.add('hidden')\r\n            o.parts.title.temp.classList.add('hidden')\r\n          }\r\n          if (o.options.body) {\r\n            o.parts.body = {\r\n              base: document.createElement('div'),\r\n              temp: document.createElement('div'),\r\n              default: document.createElement('div'),\r\n              rows: [],\r\n            }\r\n            o.parts.body.temp.className =\r\n              o.parts.body.base.className =\r\n              o.parts.body.default.className =\r\n                'info-body hidden'\r\n            if (o.has_default && o.options.default.body) o.parts.body.default.innerText = o.options.default.body\r\n            let h = 0\r\n            o.options.body.forEach((op, i) => {\r\n              const p = {\r\n                name: parse_part(o, op.name),\r\n                value: parse_part(o, op.value),\r\n              }\r\n              o.parts.body.rows[i] = p\r\n              p.base = document.createElement('div')\r\n              o.parts.body.base.appendChild(p.base)\r\n              p.temp = document.createElement('div')\r\n              o.parts.body.temp.appendChild(p.temp)\r\n              p.temp.className = p.base.className = 'info-body-row-' + op.style\r\n              h += 24 + ('stack' === op.style ? 24 : 0)\r\n              if (p.name) {\r\n                if (\r\n                  o.options.variable_info &&\r\n                  'variables' in p.name.parsed &&\r\n                  patterns.measure_name.test(p.name.parsed.variables)\r\n                ) {\r\n                  p.base.appendChild(document.createElement('button'))\r\n                  p.base.lastElementChild.type = 'button'\r\n                  p.base.lastElementChild.setAttribute('data-bs-toggle', 'modal')\r\n                  p.base.lastElementChild.setAttribute('data-bs-target', '#variable_info_display')\r\n                  p.base.lastElementChild.addEventListener('click', show_variable_info.bind(o))\r\n                } else p.base.appendChild(document.createElement('div'))\r\n                p.temp.appendChild(document.createElement('div'))\r\n                p.temp.lastElementChild.className = p.base.lastElementChild.className = 'info-body-row-name'\r\n                p.temp.lastElementChild.innerText = p.base.lastElementChild.innerText = p.name.get()\r\n              }\r\n              if (p.value) {\r\n                p.base.appendChild(document.createElement('div'))\r\n                p.temp.appendChild(document.createElement('div'))\r\n                if ('summary' in p.value.parsed) {\r\n                  p.base.lastElementChild.appendChild(p.value.parsed.summary)\r\n                } else if ('filter' in p.value.parsed) {\r\n                  p.base.lastElementChild.appendChild(p.value.parsed.filter)\r\n                } else {\r\n                  p.temp.lastElementChild.className = p.base.lastElementChild.className =\r\n                    'info-body-row-value' + ('statement' === p.value.parsed.variables ? ' statement' : '')\r\n                  if (p.name.ref && 'value' === p.value.text) p.value.ref = true\r\n                  if (!p.value.ref)\r\n                    p.temp.lastElementChild.innerText = p.base.lastElementChild.innerText = p.value.get()\r\n                }\r\n              }\r\n            })\r\n            o.e.style.minHeight = h + 'px'\r\n            o.e.appendChild(o.parts.body.base)\r\n            o.e.appendChild(o.parts.body.default)\r\n            o.e.appendChild(o.parts.body.temp)\r\n          }\r\n          o.update()\r\n        },\r\n        update: async function (entity, caller, pass) {\r\n          const v = site.dataviews[this.view]\r\n          const y = _u[v.time_agg]\r\n          this.v = valueOf(this.options.variable || (caller && (caller.color || caller.y)) || v.y)\r\n          this.dataset = v.get.dataset()\r\n          if (y && !(this.dataset in site.data.meta.times)) {\r\n            if (!(this.id in site.data.data_queue[this.dataset]))\r\n              site.data.data_queue[this.dataset][this.id] = this.update\r\n            return\r\n          }\r\n          this.time_agg = y ? y.value() - site.data.meta.times[this.dataset].range[0] : 0\r\n          const time_range = this.v && site.data.variables[this.v].time_range[this.dataset]\r\n          this.time = time_range ? this.time_agg - time_range[0] : 0\r\n          if (this.options.show_summary) {\r\n            this.var = this.v && (await site.data.get_variable(this.v, this.view))\r\n            this.summary = this.view in this.var.views && this.var.views[this.view].summaries[this.dataset]\r\n          }\r\n          if (!this.processed) {\r\n            this.processed = true\r\n            if (!this.options.floating) {\r\n              add_dependency(this.view, {type: 'update', id: this.id})\r\n              if (v.y in _u) add_dependency(v.y, {type: 'update', id: this.id})\r\n              if (y) add_dependency(v.time_agg, {type: 'update', id: this.id})\r\n              if (this.options.variable in _u) add_dependency(this.options.variable, {type: 'update', id: this.id})\r\n            }\r\n            if (this.parts.body)\r\n              this.parts.body.rows.forEach(p => {\r\n                if (!p.value.ref && p.value.text in _u && 'variables' in p.name.parsed) {\r\n                  p.name.value_source = p.value.value_source = p.value.text\r\n                  p.value.ref = true\r\n                  p.value.parsed.data = ''\r\n                }\r\n              })\r\n          }\r\n          if (entity) {\r\n            // hover information\r\n            if (this.parts.title) {\r\n              this.parts.title.temp.innerText = this.parts.title.get(entity, caller)\r\n            }\r\n            if (this.parts.body) {\r\n              this.parts.body.rows.forEach(p => {\r\n                if (p.name.ref) {\r\n                  if (p.name.value_source) p.name.value_source = p.value.text\r\n                  e = p.name.get(entity, caller)\r\n                  if ('object' !== typeof e) {\r\n                    p.temp.firstElementChild.innerText = parse_variables(e, p.value.parsed.variables, this, entity)\r\n                  }\r\n                }\r\n                if (p.value.ref) {\r\n                  if (p.value.value_source) p.value.value_source = p.value.text\r\n                  e = p.value.get(entity, caller)\r\n                  if ('object' !== typeof e) {\r\n                    p.temp.lastElementChild.innerText = parse_variables(e, p.value.parsed.variables, this, entity)\r\n                  }\r\n                }\r\n              })\r\n            }\r\n          } else if (!this.options.floating) {\r\n            if (this.queue > 0) clearTimeout(this.queue)\r\n            this.queue = -1\r\n            if (!pass) {\r\n              if (!this.tab || this.tab.classList.contains('show'))\r\n                this.queue = setTimeout(() => this.update(void 0, void 0, true), 50)\r\n            } else {\r\n              // base information\r\n              entity = site.data.entities[v.get.ids(true)]\r\n              if (entity) {\r\n                // when showing a selected region\r\n                this.selection = true\r\n                if (this.parts.title) {\r\n                  if (this.parts.title.value_source) p.title.value_source = p.value.text\r\n                  this.parts.title.base.classList.remove('hidden')\r\n                  this.parts.title.default.classList.add('hidden')\r\n                }\r\n                if (this.parts.body && this.has_default) this.parts.body.default.classList.add('hidden')\r\n              } else {\r\n                // when no ID is selected\r\n                this.selection = false\r\n                if (this.parts.title) {\r\n                  if (this.has_default) {\r\n                    this.parts.title.base.classList.add('hidden')\r\n                    this.parts.title.default.classList.remove('hidden')\r\n                  } else if (!this.parts.title.ref || !('features' in this.parts.title.parsed))\r\n                    this.parts.title.base.classList.remove('hidden')\r\n                }\r\n                if (this.parts.body) {\r\n                  this.parts.body.base.classList.add('hidden')\r\n                  if (this.has_default) this.parts.body.default.classList.remove('hidden')\r\n                }\r\n              }\r\n              if (this.parts.title) {\r\n                this.parts.title.base.firstElementChild.innerText = this.parts.title.get(entity, caller)\r\n              }\r\n              if (this.parts.body) {\r\n                if (!this.options.subto) this.parts.body.base.classList.remove('hidden')\r\n                this.parts.body.rows.forEach(p => {\r\n                  if ('summary' in p.value.parsed) {\r\n                    const e = p.value.parsed.summary.lastElementChild.children\r\n                    filter_components.summary.forEach((c, i) => {\r\n                      e[i].innerText = site.data.format_value(this.summary[c][this.time], 0 === i)\r\n                    })\r\n                  } else if ('filter' in p.value.parsed) {\r\n                    const e = p.value.parsed.filter\r\n                    let n = 0\r\n                    e.innerHTML = ''\r\n                    if (_u._entity_filter.selected.length) {\r\n                      n++\r\n                      const s = document.createElement('tr')\r\n                      s.className = 'filter-display'\r\n                      let ss = document.createElement('td')\r\n                      s.appendChild(ss)\r\n                      ss.appendChild(document.createElement('span'))\r\n                      ss.lastElementChild.className = 'syntax-variable'\r\n                      ss.lastElementChild.innerText = 'Select Entities'\r\n                      ss = document.createElement('td')\r\n                      s.appendChild(ss)\r\n                      ss.appendChild(document.createElement('span'))\r\n                      ss.lastElementChild.className = 'syntax-operator'\r\n                      ss.lastElementChild.innerText = ':'\r\n                      ss = document.createElement('td')\r\n                      s.appendChild(ss)\r\n                      ss.setAttribute('colspan', 2)\r\n                      ss.appendChild(document.createElement('span'))\r\n                      ss.lastElementChild.className = 'syntax-value'\r\n                      let ids = ''\r\n                      _u._entity_filter.selected.forEach(id => {\r\n                        const entity = site.data.entities[id]\r\n                        ids += (ids ? ', ' : '') + (entity && entity.features ? entity.features.name : id)\r\n                      })\r\n                      ss.lastElementChild.innerText = ids\r\n                      e.appendChild(s)\r\n                    }\r\n                    _u._base_filter.c.forEach(f => {\r\n                      const checked = f.passed + f.failed\r\n                      if (f.active && checked) {\r\n                        const result = f.passed + '/' + checked\r\n                        f.e.children[1].lastElementChild.innerText = result\r\n                        n++\r\n                        const s = document.createElement('tr'),\r\n                          info = site.data.variable_info[f.variable]\r\n                        s.className = 'filter-display'\r\n                        let ss = document.createElement('td')\r\n                        s.appendChild(ss)\r\n                        ss.appendChild(document.createElement('span'))\r\n                        ss.lastElementChild.className = 'syntax-variable'\r\n                        ss.lastElementChild.title = f.variable\r\n                        ss.lastElementChild.innerText = info.short_name\r\n                        ss.appendChild(document.createElement('span'))\r\n                        ss.lastElementChild.innerText = ' ('\r\n                        ss.appendChild(document.createElement('span'))\r\n                        ss.lastElementChild.className = 'syntax-component'\r\n                        ss.lastElementChild.innerText = f.component\r\n                        ss.appendChild(document.createElement('span'))\r\n                        ss.lastElementChild.innerText = ')'\r\n                        ss = document.createElement('td')\r\n                        s.appendChild(ss)\r\n                        ss.appendChild(document.createElement('span'))\r\n                        ss.lastElementChild.className = 'syntax-operator'\r\n                        ss.lastElementChild.innerText = f.operator\r\n                        ss = document.createElement('td')\r\n                        s.appendChild(ss)\r\n                        ss.appendChild(document.createElement('span'))\r\n                        ss.lastElementChild.className = 'syntax-value'\r\n                        ss.lastElementChild.innerText =\r\n                          'number' === typeof f.value ? site.data.format_value(f.value) : f.value\r\n                        ss = document.createElement('td')\r\n                        s.appendChild(ss)\r\n                        ss.appendChild(document.createElement('span'))\r\n                        ss.lastElementChild.innerText =\r\n                          '(' + (f.value_source ? f.value_source + '; ' : '') + result + ')'\r\n                        e.appendChild(s)\r\n                      }\r\n                    })\r\n                    this.e.style.display = n ? '' : 'none'\r\n                  }\r\n                  if (('variables' in p.value.parsed || 'summary' in p.value.parsed) && !(v.y in this.depends)) {\r\n                    this.depends[v.y] = true\r\n                    add_dependency(v.y, {type: 'update', id: this.id})\r\n                  } else if ('filter' in p.value.parsed && !('_base_filter' in this.depends)) {\r\n                    this.depends._base_filter = true\r\n                    add_dependency('_base_filter', {type: 'update', id: this.id})\r\n                  }\r\n                  if (p.name.ref) {\r\n                    if (p.name.value_source) p.name.value_source = p.value.text\r\n                    const e = p.name.get(entity, caller)\r\n                    if ('object' !== typeof e) {\r\n                      p.base.firstElementChild.innerText = e\r\n                    }\r\n                  }\r\n                  if (p.value.ref) {\r\n                    const e = p.value.get(entity, caller)\r\n                    if ('object' === typeof e) {\r\n                      if (Array.isArray(e) && 'sources' === p.value.parsed.variables) {\r\n                        p.base.innerHTML = ''\r\n                        p.base.appendChild(document.createElement('table'))\r\n                        p.base.lastElementChild.className = 'source-table'\r\n                        p.base.firstElementChild.appendChild(document.createElement('thead'))\r\n                        p.base.firstElementChild.firstElementChild.appendChild(document.createElement('tr'))\r\n                        p.base.firstElementChild.firstElementChild.firstElementChild.appendChild(\r\n                          document.createElement('th')\r\n                        )\r\n                        p.base.firstElementChild.firstElementChild.firstElementChild.appendChild(\r\n                          document.createElement('th')\r\n                        )\r\n                        p.base.firstElementChild.firstElementChild.firstElementChild.firstElementChild.innerText =\r\n                          'Source'\r\n                        p.base.firstElementChild.firstElementChild.firstElementChild.lastElementChild.innerText =\r\n                          'Accessed'\r\n                        p.base.firstElementChild.appendChild(document.createElement('tbody'))\r\n                        e.forEach(ei => {\r\n                          p.base.firstElementChild.lastElementChild.appendChild(make_variable_source(ei, true))\r\n                        })\r\n                      }\r\n                    } else {\r\n                      p.base.lastElementChild.innerText = parse_variables(e, p.value.parsed.variables, this, entity)\r\n                    }\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          }\r\n          this.revert()\r\n        },\r\n      },\r\n      datatable: {\r\n        init: function (o) {\r\n          o.e.appendChild(document.createElement('thead'))\r\n          o.e.appendChild(document.createElement('tbody'))\r\n          o.click = o.e.getAttribute('data-click')\r\n          o.features = o.options.features\r\n          o.parsed = {summary: {}, order: [], time: -1, color: '', dataset: _u[o.view].get.dataset(), time_index: {}}\r\n          o.header = []\r\n          o.rows = {}\r\n          o.rowIds = {}\r\n          o.tab = 'tabpanel' === o.e.parentElement.getAttribute('role') ? o.e.parentElement : void 0\r\n          const time = site.data.meta.times[o.parsed.dataset]\r\n          o.style = document.head.appendChild(document.createElement('style'))\r\n          if (o.tab) {\r\n            document.getElementById(o.e.parentElement.getAttribute('aria-labelledby')).addEventListener(\r\n              'click',\r\n              function () {\r\n                if (!this.e.parentElement.classList.contains('active')) {\r\n                  setTimeout(this.update, 155)\r\n                  setTimeout(trigger_resize, 155)\r\n                }\r\n              }.bind(o)\r\n            )\r\n          }\r\n          o.e.addEventListener('mouseover', elements.datatable.mouseover.bind(o))\r\n          o.e.addEventListener('mouseout', elements.datatable.mouseout.bind(o))\r\n          if (o.click) {\r\n            if (o.click in _u) o.clickto = _u[o.click]\r\n            o.e.addEventListener('click', elements.datatable.click.bind(o))\r\n          }\r\n          o.show = function (e) {\r\n            if (e.features && e.features.id in this.rows) {\r\n              if (site.settings.table_autoscroll) {\r\n                this.rows[e.features.id].scrollTo('smooth' === site.settings.table_scroll_behavior)\r\n              }\r\n              if (this.pending > 0) clearTimeout(this.pending)\r\n              this.pending = -1\r\n              const row = this.rows[e.features.id].node()\r\n              if (row) {\r\n                row.classList.add('highlighted')\r\n              } else {\r\n                this.pending = setTimeout(\r\n                  function () {\r\n                    const row = this.node()\r\n                    if (row) row.classList.add('highlighted')\r\n                  }.bind(this.rows[e.features.id]),\r\n                  0\r\n                )\r\n              }\r\n            }\r\n          }\r\n          o.revert = function () {\r\n            if (this.pending > 0) clearTimeout(this.pending)\r\n            this.e.querySelectorAll('tr.highlighted').forEach(e => e.classList.remove('highlighted'))\r\n          }\r\n          o.options.variable_source = o.options.variables\r\n          if (o.options.variables) {\r\n            if ('string' === typeof o.options.variables) {\r\n              if (o.options.variables in _u) {\r\n                add_dependency(o.options.variables, {type: 'update', id: o.id})\r\n                o.options.variables = valueOf(o.options.variables)\r\n                o.options.single_variable = 'string' === typeof o.options.variables\r\n              } else if (!o.options.single_variable) {\r\n                o.options.single_variable = [{name: o.options.single_variable}]\r\n              }\r\n            }\r\n          } else o.options.variables = Object.keys(site.data.variables)\r\n          if (\r\n            'string' !== typeof o.options.variables &&\r\n            o.options.variables.length &&\r\n            'string' === o.options.variables[0]\r\n          ) {\r\n            o.options.variables = o.options.variables.map(v => {\r\n              name: v\r\n            })\r\n          }\r\n          if (o.options.single_variable) {\r\n            const c = o.options.variables,\r\n              k = c.name || c\r\n            o.header.push({title: 'Name', data: 'entity.features.name'})\r\n            if (time && time.is_single) o.variable_header = true\r\n            const t = k in site.data.variables && site.data.variables[k].time_range[o.parsed.dataset]\r\n            if (t)\r\n              for (let n = t[1] - t[0] + 1; n--; ) {\r\n                o.header[n + 1] = {\r\n                  title: o.variable_header ? c.title || site.data.format_label(k) : time.value[n + t[0]] + '',\r\n                  data: site.data.get_value,\r\n                  render: DataHandler.retrievers.row_time.bind({\r\n                    i: n,\r\n                    o: t[0],\r\n                    format_value: site.data.format_value.bind(site.data),\r\n                  }),\r\n                }\r\n              }\r\n            o.options.order = [[o.header.length - 1, 'dsc']]\r\n          } else if (o.options.wide) {\r\n            if (o.features) {\r\n              if ('string' === typeof o.features) o.features = [{name: o.features}]\r\n              o.features.forEach(f => {\r\n                o.header.push({\r\n                  title: f.title || f.name,\r\n                  data: 'entity.features.' + f.name.replace(patterns.all_periods, '\\\\.'),\r\n                })\r\n              })\r\n            }\r\n            for (let i = o.options.variables.length; i--; ) {\r\n              if ('string' === typeof o.options.variables[i]) o.options.variables[i] = {name: o.options.variables[i]}\r\n              const c = o.options.variables[i]\r\n              if (!c.source) c.source = c.name in site.data.variables ? 'data' : 'features'\r\n              o.header.push(\r\n                'features' === c.source\r\n                  ? {\r\n                      title: c.title || site.data.format_label(c.name),\r\n                      data: 'entity.features.' + c.name.toLowerCase().replace(patterns.all_periods, '\\\\.'),\r\n                    }\r\n                  : {\r\n                      title: c.title || site.data.format_label(c.name),\r\n                      render: async function (d, type, row) {\r\n                        if ('data' === this.c.source) {\r\n                          if (this.c.name in site.data.variables) {\r\n                            const v = await site.data.get_variable(this.c.name, this.o.view)\r\n                            const i = row.time - v.time_range[this.o.parsed.dataset][0]\r\n                            return i < 0 ? NaN : row.entity.get_value(this.c.name, i)\r\n                          } else return NaN\r\n                        } else\r\n                          return this.c.source in row.entity && this.c.name in row.entity[this.c.source]\r\n                            ? row.entity[this.c.source][this.c.name]\r\n                            : NaN\r\n                      }.bind({o, c}),\r\n                    }\r\n              )\r\n            }\r\n          } else {\r\n            o.filters = o.options.filters\r\n            o.current_filter = {}\r\n            if (!time.is_single) {\r\n              o.header.push({\r\n                title: 'Year',\r\n                data: 'entity.time.value',\r\n                render: function (d, type, row) {\r\n                  const t = row.time + row.offset\r\n                  return d && t >= 0 && t < d.length ? d[t] : NaN\r\n                },\r\n              })\r\n            }\r\n            if (o.features) {\r\n              if ('string' === typeof o.features) o.features = [{name: o.features}]\r\n              o.features.forEach(f => {\r\n                o.header.splice(0, 0, {\r\n                  title: f.title || f.name,\r\n                  data: 'entity.features.' + f.name.replace(patterns.all_periods, '\\\\.'),\r\n                })\r\n              })\r\n            }\r\n            o.header.push({\r\n              title: 'Variable',\r\n              data: function (row) {\r\n                return row.variable in row.entity.variables\r\n                  ? row.entity.variables[row.variable].meta.short_name\r\n                  : row.variable\r\n              },\r\n            })\r\n            o.header.push({\r\n              title: 'Value',\r\n              data: site.data.get_value,\r\n              render: function (d, type, row) {\r\n                return d\r\n                  ? 'number' === typeof d[row.time]\r\n                    ? site.data.format_value(d[row.time], row.int)\r\n                    : d[row.time]\r\n                  : ''\r\n              },\r\n            })\r\n          }\r\n          if (o.view) {\r\n            add_dependency(o.view, {type: 'update', id: o.id})\r\n            add_dependency(o.view + '_filter', {type: 'update', id: o.id})\r\n            add_dependency(_u[o.view].time_agg, {type: 'update', id: o.id})\r\n          } else o.view = defaults.dataview\r\n          o.queue = this.queue_init.bind(o)()\r\n        },\r\n        queue_init: function () {\r\n          const showing = this.deferred || !this.tab || this.tab.classList.contains('show')\r\n          if (showing && window.jQuery && window.DataTable && 'get' in site.dataviews[this.view]) {\r\n            this.options.columns = this.header\r\n            this.table = $(this.e).DataTable(this.options)\r\n            this.update()\r\n          } else {\r\n            this.deferred = true\r\n            setTimeout(this.queue, showing ? 0 : 2000)\r\n          }\r\n        },\r\n        update: async function (pass) {\r\n          if (this.queue > 0) clearTimeout(this.queue)\r\n          this.queue = -1\r\n          if (!pass) {\r\n            if (!this.tab || this.tab.classList.contains('show')) this.queue = setTimeout(() => this.update(true), 50)\r\n          } else {\r\n            if (this.table) {\r\n              let vn =\r\n                this.options.variable_source &&\r\n                valueOf(this.options.variable_source).replace(patterns.all_periods, '\\\\.')\r\n              const v = _u[this.view],\r\n                d = v.get.dataset(),\r\n                times = site.data.meta.times[d],\r\n                state =\r\n                  d +\r\n                  v.value() +\r\n                  v.get.time_filters() +\r\n                  site.settings.digits +\r\n                  vn +\r\n                  site.settings.theme_dark +\r\n                  site.settings.show_empty_times,\r\n                update = state !== this.state,\r\n                time = valueOf(v.time_agg),\r\n                variable = await site.data.get_variable(vn, this.view)\r\n              this.parsed.time_range = variable ? variable.time_range[d] : times.info.time_range[d]\r\n              this.parsed.time = ('number' === typeof time ? time - times.range[0] : 0) - this.parsed.time_range[0]\r\n              if (update) {\r\n                this.rows = {}\r\n                this.rowIds = {}\r\n                this.table.clear()\r\n                let redraw = true\r\n                if (v.valid) {\r\n                  this.state = state\r\n                  Object.keys(this.reference_options).forEach(\r\n                    k => (this.options[k] = valueOf(this.reference_options[k]))\r\n                  )\r\n                  if (this.options.single_variable) {\r\n                    this.parsed.time_index = {}\r\n                    this.parsed.dataset = d\r\n                    this.parsed.color = vn\r\n                    this.parsed.summary = this.view in variable.views ? variable.views[this.view].summaries[d] : false\r\n                    this.parsed.order =\r\n                      this.view in variable.views ? variable.views[this.view].order[d][this.parsed.time] : false\r\n                    if (this.header.length < 2 || d !== this.header[1].dataset || vn !== this.header[1].variable) {\r\n                      this.table.destroy()\r\n                      $(this.e).empty()\r\n                      this.header = [{title: 'Name', data: 'entity.features.name', type: 'string'}]\r\n                      if (-1 !== this.parsed.time_range[0]) {\r\n                        for (let n = this.parsed.time_range[2]; n--; ) {\r\n                          this.header[n + 1] = {\r\n                            dataset: d,\r\n                            variable: vn,\r\n                            type: 'string' === variable.type ? 'string' : 'num',\r\n                            title: this.variable_header\r\n                              ? this.options.variables.title || site.data.format_label(vn)\r\n                              : times.value[n + this.parsed.time_range[0]] + '',\r\n                            data: site.data.get_value,\r\n                            render: DataHandler.retrievers.row_time.bind({\r\n                              i: n,\r\n                              o: this.parsed.time_range[0],\r\n                              format_value: site.data.format_value.bind(site.data),\r\n                            }),\r\n                          }\r\n                        }\r\n                      } else this.state = ''\r\n                      this.options.order[0][0] = this.header.length - 1\r\n                      this.options.columns = this.header\r\n                      this.table = $(this.e).DataTable(this.options)\r\n                    }\r\n                    const n = this.header.length,\r\n                      ns = this.parsed.summary.n\r\n                    let reset\r\n                    for (let i = 1, show = false, nshowing = 0; i < n; i++) {\r\n                      show = v.times[i - 1 + this.parsed.time_range[0]] && (site.settings.show_empty_times || ns[i - 1])\r\n                      this.table.column(i).visible(show, false)\r\n                      if (show) {\r\n                        this.parsed.time_index[times.value[i - 1 + this.parsed.time_range[0]]] = ++nshowing\r\n                        reset = false\r\n                      }\r\n                    }\r\n                    if (reset) this.state = ''\r\n                  }\r\n                  if (this.options.wide) {\r\n                    Object.keys(v.selection.all).forEach(k => {\r\n                      if (vn) {\r\n                        if (vn in v.selection.all[k].views[this.view].summary) {\r\n                          this.rows[k] = this.table.row.add({\r\n                            dataset: d,\r\n                            variable: vn,\r\n                            offset: this.parsed.time_range[0],\r\n                            entity: v.selection.all[k],\r\n                            int: patterns.int_types.test(site.data.variable_info[vn].type),\r\n                          })\r\n                          this.rowIds[this.rows[k].selector.rows] = k\r\n                        }\r\n                      } else {\r\n                        for (let i = times.n; i--; ) {\r\n                          this.rows[k] = this.table.row.add({\r\n                            time: i,\r\n                            entity: v.selection.all[k],\r\n                          })\r\n                          this.rowIds[this.rows[k].selector.rows] = k\r\n                        }\r\n                      }\r\n                    })\r\n                  } else {\r\n                    if (this.filters)\r\n                      Object.keys(this.filters).forEach(f => {\r\n                        this.current_filter[c] = valueOf(f)\r\n                      })\r\n                    const va = []\r\n                    let varstate = '' + this.parsed.dataset + v.get.ids(true) + v.get.features() + site.settings.digits\r\n                    for (let i = this.options.variables.length; i--; ) {\r\n                      vn = this.options.variables[i].name || this.options.variables[i]\r\n                      pass = !this.filters\r\n                      const variable = await site.data.get_variable(vn, this.view)\r\n                      if (vn in site.data.variables && 'meta' in variable) {\r\n                        if (this.options.filters) {\r\n                          for (const c in this.current_filter)\r\n                            if (c in variable.meta) {\r\n                              pass = variable.meta[c] === this.current_filter[c]\r\n                              if (!pass) break\r\n                            }\r\n                        } else pass = true\r\n                      }\r\n                      if (pass) {\r\n                        varstate += vn\r\n                        va.push({\r\n                          variable: vn,\r\n                          int: patterns.int_types.test(site.data.variable_info[vn].type),\r\n                          time_range: variable.time_range[d],\r\n                          renderer: function (o, s) {\r\n                            const k = s.features.id,\r\n                              r = this.time_range,\r\n                              n = r[1]\r\n                            for (let i = r[0]; i <= n; i++) {\r\n                              o.rows[k] = o.table.row.add({\r\n                                offset: this.time_range[0],\r\n                                time: i - this.time_range[0],\r\n                                dataset: d,\r\n                                variable: this.variable,\r\n                                entity: s,\r\n                                int: this.int,\r\n                              })\r\n                              o.rowIds[o.rows[k].selector.rows] = k\r\n                            }\r\n                          },\r\n                        })\r\n                      }\r\n                    }\r\n                    if (varstate === this.varstate) return void 0\r\n                    this.varstate = varstate\r\n                    Object.keys(v.selection.all).forEach(k => {\r\n                      const e = v.selection.all[k]\r\n                      if (this.options.single_variable) {\r\n                        if (vn in e[v].summary && variable.code in e.data) {\r\n                          this.rows[k] = this.table.row.add({\r\n                            offset: this.parsed.time_range[0],\r\n                            dataset: d,\r\n                            variable: vn,\r\n                            entity: e,\r\n                            int: patterns.int_types.test(site.data.variable_info[vn].type),\r\n                          })\r\n                          this.rowIds[this.rows[k].selector.rows] = k\r\n                        }\r\n                      } else {\r\n                        va.forEach(v => {\r\n                          if (site.data.variables[v.variable].code in e.data) v.renderer(this, e)\r\n                        })\r\n                      }\r\n                    })\r\n                  }\r\n                }\r\n                redraw ? this.table.draw() : this.table.columns.adjust().draw(false)\r\n              }\r\n              if (this.parsed.time > -1 && this.header.length > 1 && v.time_range.filtered_index) {\r\n                this.dark_highlight = site.settings.theme_dark\r\n                if (this.style.sheet.rules.length) this.style.sheet.removeRule(0)\r\n                if (this.parsed.time_index[time])\r\n                  this.style.sheet.insertRule(\r\n                    '#' +\r\n                      this.id +\r\n                      ' td:nth-child(' +\r\n                      (this.parsed.time_index[time] + 1) +\r\n                      '){background-color: var(--background-highlight)}',\r\n                    0\r\n                  )\r\n                if (!update && site.settings.table_autosort) {\r\n                  this.table.order([this.parsed.time + 1, 'dsc']).draw()\r\n                }\r\n                if (site.settings.table_autoscroll) {\r\n                  const w = this.e.parentElement.getBoundingClientRect().width,\r\n                    col = this.table.column(this.parsed.time + 1),\r\n                    h = col.header().getBoundingClientRect()\r\n                  if (h)\r\n                    this.e.parentElement.scroll({\r\n                      left: h.x - this.e.getBoundingClientRect().x + h.width + 16 - w,\r\n                      behavior: site.settings.table_scroll_behavior || 'smooth',\r\n                    })\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        mouseover: function (e) {\r\n          if (e.target._DT_CellIndex && e.target._DT_CellIndex.row in this.rowIds) {\r\n            const id = this.rowIds[e.target._DT_CellIndex.row],\r\n              row = this.rows[id].node()\r\n            if (row) row.classList.add('highlighted')\r\n            if (id in site.data.entities) {\r\n              update_subs(this.id, 'show', site.data.entities[id])\r\n            }\r\n          }\r\n        },\r\n        mouseout: function (e) {\r\n          if (e.target._DT_CellIndex && e.target._DT_CellIndex.row in this.rowIds) {\r\n            const id = this.rowIds[e.target._DT_CellIndex.row],\r\n              row = this.rows[id].node()\r\n            if (row) row.classList.remove('highlighted')\r\n            if (id in site.data.entities) {\r\n              update_subs(this.id, 'revert', site.data.entities[id])\r\n            }\r\n          }\r\n        },\r\n        click: function (e) {\r\n          if (this.clickto && e.target._DT_CellIndex && e.target._DT_CellIndex.row in this.rowIds) {\r\n            const id = this.rowIds[e.target._DT_CellIndex.row]\r\n            if (id in site.data.entities) this.clickto.set(id)\r\n          }\r\n        },\r\n      },\r\n      table: {\r\n        init: function (o) {\r\n          o.click = o.e.getAttribute('data-click')\r\n          o.features = o.options.features\r\n          o.parsed = {summary: {}, order: [], time: 0, color: '', dataset: defaults.dataview, time_index: {}}\r\n          o.header = []\r\n          o.rows = {}\r\n          o.parts = {\r\n            head: document.createElement('thead'),\r\n            body: document.createElement('tbody'),\r\n          }\r\n          o.parts.head.appendChild(document.createElement('tr'))\r\n          o.e.appendChild(o.parts.head)\r\n          o.e.appendChild(o.parts.body)\r\n          if (o.click) o.e.classList.add('interactive')\r\n          o.options.variable_source = o.options.variables\r\n          if (o.options.variables in _u) add_dependency(o.options.variables, {type: 'update', id: o.id})\r\n          o.tab = 'tabpanel' === o.e.parentElement.getAttribute('role') ? o.e.parentElement : void 0\r\n          if (o.tab) {\r\n            document.getElementById(o.e.parentElement.getAttribute('aria-labelledby')).addEventListener(\r\n              'click',\r\n              function () {\r\n                if (!this.e.parentElement.classList.contains('active')) {\r\n                  setTimeout(this.update, 155)\r\n                  setTimeout(trigger_resize, 155)\r\n                }\r\n              }.bind(o)\r\n            )\r\n          }\r\n          o.e.addEventListener('mouseover', elements.table.mouseover.bind(o))\r\n          o.e.addEventListener('mouseout', elements.table.mouseout.bind(o))\r\n          if (o.click) {\r\n            if (o.click in _u) o.clickto = _u[o.click]\r\n            o.e.addEventListener('click', elements.table.click.bind(o))\r\n          }\r\n          o.show = function (e) {\r\n            if (e.features) {\r\n              const row = this.rows[e.features.id]\r\n              if (row && row.parentElement) {\r\n                row.classList.add('highlighted')\r\n                if (site.settings.table_autoscroll) {\r\n                  const h = this.e.parentElement.getBoundingClientRect().height,\r\n                    top = row.getBoundingClientRect().y - row.parentElement.getBoundingClientRect().y\r\n                  this.e.parentElement.scroll({\r\n                    top: h > this.e.scrollHeight - top ? this.e.parentElement.scrollHeight : top,\r\n                    behavior: site.settings.table_scroll_behavior || 'smooth',\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          }.bind(o)\r\n          o.revert = function (e) {\r\n            if (e.features && e.features.id in this.rows) {\r\n              this.rows[e.features.id].classList.remove('highlighted')\r\n            }\r\n          }.bind(o)\r\n          o.createHeader = function (v) {\r\n            const dataset = this.parsed.dataset,\r\n              time = site.data.meta.times[dataset],\r\n              tr = this.parts.head.firstElementChild,\r\n              range = this.parsed.variable.time_range[dataset],\r\n              start = range[0],\r\n              end = range[1] + 1,\r\n              ns = this.parsed.summary.n\r\n            this.parsed.time_index = {}\r\n            tr.innerHTML = ''\r\n            tr.appendChild(document.createElement('th'))\r\n            tr.lastElementChild.appendChild(document.createElement('span'))\r\n            tr.firstElementChild.lastElementChild.innerText = 'Name'\r\n            for (let i = start, nshowing = 0; i < end; i++) {\r\n              if (v.times[i] && (site.settings.show_empty_times || ns[i - start])) {\r\n                this.parsed.time_index[time.value[i]] = nshowing++\r\n                tr.appendChild(document.createElement('th'))\r\n                tr.lastElementChild.appendChild(document.createElement('span'))\r\n                tr.lastElementChild.lastElementChild.innerText = time.value[i]\r\n              }\r\n            }\r\n          }.bind(o)\r\n          o.appendRows = function (v) {\r\n            const es = this.parsed.order,\r\n              variable = this.parsed.variable,\r\n              times = site.data.meta.times[this.parsed.dataset].value,\r\n              range = variable.time_range[this.parsed.dataset],\r\n              start = range[0],\r\n              dn = range[1] - start + 1,\r\n              selection = v.selection.all\r\n            this.current_variable = variable.code + this.parsed.dataset\r\n            this.parts.body.innerHTML = ''\r\n            for (let n = es.length; n--; ) {\r\n              const id = es[n][0]\r\n              if (id in selection) {\r\n                const e = site.data.entities[id],\r\n                  d = e.data[variable.code],\r\n                  tr = document.createElement('tr')\r\n                this.rows[id] = tr\r\n                tr.setAttribute('data-entityId', id)\r\n                let td = document.createElement('td')\r\n                td.innerText = e.features.name\r\n                tr.appendChild(td)\r\n                if (1 === dn) {\r\n                  tr.appendChild((td = document.createElement('td')))\r\n                  td.innerText = site.data.format_value(d)\r\n                  td.setAttribute('data-entityId', id)\r\n                  td.classList.add('highlighted')\r\n                } else {\r\n                  for (let i = 0; i < dn; i++) {\r\n                    if (v.times[i + start] && times[i + start] in this.parsed.time_index) {\r\n                      tr.appendChild((td = document.createElement('td')))\r\n                      td.innerText = site.data.format_value(d[i])\r\n                      if (i === this.parsed.time) td.classList.add('highlighted')\r\n                    }\r\n                  }\r\n                }\r\n                this.parts.body.appendChild(tr)\r\n              }\r\n            }\r\n            if (\r\n              site.settings.table_autoscroll &&\r\n              this.parts.head.firstElementChild.childElementCount > 2 &&\r\n              this.parts.head.firstElementChild.childElementCount > this.parsed.time + 1\r\n            ) {\r\n              const w = this.e.parentElement.getBoundingClientRect().width,\r\n                col = this.parts.head.firstElementChild.children[this.parsed.time + 1].getBoundingClientRect()\r\n              this.e.parentElement.scroll({\r\n                left: col.x - this.e.getBoundingClientRect().x + col.width + 16 - w,\r\n                behavior: site.settings.table_scroll_behavior || 'smooth',\r\n              })\r\n            }\r\n          }.bind(o)\r\n          if (o.view) {\r\n            add_dependency(o.view, {type: 'update', id: o.id})\r\n            add_dependency(o.view + '_filter', {type: 'update', id: o.id})\r\n            add_dependency(_u[o.view].time_agg, {type: 'update', id: o.id})\r\n          } else o.view = defaults.dataview\r\n          o.update()\r\n        },\r\n        update: async function (pass) {\r\n          if (this.queue > 0) clearTimeout(this.queue)\r\n          this.queue = -1\r\n          if (!pass) {\r\n            if (!this.tab || this.tab.classList.contains('show')) this.queue = setTimeout(() => this.update(true), 50)\r\n          } else {\r\n            let vn =\r\n              this.options.variable_source && valueOf(this.options.variable_source).replace(patterns.all_periods, '\\\\.')\r\n            const v = _u[this.view],\r\n              d = v.get.dataset(),\r\n              time = valueOf(v.time_agg),\r\n              state =\r\n                d + v.value() + v.get.time_filters() + site.settings.digits + vn + time + site.settings.show_empty_times\r\n            if (!site.data.inited[d]) return void 0\r\n            if (state !== this.state) {\r\n              this.state = state\r\n              Object.keys(this.reference_options).forEach(k => (this.options[k] = valueOf(this.reference_options[k])))\r\n              const variable = await site.data.get_variable(vn, this.view)\r\n              this.parsed.dataset = d\r\n              this.parsed.color = vn\r\n              this.parsed.variable = variable\r\n              this.parsed.time_range = variable.time_range[d]\r\n              this.parsed.time =\r\n                ('number' === typeof time ? time - site.data.meta.times[d].range[0] : 0) - this.parsed.time_range[0]\r\n              this.parsed.summary = variable.views[this.view].summaries[d]\r\n              this.parsed.order = variable.views[this.view].order[d][this.parsed.time]\r\n              this.createHeader(v)\r\n              this.appendRows(v)\r\n            }\r\n          }\r\n        },\r\n        mouseover: function (e) {\r\n          const row = 'TD' === e.target.tagName ? e.target.parentElement : e.target,\r\n            id = row.getAttribute('data-entityId')\r\n          if (id) {\r\n            row.classList.add('highlighted')\r\n            update_subs(this.id, 'show', site.data.entities[id])\r\n          }\r\n        },\r\n        mouseout: function (e) {\r\n          const row = 'TD' === e.target.tagName ? e.target.parentElement : e.target,\r\n            id = row.getAttribute('data-entityId')\r\n          if (id) {\r\n            row.classList.remove('highlighted')\r\n            update_subs(this.id, 'revert', site.data.entities[id])\r\n          }\r\n        },\r\n        click: function (e) {\r\n          const row = 'TD' === e.target.tagName ? e.target.parentElement : e.target,\r\n            id = row.getAttribute('data-entityId')\r\n          if (this.clickto && id) this.clickto.set(id)\r\n        },\r\n      },\r\n      legend: {\r\n        init: function (o) {\r\n          add_dependency(o.view, {type: 'update', id: o.id})\r\n          const view = _u[o.view]\r\n          if (view.time_agg in _u) add_dependency(view.time_agg, {type: 'update', id: o.id})\r\n          if (!o.palette) {\r\n            if (view.palette) {\r\n              o.palette = view.palette\r\n              if (view.palette in _u) add_dependency(view.palette, {type: 'update', id: o.id})\r\n            } else {\r\n              o.palette = 'settings.palette' in _u ? 'settings.palette' : site.settings.palette\r\n            }\r\n          }\r\n          o.variable = o.e.getAttribute('data-variable')\r\n          if (o.variable) {\r\n            if (o.variable in _u) add_dependency(o.variable, {type: 'update', id: o.id})\r\n          } else if (view.y in _u) add_dependency(view.y, {type: 'update', id: o.id})\r\n          if (o.palette in _u) {\r\n            const palette = _u[o.palette]\r\n            if (palette.e) {\r\n              palette.e.addEventListener('change', o.update)\r\n            }\r\n          }\r\n          o.parsed = {summary: {}, order: [], selection: {}, time: 0, color: '', rank: false}\r\n          o.state = ''\r\n          o.queue = {\r\n            lock: false,\r\n            cooldown: -1,\r\n            trigger: function () {\r\n              this.mouseover(this.queue.e)\r\n            }.bind(o),\r\n          }\r\n          o.queue.reset = function () {\r\n            this.lock = false\r\n          }.bind(o.queue)\r\n          o.parts = {\r\n            ticks: o.e.querySelector('.legend-ticks'),\r\n            scale: o.e.querySelector('.legend-scale'),\r\n            summary: o.e.querySelector('.legend-summary'),\r\n          }\r\n          o.parts.ticks.setAttribute('data-of', o.id)\r\n          o.parts.scale.setAttribute('data-of', o.id)\r\n          o.parts.summary.setAttribute('data-of', o.id)\r\n          o.mouseover = elements.legend.mouseover.bind(o)\r\n          o.e.addEventListener('mousemove', o.mouseover)\r\n          o.e.addEventListener('mouseout', elements.legend.mouseout.bind(o))\r\n          o.e.addEventListener('click', elements.legend.click.bind(o))\r\n          o.click = o.e.getAttribute('data-click')\r\n          if (o.click in _u) o.clickto = _u[o.click]\r\n          o.ticks = {\r\n            center: o.parts.summary.appendChild(document.createElement('div')),\r\n            min: o.parts.summary.appendChild(document.createElement('div')),\r\n            max: o.parts.summary.appendChild(document.createElement('div')),\r\n            entity: o.parts.ticks.appendChild(document.createElement('div')),\r\n          }\r\n          Object.keys(o.ticks).forEach(t => {\r\n            o.ticks[t].setAttribute('data-of', o.id)\r\n            o.ticks[t].className = 'legend-tick'\r\n            o.ticks[t].appendChild((e = document.createElement('div')))\r\n            e.setAttribute('data-of', o.id)\r\n            e.appendChild(document.createElement('p'))\r\n            e.lastElementChild.setAttribute('data-of', o.id)\r\n            if ('m' !== t.substring(0, 1)) {\r\n              e.appendChild(document.createElement('p'))\r\n              e.lastElementChild.setAttribute('data-of', o.id)\r\n              e.appendChild(document.createElement('p'))\r\n              e.lastElementChild.setAttribute('data-of', o.id)\r\n              if ('entity' === t) {\r\n                o.ticks[t].firstElementChild.lastElementChild.classList.add('entity')\r\n              } else {\r\n                o.ticks[t].firstElementChild.firstElementChild.classList.add('summary')\r\n              }\r\n            }\r\n          })\r\n          o.ticks.entity.firstElementChild.classList.add('hidden')\r\n          o.ticks.max.className = 'legend-tick-end max'\r\n          o.ticks.min.className = 'legend-tick-end min'\r\n          o.ticks.center.style.left = '50%'\r\n          o.show = function (e, c) {\r\n            if (e && 'parsed' in c && e.features.name) {\r\n              const view = _u[this.view],\r\n                summary = c.parsed.summary,\r\n                string = summary && 'string' === summary.type,\r\n                min = summary && !string ? summary.min[c.parsed.time] : 0,\r\n                range = summary ? (string ? summary.levels.length - min : summary.range[c.parsed.time]) : 1,\r\n                n = summary.n[c.parsed.time],\r\n                subset = n === view.n_selected.dataset ? 'rank' : 'subset_rank',\r\n                es = site.data.entities[e.features.id].views[this.view],\r\n                value = e.get_value(c.parsed.color, c.parsed.time),\r\n                p =\r\n                  ((string ? value in summary.level_ids : 'number' === typeof value)\r\n                    ? site.settings.color_by_order\r\n                      ? NaN\r\n                      : Math.max(\r\n                          0,\r\n                          Math.min(1, range ? ((string ? summary.level_ids[value] : value) - min) / range : 0.5)\r\n                        )\r\n                    : NaN) * 100,\r\n                container = this.ticks.entity,\r\n                t = container.firstElementChild.children[1]\r\n              if (isFinite(p)) {\r\n                t.parentElement.classList.remove('hidden')\r\n                t.innerText = site.data.format_value(value, this.integer)\r\n                container.style.left = p + '%'\r\n                container.firstElementChild.firstElementChild.innerText =\r\n                  (p > 96 || p < 4) && e.features.name.length > 13\r\n                    ? e.features.name.substring(0, 12) + '…'\r\n                    : e.features.name\r\n              } else if (site.settings.color_by_order && c.parsed.color in es[subset]) {\r\n                const i = es[subset][c.parsed.color][c.parsed.time],\r\n                  po = n > 1 ? (i / (n - 1)) * 100 : 0\r\n                container.firstElementChild.firstElementChild.innerText =\r\n                  i > -1 && (po > 96 || po < 4) && e.features.name.length > 13\r\n                    ? e.features.name.substring(0, 12) + '…'\r\n                    : e.features.name\r\n                if (i > -1) {\r\n                  t.parentElement.classList.remove('hidden')\r\n                  t.innerText = '# ' + (n - i)\r\n                  container.style.left = po + '%'\r\n                }\r\n              }\r\n              container.style.marginLeft = -container.getBoundingClientRect().width / 2 + 'px'\r\n            }\r\n          }\r\n          o.revert = function () {\r\n            this.ticks.entity.firstElementChild.classList.add('hidden')\r\n          }\r\n          o.update()\r\n        },\r\n        update: async function () {\r\n          const view = _u[this.view],\r\n            variable = valueOf(this.variable || view.y),\r\n            d = view.get.dataset(),\r\n            var_info = await site.data.get_variable(variable, this.view),\r\n            time = valueOf(view.time_agg)\r\n          if (null !== time && view.valid && var_info && this.view in var_info.views) {\r\n            const y =\r\n                ('number' === typeof time ? time - site.data.meta.times[d].range[0] : 0) - var_info.time_range[d][0],\r\n              summary = var_info.views[this.view].summaries[d],\r\n              ep = valueOf(this.palette).toLowerCase(),\r\n              pn = ep in palettes ? ep : site.settings.palette in palettes ? site.settings.palette : defaults.palette,\r\n              p = palettes[pn].colors,\r\n              s = this.parts.scale,\r\n              ticks = this.ticks\r\n            this.parsed.summary = summary\r\n            this.parsed.order = var_info.views[this.view].order[d][y]\r\n            this.parsed.time = y\r\n            this.parsed.color = variable\r\n            if (summary && y < summary.n.length) {\r\n              this.integer =\r\n                site.data.variable_info[variable] && site.data.variable_info[variable].type\r\n                  ? patterns.int_types.test(site.data.variable_info[variable].type)\r\n                  : true\r\n              const refresh = site.settings.color_by_order !== this.parsed.rank,\r\n                bins = s.querySelectorAll('span'),\r\n                odd = palettes[pn].odd,\r\n                remake =\r\n                  'discrete' === palettes[pn].type\r\n                    ? p.length !== bins.length - odd\r\n                    : !s.firstElementChild || 'SPAN' !== s.firstElementChild.tagName\r\n              if (pn + site.settings.color_scale_center !== this.current_palette || refresh) {\r\n                this.current_palette = pn + site.settings.color_scale_center\r\n                this.parsed.rank = site.settings.color_by_order\r\n                if (remake) s.innerHTML = ''\r\n                if ('discrete' === palettes[pn].type) {\r\n                  let i = 0,\r\n                    n = Math.ceil(p.length / 2),\r\n                    e\r\n                  if (remake) {\r\n                    s.appendChild((e = document.createElement('div')))\r\n                    e.dataset.of = this.id\r\n                    e.style.left = 0\r\n                    const prop = (1 / (n - odd / 2)) * 100 + '%'\r\n                    for (; i < n; i++) {\r\n                      e.appendChild(document.createElement('span'))\r\n                      e.lastElementChild.dataset.of = this.id\r\n                      e.lastElementChild.style.backgroundColor = p[i]\r\n                      e.lastElementChild.style.width = prop\r\n                    }\r\n                    if (odd) e.lastElementChild.style.width = ((1 / (n - odd / 2)) * 100) / 2 + '%'\r\n                    s.appendChild((e = document.createElement('div')))\r\n                    e.dataset.of = this.id\r\n                    e.style.right = 0\r\n                    for (i = Math.floor(p.length / 2), n = p.length; i < n; i++) {\r\n                      e.appendChild(document.createElement('span'))\r\n                      e.lastElementChild.dataset.of = this.id\r\n                      e.lastElementChild.style.backgroundColor = p[i]\r\n                      e.lastElementChild.style.width = prop\r\n                    }\r\n                    if (odd) e.firstElementChild.style.width = ((1 / (n - odd / 2)) * 100) / 2 + '%'\r\n                  } else {\r\n                    for (; i < n; i++) {\r\n                      bins[i].style.backgroundColor = p[i]\r\n                    }\r\n                    for (i = Math.floor(p.length / 2), n = p.length; i < n; i++) {\r\n                      bins[i + odd].style.backgroundColor = p[i]\r\n                    }\r\n                  }\r\n                } else {\r\n                  if (remake) {\r\n                    s.appendChild(document.createElement('span'))\r\n                    s.appendChild(document.createElement('span'))\r\n                  }\r\n                  s.firstElementChild.style.background =\r\n                    'linear-gradient(0.25turn, rgb(' +\r\n                    p[2][0][0] +\r\n                    ', ' +\r\n                    p[2][0][1] +\r\n                    ', ' +\r\n                    p[2][0][2] +\r\n                    '), rgb(' +\r\n                    p[1][0] +\r\n                    ', ' +\r\n                    p[1][1] +\r\n                    ', ' +\r\n                    p[1][2] +\r\n                    '))'\r\n                  s.lastElementChild.style.background =\r\n                    'linear-gradient(0.25turn, rgb(' +\r\n                    p[1][0] +\r\n                    ', ' +\r\n                    p[1][1] +\r\n                    ', ' +\r\n                    p[1][2] +\r\n                    '), rgb(' +\r\n                    p[0][0][0] +\r\n                    ', ' +\r\n                    p[0][0][1] +\r\n                    ', ' +\r\n                    p[0][0][2] +\r\n                    '))'\r\n                }\r\n              }\r\n              if ('string' === var_info.type) {\r\n                ticks.center.classList.remove('hidden')\r\n                ticks.min.firstElementChild.firstElementChild.innerText = var_info.levels[0]\r\n                ticks.max.firstElementChild.firstElementChild.innerText = var_info.levels[var_info.levels.length - 1]\r\n              } else if (site.settings.color_by_order) {\r\n                ticks.center.classList.add('hidden')\r\n                ticks.min.firstElementChild.firstElementChild.innerText = '# ' + (summary.n[y] ? summary.n[y] : 0)\r\n                ticks.max.firstElementChild.firstElementChild.innerText = '# ' + (summary.n[y] ? 1 : 0)\r\n              } else {\r\n                const state =\r\n                  '' +\r\n                  summary.n[y] +\r\n                  summary.min[y] +\r\n                  summary.max[y] +\r\n                  site.settings.digits +\r\n                  site.settings.color_scale_center +\r\n                  site.settings.summary_selection\r\n                if (remake || refresh || state !== this.state) {\r\n                  this.state = state\r\n                  ticks.center.classList.remove('hidden')\r\n                  ticks.min.firstElementChild.firstElementChild.innerText = summary.n[y]\r\n                    ? isFinite(summary.min[y])\r\n                      ? site.data.format_value(summary.min[y], this.integer)\r\n                      : NaN\r\n                    : NaN\r\n                  ticks.max.firstElementChild.firstElementChild.innerText = summary.n[y]\r\n                    ? isFinite(summary.max[y])\r\n                      ? site.data.format_value(summary.max[y], this.integer)\r\n                      : NaN\r\n                    : NaN\r\n                  if ('none' === site.settings.color_scale_center) {\r\n                    ticks.center.firstElementChild.lastElementChild.innerText =\r\n                      summary_levels[site.settings.summary_selection] + ' median'\r\n                    ticks.center.firstElementChild.children[1].innerText = site.data.format_value(summary.median[y])\r\n                    ticks.center.style.left = summary.norm_median[y] * 100 + '%'\r\n                  } else {\r\n                    ticks.center.firstElementChild.lastElementChild.innerText =\r\n                      summary_levels[site.settings.summary_selection] + ' ' + site.settings.color_scale_center\r\n                    ticks.center.firstElementChild.children[1].innerText = site.data.format_value(\r\n                      summary[site.settings.color_scale_center][y]\r\n                    )\r\n                    ticks.center.style.left = summary['norm_' + site.settings.color_scale_center][y] * 100 + '%'\r\n                  }\r\n                  ticks.center.style.marginLeft = -ticks.center.getBoundingClientRect().width / 2 + 'px'\r\n                }\r\n              }\r\n              if (site.settings.color_by_order || 'none' === site.settings.color_scale_center) {\r\n                s.firstElementChild.style.width = '50%'\r\n                s.lastElementChild.style.width = '50%'\r\n              } else {\r\n                s.firstElementChild.style.width = summary['norm_' + site.settings.color_scale_center][y] * 100 + '%'\r\n                s.lastElementChild.style.width =\r\n                  100 - summary['norm_' + site.settings.color_scale_center][y] * 100 + '%'\r\n              }\r\n            }\r\n          }\r\n        },\r\n        mouseover: function (e) {\r\n          if (!this.queue.lock) {\r\n            this.queue.lock = true\r\n            const s = this.parts.scale.getBoundingClientRect(),\r\n              p = (Math.max(s.x, Math.min(s.x + s.width, e.clientX)) - s.x) / s.width\r\n            let entity = false\r\n            if (site.settings.color_by_order) {\r\n              if (this.parsed.order && this.parsed.order.length)\r\n                entity =\r\n                  site.data.entities[\r\n                    this.parsed.order[\r\n                      Math.max(\r\n                        this.parsed.summary.missing[this.parsed.time],\r\n                        Math.min(this.parsed.order.length - 1, Math.floor((this.parsed.order.length - 1) * p))\r\n                      )\r\n                    ][0]\r\n                  ]\r\n            } else if ('min' in this.parsed.summary) {\r\n              const min = this.parsed.summary.min[this.parsed.time],\r\n                max = this.parsed.summary.max[this.parsed.time],\r\n                tv = min + p * (max - min)\r\n              let i, n\r\n              if (this.parsed.order && this.parsed.order.length) {\r\n                n = this.parsed.summary.missing[this.parsed.time]\r\n                if (n < this.parsed.order.length) {\r\n                  if (1 === this.parsed.order.length || !p) {\r\n                    entity = site.data.entities[this.parsed.order[n][0]]\r\n                  } else {\r\n                    for (i = this.parsed.order.length - 2; i >= n; --i) {\r\n                      if ((this.parsed.order[i][1] + this.parsed.order[i + 1][1]) / 2 <= tv) break\r\n                    }\r\n                    i++\r\n                    entity = site.data.entities[this.parsed.order[i][0]]\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            if (entity) {\r\n              this.show(entity, this)\r\n              if (!this.entity || entity.features.id !== this.entity.features.id) {\r\n                if (!this.entity) {\r\n                  this.entity = entity\r\n                } else update_subs(this.id, 'revert', this.entity)\r\n                update_subs(this.id, 'show', entity)\r\n                this.entity = entity\r\n              }\r\n            }\r\n            setTimeout(this.queue.reset, 200)\r\n          } else {\r\n            if (this.queue.cooldown > 0) clearTimeout(this.queue.cooldown)\r\n            this.queue.e = e\r\n            this.queue.cooldown = setTimeout(this.queue.trigger, 100)\r\n          }\r\n        },\r\n        mouseout: function (e) {\r\n          if (e.relatedTarget && this.id !== e.relatedTarget.getAttribute('data-of')) {\r\n            if (this.queue.cooldown > 0) clearTimeout(this.queue.cooldown)\r\n            this.queue.cooldown = -1\r\n            this.revert()\r\n            if (this.entity) {\r\n              update_subs(this.id, 'revert', this.entity)\r\n              this.entity = false\r\n            }\r\n          }\r\n        },\r\n        click: function () {\r\n          if (this.clickto && this.entity) {\r\n            this.revert()\r\n            this.clickto.set(this.entity.features.id)\r\n          }\r\n        },\r\n      },\r\n      credits: {\r\n        init: function (o) {\r\n          const s = site.credit_output && site.credit_output[o.id]\r\n          o.exclude = (s && s.exclude) || []\r\n          o.add = (s && s.add) || {}\r\n          o.e.appendChild(document.createElement('ul'))\r\n          o.credits = {...site.credits, ...o.add}\r\n          Object.keys(o.credits).forEach(k => {\r\n            if (-1 === o.exclude.indexOf(k)) {\r\n              const c = o.credits[k]\r\n              let e\r\n              o.e.lastElementChild.appendChild((e = document.createElement('li')))\r\n              if ('url' in c) {\r\n                e.appendChild((e = document.createElement('a')))\r\n                e.href = c.url\r\n                e.target = '_blank'\r\n                e.rel = 'noreferrer'\r\n              }\r\n              e.innerText = c.name\r\n              if ('version' in c) {\r\n                e.appendChild(document.createElement('span'))\r\n                e.lastElementChild.className = 'version-tag'\r\n                e.lastElementChild.innerText = c.version\r\n              }\r\n              if ('description' in c) {\r\n                e.parentElement.appendChild(document.createElement('p'))\r\n                e.parentElement.lastElementChild.innerText = c.description\r\n              }\r\n            }\r\n          })\r\n        },\r\n      },\r\n      init_input: function (e) {\r\n        const o = {\r\n          type: e.getAttribute('data-autoType'),\r\n          source: void 0,\r\n          value: function () {\r\n            const v = valueOf(this.source)\r\n            return 'undefined' === typeof v ? valueOf(this.default) : v\r\n          },\r\n          default: e.getAttribute('data-default'),\r\n          optionSource: e.getAttribute('data-optionSource'),\r\n          depends: e.getAttribute('data-depends'),\r\n          variable: e.getAttribute('data-variable'),\r\n          dataset: e.getAttribute('data-dataset'),\r\n          view: e.getAttribute('data-view'),\r\n          id: e.id || e.optionSource || 'ui' + page.elementCount++,\r\n          note: e.getAttribute('aria-description') || '',\r\n          current_index: -1,\r\n          previous: '',\r\n          e: e,\r\n          values: [],\r\n          display: [],\r\n          data: [],\r\n          input: true,\r\n        }\r\n        o.settings = o.type in site && o.id in site[o.type] ? site[o.type][o.id] : {}\r\n        o.wrapper = o.e.parentElement.classList.contains('wrapper')\r\n          ? o.e.parentElement\r\n          : o.e.parentElement.parentElement\r\n        if (o.wrapper) {\r\n          if (o.note) o.wrapper.classList.add('has-note')\r\n          o.wrapper.setAttribute('data-of', o.id)\r\n          ;['div', 'span', 'label', 'fieldset', 'legend', 'input', 'button'].forEach(type => {\r\n            const c = o.wrapper.querySelectorAll(type)\r\n            if (c.length) c.forEach(ci => ci.setAttribute('data-of', o.id))\r\n          })\r\n        }\r\n        if (o.note) {\r\n          o.wrapper.addEventListener('mouseover', tooltip_trigger.bind(o))\r\n          const p = 'DIV' !== o.e.tagName ? o.e : o.e.querySelector('input')\r\n          if (p) {\r\n            p.addEventListener('focus', tooltip_trigger.bind(o))\r\n            p.addEventListener('blur', tooltip_clear)\r\n          }\r\n        }\r\n        if (patterns.number.test(o.default)) o.default = Number(o.default)\r\n        if (o.type in elements) {\r\n          const p = elements[o.type]\r\n          if (p.setter) {\r\n            o.set = p.setter.bind(o)\r\n            o.reset = function () {\r\n              this.set(valueOf(this.default))\r\n            }.bind(o)\r\n          }\r\n          if (p.retrieve) o.get = p.retrieve.bind(o)\r\n          if (p.adder) o.add = p.adder.bind(o)\r\n          if (p.listener) o.listen = p.listener.bind(o)\r\n          if (p.init) p.init(o)\r\n          if (!o.options) o.options = o.e.querySelectorAll('select' === o.type ? 'option' : 'input')\r\n          if (o.optionSource && patterns.ids.test(o.optionSource)) {\r\n            o.loader = function () {\r\n              if (!this.e.classList.contains('locked')) {\r\n                this.deferred = false\r\n                this.e.removeEventListener('click', this.loader)\r\n                request_queue(this.id)\r\n              }\r\n            }.bind(o)\r\n            o.e.addEventListener('click', o.loader)\r\n            o.deferred = true\r\n          } else if (\r\n            'number' === typeof o.default &&\r\n            o.default > -1 &&\r\n            o.options &&\r\n            o.options.length &&\r\n            o.default < o.options.length\r\n          )\r\n            o.default = o.options[o.default].value || o.options[o.default].dataset.value\r\n          _u[o.id] = o\r\n        }\r\n      },\r\n      init_output: function (e, i) {\r\n        const o = {\r\n          type: e.getAttribute('data-autoType'),\r\n          view: e.getAttribute('data-view') || defaults.dataview,\r\n          id: e.id || 'out' + i,\r\n          note: e.getAttribute('aria-description') || '',\r\n          reference_options: {},\r\n          e: e,\r\n        }\r\n        if (o.note) o.e.addEventListener('mouseover', tooltip_trigger.bind(o))\r\n        o.options = o.type in site ? site[o.type][o.id] : void 0\r\n        if (o.options && o.options.dataview) o.view = o.options.dataview\r\n        if (o.type in elements && 'update' in elements[o.type]) o.update = elements[o.type].update.bind(o)\r\n        if (o.options) {\r\n          if ('options' in o.options) o.options = o.options.options\r\n          Object.keys(o.options).forEach(k => {\r\n            if (o.options[k] in _u) o.reference_options[k] = o.options[k]\r\n          })\r\n          if ('subto' in o.options) {\r\n            if ('string' === typeof o.options.subto) o.options.subto = [o.options.subto]\r\n            if (Array.isArray(o.options.subto)) o.options.subto.forEach(v => add_subs(v, o))\r\n          }\r\n        }\r\n        _u[o.id] = o\r\n        if (o.type in elements && 'init' in elements[o.type]) {\r\n          if (!o.view || _u[o.view].parsed.dataset in site.data.inited) {\r\n            elements[o.type].init(o)\r\n          } else {\r\n            site.data.data_queue[_u[o.view].parsed.dataset][o.id] = elements[o.type].init.bind(null, o)\r\n          }\r\n        }\r\n      },\r\n    },\r\n    storage = {\r\n      name: window.location.pathname || 'default',\r\n      perm: window.localStorage || {\r\n        setItem: function () {},\r\n        getItem: function () {},\r\n        removeItem: function () {},\r\n      },\r\n      set: function (opt, value) {\r\n        const s = JSON.parse(this.perm.getItem(this.name)) || {}\r\n        s[opt] = value\r\n        this.perm.setItem(this.name, JSON.stringify(s))\r\n      },\r\n      get: function (opt) {\r\n        const s = JSON.parse(this.perm.getItem(this.name))\r\n        return s ? (opt ? s[opt] : s) : undefined\r\n      },\r\n    },\r\n    keymap = {\r\n      Enter: 'select',\r\n      NumpadEnter: 'select',\r\n      ArrowUp: 'move',\r\n      Home: 'move',\r\n      ArrowDown: 'move',\r\n      End: 'move',\r\n      Escape: 'close',\r\n      Tab: 'close',\r\n    },\r\n    filter_components = {\r\n      Time: ['first', 'selected', 'last'],\r\n      summary: ['missing', 'min', 'q1', 'mean', 'median', 'q3', 'max'],\r\n    },\r\n    time_funs = {\r\n      number: function (v) {\r\n        return this - v.range[0]\r\n      },\r\n      first: function (v) {\r\n        return 0\r\n      },\r\n      selected: function (v, p) {\r\n        return p.time_agg - v.range[0]\r\n      },\r\n      last: function (v) {\r\n        return v.range[1] - v.range[0]\r\n      },\r\n    },\r\n    page = {\r\n      load_screen: document.getElementById('load_screen'),\r\n      wrap: document.getElementById('site_wrap'),\r\n      navbar: document.querySelector('.navbar'),\r\n      content: document.querySelector('.content'),\r\n      overlay: document.createElement('div'),\r\n      menus: document.getElementsByClassName('menu-wrapper'),\r\n      panels: document.getElementsByClassName('panel'),\r\n      elementCount: 0,\r\n    },\r\n    queue = {_timeout: 0},\r\n    meta = {\r\n      retain_state: true,\r\n    },\r\n    subs = {},\r\n    rule_conditions = {},\r\n    keys = {},\r\n    _u = {\r\n      _entity_filter: {\r\n        id: '_entity_filter',\r\n        registered: {},\r\n        entities: new Map(),\r\n        selected: [],\r\n        select_ids: {},\r\n        value: function (q, agg) {\r\n          return Object.keys(this.select_ids).join(',')\r\n        },\r\n      },\r\n      _base_filter: {\r\n        id: '_base_filter',\r\n        c: new Map(),\r\n        value: function (q, agg) {\r\n          const as_state = !q\r\n          if (as_state) q = []\r\n          _u._base_filter.c.forEach(f => {\r\n            const component =\r\n              'selected' === f.component\r\n                ? site.data.meta.overall.value['undefined' === typeof agg ? _u[defaults.dataview].parsed.time_agg : agg]\r\n                : f.time_component\r\n                ? site.data.meta.overall.value[f.component]\r\n                : f.component\r\n            if (f.value) q.push(f.variable + '[' + component + ']' + f.operator + f.value + (as_state ? f.active : ''))\r\n          })\r\n          return q.join('&')\r\n        },\r\n      },\r\n    },\r\n    _c = {},\r\n    tree = {}\r\n\r\n  page.overlay.className = 'content-overlay'\r\n  document.body.appendChild(page.overlay)\r\n  document.body.className = storage.get('theme_dark') || site.settings.theme_dark ? 'dark-theme' : 'light-theme'\r\n  if (page.content) {\r\n    let i = page.menus.length,\r\n      h = page.navbar ? page.navbar.getBoundingClientRect().height : 0\r\n    for (; i--; )\r\n      if (page.menus[i].classList.contains('menu-top')) {\r\n        h = page.menus[i].getBoundingClientRect().height\r\n        break\r\n      }\r\n    page.content.style.top = h + 'px'\r\n  }\r\n  if (!window.dataLayer) window.dataLayer = []\r\n\r\n  function pal(value, which, summary, index, rank, total) {\r\n    if (isNaN(value)) return defaults.missing\r\n    const centered = 'none' !== site.settings.color_scale_center && !site.settings.color_by_order,\r\n      fixed = 'discrete' === palettes[which].type,\r\n      colors = palettes[which].colors,\r\n      odd = palettes[which].odd,\r\n      string = 'string' === summary.type,\r\n      min = !string ? summary.min[index] : 0,\r\n      range = string ? summary.levels.length - min : summary.range[index],\r\n      center_source =\r\n        'none' === site.settings.color_scale_center || patterns.median.test(site.settings.color_scale_center)\r\n          ? 'median'\r\n          : 'mean',\r\n      center = site.settings.color_by_order\r\n        ? centered\r\n          ? summary['break_' + center_source][index] / total\r\n          : 0.5\r\n        : isNaN(summary['norm_' + center_source][index])\r\n        ? 0.5\r\n        : summary['norm_' + center_source][index],\r\n      r = fixed\r\n        ? centered && !site.settings.color_by_order\r\n          ? Math.ceil(colors.length / 2) - odd / 2\r\n          : colors.length\r\n        : 1,\r\n      p = site.settings.color_by_order\r\n        ? rank / total\r\n        : range\r\n        ? ((string ? summary.level_ids[value] : value) - min) / range\r\n        : 0.5,\r\n      upper = p > (centered ? center : 0.5)\r\n    let v = centered\r\n      ? range\r\n        ? upper\r\n          ? (p - center - summary['upper_' + center_source + '_min'][index]) /\r\n            summary['upper_' + center_source + '_range'][index]\r\n          : (p + center - summary['lower_' + center_source + '_min'][index]) /\r\n            summary['lower_' + center_source + '_range'][index]\r\n        : 1\r\n      : p\r\n    if (!fixed) {\r\n      v = Math.max(0, Math.min(1, v))\r\n      if (upper) v = 1 - v\r\n      if (!centered) v *= 2\r\n    }\r\n    return (string ? value in summary.level_ids : 'number' === typeof value)\r\n      ? fixed\r\n        ? colors[Math.max(0, Math.min(colors.length - 1, Math.floor(centered ? (upper ? r + r * v : r * v) : r * v)))]\r\n        : 'rgb(' +\r\n          (upper\r\n            ? colors[0][0][0] +\r\n              v * colors[0][1][0] +\r\n              ', ' +\r\n              (colors[0][0][1] + v * colors[0][1][1]) +\r\n              ', ' +\r\n              (colors[0][0][2] + v * colors[0][1][2])\r\n            : colors[2][0][0] +\r\n              v * colors[2][1][0] +\r\n              ', ' +\r\n              (colors[2][0][1] + v * colors[2][1][1]) +\r\n              ', ' +\r\n              (colors[2][0][2] + v * colors[2][1][2])) +\r\n          ')'\r\n      : defaults.missing\r\n  }\r\n\r\n  function init_text(o, text) {\r\n    if (!('button' in text)) text.button = {}\r\n    if ('string' === typeof text.text) text.text = [text.text]\r\n    text.parts = document.createElement('span')\r\n    text.text.forEach(k => {\r\n      if (k in text.button) {\r\n        const p = text.button[k]\r\n        text.parts.appendChild(document.createElement('button'))\r\n        text.parts.lastElementChild.type = 'button'\r\n        p.trigger = tooltip_trigger.bind({id: o.id + p.text, note: p.target, wrapper: text.parts.lastElementChild})\r\n        if ('note' === p.type) {\r\n          text.parts.lastElementChild.setAttribute('aria-description', p.target)\r\n          text.parts.lastElementChild.setAttribute('data-of', o.id + p.text)\r\n          text.parts.lastElementChild.className = 'has-note'\r\n          text.parts.lastElementChild.addEventListener('mouseover', p.trigger)\r\n          text.parts.lastElementChild.addEventListener('focus', p.trigger)\r\n          text.parts.lastElementChild.addEventListener('blur', tooltip_clear)\r\n        } else {\r\n          text.parts.lastElementChild.className = 'btn btn-link'\r\n          if (!Array.isArray(p.target)) p.target = [p.target]\r\n          const m = new Map()\r\n          p.target.forEach(t => {\r\n            const u = _u[t]\r\n            if (u && 'function' === typeof u[p.type]) m.set(t, u[p.type])\r\n          })\r\n          if (m.size) {\r\n            text.parts.lastElementChild.setAttribute('aria-label', p.text.join(''))\r\n            text.parts.lastElementChild.addEventListener(\r\n              'click',\r\n              function () {\r\n                this.forEach(f => f())\r\n              }.bind(m)\r\n            )\r\n          }\r\n        }\r\n      } else {\r\n        text.parts.appendChild(document.createElement('span'))\r\n      }\r\n      if (k in _u) o.depends.set(k, {id: k, u: _u[k], parsed: ''})\r\n    })\r\n    if ('condition' in text) {\r\n      for (let i = text.condition.length; i--; ) {\r\n        const c = text.condition[i]\r\n        if (c.id) {\r\n          if ('default' === c.id) {\r\n            c.check = function () {\r\n              return true\r\n            }\r\n          } else {\r\n            o.depends.set(c.id, c)\r\n            c.check = function () {\r\n              return 'default' === this.id || DataHandler.checks[this.type](valueOf(this.id), valueOf(this.value))\r\n            }.bind(c)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function fill_ids_options(u, d, out, onend) {\r\n    if (!(d in site.data.sets)) {\r\n      site.data.data_queue[d][u.id] = function () {\r\n        u.e.removeEventListener('click', u.loader)\r\n        fill_ids_options(u, d, out, onend)\r\n        u.set_current()\r\n        u.current_set = d\r\n        return\r\n      }\r\n      return\r\n    }\r\n    out[d] = {options: [], values: {}, display: {}}\r\n    const current = u.values,\r\n      s = out[d].options,\r\n      values = out[d].values,\r\n      disp = out[d].display,\r\n      combobox = 'combobox' === u.type\r\n    let ck = !u.sensitive && !!u.current_set,\r\n      n = 0\r\n    if (u.settings.group) {\r\n      u.groups = {e: [], by_name: {}}\r\n      if (combobox && u.settings.accordion) {\r\n        u.listbox.classList.add('accordion')\r\n        u.listbox.id = u.id + '-listbox'\r\n      }\r\n    }\r\n    Object.keys(site.data.entities).forEach(k => {\r\n      const entity = site.data.entities[k]\r\n      if (d === entity.group) {\r\n        if (ck && !(k in current)) {\r\n          u.sensitive = true\r\n          ck = false\r\n        }\r\n        if (u.groups) {\r\n          let groups = entity.features[u.settings.group] || ['No Group']\r\n          if (!Array.isArray(groups)) groups = [groups]\r\n          for (let g = groups.length; g--; ) {\r\n            const group = groups[g]\r\n            if (!(group in u.groups.by_name)) {\r\n              const e = document.createElement(combobox ? 'div' : 'optgroup')\r\n              if (combobox) {\r\n                const id = u.id + '_' + group.replace(patterns.seps, '-')\r\n                let ee\r\n                if (u.settings.accordion) {\r\n                  e.setAttribute('data-group', group)\r\n                  e.className = 'combobox-group accordion-item combobox-component'\r\n                  e.appendChild((ee = document.createElement('div')))\r\n                  ee.id = id + '-label'\r\n                  ee.className = 'accordion-header combobox-component'\r\n                  ee.appendChild((ee = document.createElement('button')))\r\n                  ee.innerText = group\r\n                  ee.type = 'button'\r\n                  ee.className = 'accordion-button combobox-component collapsed'\r\n                  ee.setAttribute('data-bs-toggle', 'collapse')\r\n                  ee.setAttribute('data-bs-target', '#' + id)\r\n                  ee.setAttribute('aria-expanded', false)\r\n                  ee.setAttribute('aria-controls', id)\r\n                  e.appendChild((ee = document.createElement('div')))\r\n                  ee.id = id\r\n                  ee.className = 'combobox-component accordion-collapse collapse'\r\n                  ee.setAttribute('aria-labelledby', id + '-label')\r\n                  ee.setAttribute('data-bs-parent', '#' + u.id + '-listbox')\r\n                  ee.appendChild((ee = document.createElement('div')))\r\n                  ee.className = 'accordion-body combobox-component'\r\n                } else {\r\n                  e.className = 'combobox-group combobox-component'\r\n                  e.id = id\r\n                  e.role = 'group'\r\n                  e.setAttribute('aria-labelledby', id + '-label')\r\n                  e.appendChild((ee = document.createElement('div')))\r\n                  ee.appendChild((ee = document.createElement('label')))\r\n                  ee.innerText = group\r\n                  ee.id = id + '-label'\r\n                  ee.for = id\r\n                  ee.className = 'combobox-group-label combobox-component'\r\n                }\r\n              } else {\r\n                e.label = group\r\n              }\r\n              u.groups.by_name[group] = e\r\n              u.groups.e.push(e)\r\n            }\r\n            const o = u.add(k, entity.features.name, true)\r\n            o.setAttribute('data-group', group)\r\n            if (combobox && u.settings.accordion) {\r\n              u.groups.by_name[group].lastElementChild.lastElementChild.appendChild(o)\r\n            } else {\r\n              u.groups.by_name[group].appendChild(o)\r\n            }\r\n          }\r\n        } else {\r\n          s.push(u.add(k, entity.features.name))\r\n          values[k] = n\r\n          disp[entity.features.name] = n++\r\n        }\r\n      }\r\n    })\r\n    if (u.settings.group) {\r\n      n = 0\r\n      Object.keys(u.groups.by_name).forEach(g => {\r\n        u.groups.by_name[g].querySelectorAll(combobox ? '.combobox-option' : 'option').forEach(c => {\r\n          s.push(c)\r\n          values[combobox ? c.dataset.value : c.value] = n\r\n          disp[c.innerText] = n++\r\n        })\r\n      })\r\n    }\r\n    onend && onend()\r\n  }\r\n\r\n  function fill_variables_options(u, d, out) {\r\n    out[d] = {options: [], values: {}, display: {}}\r\n    const current = u.values,\r\n      s = out[d].options,\r\n      values = out[d].values,\r\n      disp = out[d].display,\r\n      combobox = 'combobox' === u.type\r\n    let ck = !u.sensitive && !!u.current_set,\r\n      n = 0\r\n    if (u.settings.group) {\r\n      u.groups = {e: [], by_name: {}}\r\n      if (combobox && u.settings.accordion) {\r\n        u.listbox.classList.add('accordion')\r\n        u.listbox.id = u.id + '-listbox'\r\n      }\r\n    }\r\n    const url_set = site.url_options[u.id]\r\n    let ck_suffix = false\r\n    if (url_set && !(url_set in site.data.variables)) {\r\n      site.url_options[u.id] = url_set.replace(patterns.pre_colon, '')\r\n      if (!(site.url_options[u.id] in site.data.variables)) ck_suffix = true\r\n    }\r\n    site.data.info[d].schema.fields.forEach(m => {\r\n      const v = site.data.variables[m.name]\r\n      if (v && !v.is_time) {\r\n        const l = site.data.format_label(m.name)\r\n        if (ck && !(k in current)) {\r\n          u.sensitive = true\r\n          ck = false\r\n        }\r\n        if (u.groups) {\r\n          let groups = (m.info && m.info[u.settings.group]) || ['No Group']\r\n          if (!Array.isArray(groups)) groups = [groups]\r\n          for (let g = groups.length; g--; ) {\r\n            const group = groups[g]\r\n            if (!(group in u.groups.by_name)) {\r\n              const e = document.createElement(combobox ? 'div' : 'optgroup')\r\n              if (combobox) {\r\n                const id = u.id + '_' + group.replace(patterns.seps, '-')\r\n                let ee\r\n                if (u.settings.accordion) {\r\n                  e.setAttribute('data-group', group)\r\n                  e.className = 'combobox-group accordion-item combobox-component'\r\n                  e.appendChild((ee = document.createElement('div')))\r\n                  ee.id = id + '-label'\r\n                  ee.className = 'accordion-header combobox-component'\r\n                  ee.appendChild((ee = document.createElement('button')))\r\n                  ee.innerText = group\r\n                  ee.type = 'button'\r\n                  ee.className = 'accordion-button combobox-component collapsed'\r\n                  ee.setAttribute('data-bs-toggle', 'collapse')\r\n                  ee.setAttribute('data-bs-target', '#' + id)\r\n                  ee.setAttribute('aria-expanded', false)\r\n                  ee.setAttribute('aria-controls', id)\r\n                  e.appendChild((ee = document.createElement('div')))\r\n                  ee.id = id\r\n                  ee.className = 'combobox-component accordion-collapse collapse'\r\n                  ee.setAttribute('aria-labelledby', id + '-label')\r\n                  ee.setAttribute('data-bs-parent', '#' + u.id + '-listbox')\r\n                  ee.appendChild((ee = document.createElement('div')))\r\n                  ee.className = 'accordion-body combobox-component'\r\n                } else {\r\n                  e.className = 'combobox-group combobox-component'\r\n                  e.role = 'group'\r\n                  e.setAttribute('aria-labelledby', id)\r\n                  e.appendChild((ee = document.createElement('div')))\r\n                  ee.appendChild((ee = document.createElement('label')))\r\n                  ee.innerText = group\r\n                  ee.id = id\r\n                  ee.className = 'combobox-group-label combobox-component'\r\n                }\r\n              } else {\r\n                e.label = group\r\n              }\r\n              u.groups.by_name[group] = e\r\n              u.groups.e.push(e)\r\n            }\r\n            const o = u.add(m.name, l, true, m)\r\n            o.setAttribute('data-group', group)\r\n            if (combobox && u.settings.accordion) {\r\n              u.groups.by_name[group].lastElementChild.lastElementChild.appendChild(o)\r\n            } else {\r\n              u.groups.by_name[group].appendChild(o)\r\n            }\r\n          }\r\n        } else {\r\n          s.push(u.add(m.name, l, true, m))\r\n          s[n].id = u.id + '-option' + n\r\n          values[m.name] = n\r\n          disp[l] = n++\r\n        }\r\n        if (ck_suffix && url_set === m.name.replace(patterns.pre_colon, '')) {\r\n          site.url_options[u.id] = m.name\r\n          ck_suffix = false\r\n        }\r\n      }\r\n    })\r\n    if (u.settings.group) {\r\n      n = 0\r\n      Object.keys(u.groups.by_name).forEach(g => {\r\n        u.groups.by_name[g].querySelectorAll(combobox ? '.combobox-option' : 'option').forEach(c => {\r\n          s.push(c)\r\n          s[n].id = u.id + '-option' + n\r\n          values[combobox ? c.dataset.value : c.value] = n\r\n          disp[(c.firstChild && c.firstChild.textContent) || c.innerText] = n++\r\n        })\r\n      })\r\n    }\r\n    if (!(u.default in site.data.variables)) u.default = defaults.variable\r\n  }\r\n\r\n  function fill_overlay_properties_options(u, source, out) {\r\n    out[source] = {options: [], values: {}, display: {}}\r\n    const current = u.values,\r\n      s = out[source].options,\r\n      values = out[source].values,\r\n      disp = out[source].display,\r\n      combobox = 'combobox' === u.type\r\n    let ck = !u.sensitive && !!u.current_set,\r\n      n = 0\r\n    if (u.settings.group) {\r\n      u.groups = {e: [], by_name: {}}\r\n    }\r\n    Object.keys(site.map._queue[source].property_summaries).forEach(v => {\r\n      const l = site.data.format_label(v)\r\n      if (ck && !(k in current)) {\r\n        u.sensitive = true\r\n        ck = false\r\n      }\r\n      s.push(u.add(v, l))\r\n      s[n].id = u.id + '-option' + n\r\n      values[v] = n\r\n      disp[l] = n++\r\n    })\r\n  }\r\n\r\n  function fill_levels_options(u, d, v, out) {\r\n    const m = site.data.variables[v].info[d],\r\n      t = 'string' === m.type ? 'levels' : 'ids',\r\n      l = m[t]\r\n    if (l) {\r\n      const k = d + v\r\n      out[k] = {options: [], values: {}, display: {}}\r\n      const current = u.values,\r\n        s = out[k].options,\r\n        values = out[k].values,\r\n        disp = out[k].display\r\n      let ck = !u.sensitive && !!u.current_set,\r\n        n = 0\r\n      Object.keys(l).forEach(k => {\r\n        const lk = l[k]\r\n        if (ck && !(k in current)) {\r\n          u.sensitive = true\r\n          ck = false\r\n        }\r\n        s.push(u.add(lk.id, lk.name, true))\r\n        values[lk.id] = n\r\n        disp[lk.name] = n++\r\n      })\r\n    } else if ('ids' === t) {\r\n      site.data.data_queue[d][u.id] = function () {\r\n        return fill_levels_options(u, d, v, out)\r\n      }\r\n    }\r\n  }\r\n\r\n  function toggle_input(u, enable) {\r\n    if (enable && !u.e.classList.contains('locked')) {\r\n      u.e.removeAttribute('disabled')\r\n      u.e.classList.remove('disabled')\r\n      if (u.input_element) u.input_element.removeAttribute('disabled')\r\n    } else {\r\n      u.e.setAttribute('disabled', true)\r\n      u.e.classList.add('disabled')\r\n      if (u.input_element) u.input_element.setAttribute('disabled', true)\r\n    }\r\n  }\r\n\r\n  function sort_tree_children(a, b) {\r\n    return !(a.id in tree) || !(b.id in tree) ? -Infinity : tree[a.id]._n.children - tree[b.id]._n.children\r\n  }\r\n\r\n  function add_dependency(id, o) {\r\n    if (!(id in _c)) _c[id] = []\r\n    if (!o.uid) o.uid = JSON.stringify(o)\r\n    const c = _c[id]\r\n    for (let i = c.length; i--; ) if (o.uid === c[i].uid) return void 0\r\n    c.push(o)\r\n    if (!(id in tree)) tree[id] = {_n: {children: 0, parents: 0}, children: {}, parents: {}}\r\n    if (!(o.id in tree)) tree[o.id] = {_n: {children: 0, parents: 0}, children: {}, parents: {}}\r\n    tree[id].children[o.id] = tree[o.id]\r\n    tree[id]._n.children++\r\n    tree[o.id].parents[id] = tree[id]\r\n    tree[o.id]._n.parents++\r\n    c.sort(sort_tree_children)\r\n    request_queue(id)\r\n  }\r\n\r\n  function add_subs(id, o) {\r\n    if (!(id in subs)) subs[id] = []\r\n    subs[id].push(o)\r\n  }\r\n\r\n  function update_subs(id, fun, e) {\r\n    if (id in subs) {\r\n      for (let i = subs[id].length; i--; ) {\r\n        if (fun in subs[id][i]) subs[id][i][fun](e, _u[id])\r\n      }\r\n    }\r\n  }\r\n\r\n  function update_plot_theme(u) {\r\n    if (u.dark_theme !== site.settings.theme_dark) {\r\n      u.dark_theme = site.settings.theme_dark\r\n      const s = getComputedStyle(document.body)\r\n      if (!('style' in u)) {\r\n        u.style = u.options.layout\r\n        if (!('font' in u.style)) u.style.font = {}\r\n        if (!('modebar' in u.style)) u.style.modebar = {}\r\n        if (!('font' in u.style.xaxis)) u.style.xaxis.font = {}\r\n        if (!('font' in u.style.yaxis)) u.style.yaxis.font = {}\r\n      }\r\n      u.style.paper_bgcolor = s.backgroundColor\r\n      u.style.plot_bgcolor = s.backgroundColor\r\n      u.style.font.color = s.color\r\n      u.style.modebar.bgcolor = s.backgroundColor\r\n      u.style.modebar.color = s.color\r\n      if (u.e._fullLayout.xaxis.showgrid) u.style.xaxis.gridcolor = s.borderColor\r\n      if (u.e._fullLayout.yaxis.showgrid) u.style.yaxis.gridcolor = s.borderColor\r\n      u.style.xaxis.font.color = s.color\r\n      u.style.yaxis.font.color = s.color\r\n      Plotly.relayout(u.e, u.options.layout)\r\n    }\r\n  }\r\n\r\n  function make_data_entry(u, e, rank, total, name, color) {\r\n    if (e.data && u.parsed.x in site.data.variables) {\r\n      const x = site.data.get_value({variable: u.parsed.x, entity: e}),\r\n        y = site.data.get_value({variable: u.parsed.y, entity: e}),\r\n        t = JSON.parse(u.traces[u.base_trace]),\r\n        yr = site.data.variables[u.parsed.y].time_range[u.parsed.dataset],\r\n        xr = site.data.variables[u.parsed.x].time_range[u.parsed.dataset],\r\n        n = Math.min(yr[1], xr[1]) + 1,\r\n        ns = u.parsed.summary.n\r\n      for (let i = Math.max(yr[0], xr[0]); i < n; i++) {\r\n        if (site.settings.show_empty_times || ns[i - u.parsed.y_range[0]]) {\r\n          t.text.push(e.features.name)\r\n          t.x.push(u.parsed.x_range[0] <= i && i <= u.parsed.x_range[1] ? x[i - u.parsed.x_range[0]] : NaN)\r\n          t.y.push(u.parsed.y_range[0] <= i && i <= u.parsed.y_range[1] ? y[i - u.parsed.y_range[0]] : NaN)\r\n        }\r\n      }\r\n      t.type = u.parsed.base_trace\r\n      t.color =\r\n        t.line.color =\r\n        t.marker.color =\r\n        t.textfont.color =\r\n          color ||\r\n          pal(\r\n            e.get_value(u.parsed.color, u.parsed.time),\r\n            u.parsed.palette,\r\n            u.parsed.summary,\r\n            u.parsed.time,\r\n            rank,\r\n            total\r\n          ) ||\r\n          defaults.border\r\n      if ('bar' === t.type) t.marker.line.width = 0\r\n      t.name = name || e.features.name\r\n      t.id = e.features.id\r\n      return t\r\n    }\r\n  }\r\n\r\n  function make_variable_reference(c) {\r\n    if (!Array.isArray(c.author)) c.author = [c.author]\r\n    const e = document.createElement('li'),\r\n      n = c.author.length\r\n    let s = '',\r\n      j = 1 === n ? '' : 2 === n ? ' & ' : ', & '\r\n    for (let i = n; i--; ) {\r\n      const a = c.author[i]\r\n      s =\r\n        (i ? j : '') +\r\n        ('string' === typeof a ? a : a.family) +\r\n        (a.given ? ', ' + a.given.substring(0, 1) + '.' : '') +\r\n        s\r\n      j = ', '\r\n    }\r\n    e.innerHTML =\r\n      s +\r\n      ' (' +\r\n      c.year +\r\n      '). ' +\r\n      c.title +\r\n      '.' +\r\n      (c.journal\r\n        ? ' <em>' + c.journal + (c.volume ? ', ' + c.volume : '') + '</em>' + (c.page ? ', ' + c.page : '') + '.'\r\n        : '') +\r\n      (c.version ? ' Version ' + c.version + '.' : '') +\r\n      (c.doi || c.url\r\n        ? (c.doi ? ' doi: ' : ' url: ') +\r\n          (c.doi || c.url\r\n            ? '<a rel=\"noreferrer\" target=\"_blank\" href=\"' +\r\n              (c.doi ? 'https://doi.org/' + c.doi : c.url) +\r\n              '\">' +\r\n              (c.doi || c.url.replace(patterns.http, '')) +\r\n              '</a>'\r\n            : '')\r\n        : '')\r\n    return e\r\n  }\r\n\r\n  function make_variable_source(s, table) {\r\n    const e = document.createElement(table ? 'tr' : 'div')\r\n    let ee\r\n    if (table) {\r\n      if (s.name) {\r\n        e.appendChild((ee = document.createElement('td')))\r\n        if (s.url) {\r\n          ee.appendChild((ee = document.createElement('a')))\r\n          ee.target = '_blank'\r\n          ee.rel = 'noreferrer'\r\n          ee.href = s.url\r\n        } else {\r\n          ee.appendChild(document.createElement('span'))\r\n        }\r\n        e.firstElementChild.firstElementChild.innerText = s.name\r\n      }\r\n      if (s.date_accessed) {\r\n        e.appendChild((ee = document.createElement('td')))\r\n        ee.appendChild(document.createElement('span'))\r\n        ee.firstElementChild.innerText = s.date_accessed\r\n      }\r\n    } else {\r\n      e.className = 'card'\r\n      if (s.name) {\r\n        e.appendChild((ee = document.createElement('div')))\r\n        ee.className = 'card-header'\r\n        if (s.url) {\r\n          ee.appendChild((ee = document.createElement('a')))\r\n          ee.target = '_blank'\r\n          ee.rel = 'noreferrer'\r\n          ee.href = s.url\r\n        } else {\r\n          ee.appendChild(document.createElement('span'))\r\n        }\r\n        e.firstElementChild.firstElementChild.innerText = s.name\r\n      }\r\n      e.appendChild(document.createElement('div'))\r\n      e.lastElementChild.className = 'card-body'\r\n      if (s.location) {\r\n        e.lastElementChild.appendChild((ee = document.createElement('p')))\r\n        ee.appendChild(document.createElement('span'))\r\n        ee.lastElementChild.innerText = 'Location: '\r\n        ee.appendChild(document.createElement('span'))\r\n        if (s.location_url) {\r\n          ee.lastElementChild.appendChild((ee = document.createElement('a')))\r\n          ee.target = '_blank'\r\n          ee.rel = 'noreferrer'\r\n          ee.href = s.location_url\r\n          ee.innerText = s.location\r\n        } else {\r\n          ee.lastElementChild.innerText = s.location\r\n        }\r\n      }\r\n      if (s.date_accessed) {\r\n        e.lastElementChild.appendChild((ee = document.createElement('p')))\r\n        ee.appendChild(document.createElement('span'))\r\n        ee.lastElementChild.innerText = 'Date Accessed: '\r\n        ee.appendChild(document.createElement('span'))\r\n        ee.lastElementChild.innerText = s.date_accessed\r\n      }\r\n    }\r\n    return e\r\n  }\r\n\r\n  function show_variable_info() {\r\n    const v = _u[this.view],\r\n      name = valueOf(this.v || v.y),\r\n      info = site.data.variable_info[name]\r\n    page.modal.info.header.firstElementChild.innerText = info.short_name\r\n    page.modal.info.title.innerText = info.long_name\r\n    set_description(page.modal.info.description, info)\r\n    page.modal.info.name.lastElementChild.innerText = name\r\n    page.modal.info.type.lastElementChild.innerText = info.type || ''\r\n    if (info.sources && info.sources.length) {\r\n      page.modal.info.sources.lastElementChild.innerHTML = ''\r\n      page.modal.info.sources.classList.remove('hidden')\r\n      info.sources.forEach(s => {\r\n        page.modal.info.sources.lastElementChild.appendChild(make_variable_source(s))\r\n      })\r\n    } else page.modal.info.sources.classList.add('hidden')\r\n    if (info.citations && info.citations.length) {\r\n      page.modal.info.references.lastElementChild.innerHTML = ''\r\n      page.modal.info.references.classList.remove('hidden')\r\n      if ('string' === typeof info.citations) info.citations = [info.citations]\r\n      if ('references' in site.data) {\r\n        delete site.data.variable_info._references\r\n        delete site.data.references\r\n      }\r\n      if (!('_references' in site.data.variable_info)) {\r\n        const r = {}\r\n        site.data.variable_info._references = r\r\n        Object.keys(site.data.info).forEach(d => {\r\n          const m = site.data.info[d]\r\n          if ('_references' in m) {\r\n            Object.keys(m._references).forEach(t => {\r\n              if (!(t in r))\r\n                r[t] = {\r\n                  reference: m._references[t],\r\n                  element: make_variable_reference(m._references[t]),\r\n                }\r\n            })\r\n          }\r\n        })\r\n      }\r\n      const r = site.data.variable_info._references\r\n      info.citations.forEach(c => {\r\n        if (c in r) page.modal.info.references.lastElementChild.appendChild(r[c].element)\r\n      })\r\n    } else page.modal.info.references.classList.add('hidden')\r\n  }\r\n\r\n  function parse_variables(s, type, e, entity) {\r\n    if ('statement' === type) {\r\n      for (let m, v; (m = patterns.mustache.exec(s)); ) {\r\n        if ('value' === m[1]) {\r\n          v = entity\r\n            ? site.data.format_value(\r\n                entity.get_value(e.v, e.time),\r\n                patterns.int_types.test(site.data.variable_info[e.v].type)\r\n              )\r\n            : NaN\r\n          s = s.replace(\r\n            m[0],\r\n            NaN !== v && site.data.variable_info[e.v].type in value_types\r\n              ? value_types[site.data.variable_info[e.v].type](v)\r\n              : v\r\n          )\r\n          patterns.mustache.lastIndex = 0\r\n        } else if (entity) {\r\n          if ('region_name' === m[1]) {\r\n            s = s.replace(m[0], entity.features.name)\r\n            patterns.mustache.lastIndex = 0\r\n          } else if (patterns.features.test(m[1])) {\r\n            s = s.replace(m[0], entity.features[m[1].replace(patterns.features, '')])\r\n            patterns.mustache.lastIndex = 0\r\n          } else if (patterns.variables.test(m[1])) {\r\n            s = s.replace(m[0], entity.variables[e.v][m[1].replace(patterns.variables, '')])\r\n            patterns.mustache.lastIndex = 0\r\n          } else if (patterns.data.test(m[1])) {\r\n            s = s.replace(m[0], entity.get_value(m[1].replace(patterns.data, ''), e.time))\r\n            patterns.mustache.lastIndex = 0\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return s\r\n  }\r\n\r\n  let k, i, e, ee, c\r\n  // get options from url\r\n  site.query = k = window.location.search.replace('?', '')\r\n  site.url_options = {}\r\n  if (k) {\r\n    e = k.split('&')\r\n    for (i = e.length; i--; ) {\r\n      c = e[i].split('=')\r\n      if (c.length < 2) c.push('true')\r\n      c[1] = patterns.bool.test(c[1]) ? !!c[1] || 'true' === c[1] : c[1].replace(patterns.url_spaces, ' ')\r\n      site.url_options[c[0]] = c[1]\r\n      if (patterns.settings.test(c[0])) storage.set(c[0].replace(patterns.settings, ''), c[1])\r\n    }\r\n  }\r\n\r\n  // prepare embedded view\r\n  if ('embedded' in site.url_options || 'hide_navbar' in site.url_options) {\r\n    if (!('hide_logo' in site.url_options)) site.url_options.hide_logo = true\r\n    if (!('hide_title' in site.url_options)) site.url_options.hide_title = true\r\n    if (!('hide_navcontent' in site.url_options)) site.url_options.hide_navcontent = true\r\n    if (!('hide_panels' in site.url_options)) site.url_options.hide_panels = true\r\n    if ('embedded' in site.url_options && !('close_menus' in site.url_options)) site.url_options.close_menus = true\r\n  }\r\n  e = page.navbar\r\n  if (e) {\r\n    e.querySelectorAll('button').forEach(b => {\r\n      const panel = document.querySelector(b.getAttribute('data-bs-target'))\r\n      if (panel && 'false' === panel.getAttribute('data-bs-backdrop')) {\r\n        panel.addEventListener('show.bs.offcanvas', function () {\r\n          page.content_bounds.outer_right = panel.getBoundingClientRect().width\r\n          content_resize(void 0, true)\r\n          setTimeout(trigger_resize, 200)\r\n        })\r\n        panel.addEventListener('hide.bs.offcanvas', function () {\r\n          page.content_bounds.outer_right = 0\r\n          content_resize(void 0, true)\r\n          setTimeout(trigger_resize, 200)\r\n        })\r\n      }\r\n    })\r\n    if ('navcolor' in site.url_options) {\r\n      if ('' === site.url_options.navcolor) site.url_options.navcolor = window.location.hash\r\n      e.style.backgroundColor = site.url_options.navcolor.replace('%23', '#')\r\n    }\r\n    if (site.url_options.hide_logo && site.url_options.hide_title && site.url_options.hide_navcontent) {\r\n      e.classList.add('hidden')\r\n    } else {\r\n      e = document.querySelector('.navbar-brand')\r\n      if (e) {\r\n        if (site.url_options.hide_logo && 'IMG' === e.firstElementChild.tagName)\r\n          e.firstElementChild.classList.add('hidden')\r\n        if (site.url_options.hide_title && 'IMG' !== e.lastElementChild.tagName)\r\n          e.lastElementChild.classList.add('hidden')\r\n      }\r\n      if (site.url_options.hide_navcontent) {\r\n        document.querySelector('.navbar-toggler').classList.add('hidden')\r\n        e = document.querySelector('.navbar-nav')\r\n        if (e) e.classList.add('hidden')\r\n      }\r\n    }\r\n    if (site.url_options.hide_panels && page.panels.length) {\r\n      for (i = page.panels.length; i--; ) {\r\n        page.panels[i].classList.add('hidden')\r\n      }\r\n    }\r\n  }\r\n\r\n  // check for stored settings\r\n  storage.copy = storage.get()\r\n  if (storage.copy)\r\n    for (const k in site.settings) {\r\n      if (k in storage.copy) {\r\n        let c = storage.copy[k]\r\n        if (patterns.bool.test(c)) {\r\n          c = !!c || 'true' === c\r\n        } else if (patterns.number.test(c)) c = parseFloat(c)\r\n        site.settings[k] = c\r\n      }\r\n    }\r\n\r\n  // preprocess polynomial palettes\r\n  function poly_channel(ch, pos, coefs) {\r\n    const n = coefs.length\r\n    let v = coefs[0][ch] + pos * coefs[1][ch],\r\n      i = 2\r\n    for (; i < n; i++) {\r\n      v += Math.pow(pos, i) * coefs[i][ch]\r\n    }\r\n    return Math.max(0, Math.min(255, v))\r\n  }\r\n  Object.keys(palettes).forEach(k => {\r\n    const n = 255,\r\n      p = palettes[k]\r\n    if ('continuous-polynomial' === p.type) {\r\n      const c = p.colors\r\n      p.type = 'discrete'\r\n      p.colors = []\r\n      for (let i = 0; i < n; i++) {\r\n        const v = i / n\r\n        p.colors.push(\r\n          'rgb(' + poly_channel(0, v, c) + ', ' + poly_channel(1, v, c) + ', ' + poly_channel(2, v, c) + ')'\r\n        )\r\n      }\r\n    }\r\n    p.odd = p.colors.length % 2\r\n  })\r\n\r\n  window.onload = function () {\r\n    page.navbar = document.querySelector('.navbar')\r\n    page.navbar = page.navbar ? page.navbar.getBoundingClientRect() : {height: 0}\r\n    page.content = document.querySelector('.content')\r\n    page.menus = document.querySelectorAll('.menu-wrapper')\r\n    page.panels = document.querySelectorAll('.panel')\r\n    page.content_bounds = {\r\n      top: page.navbar.height,\r\n      right: 0,\r\n      bottom: 0,\r\n      left: 0,\r\n      outer_right: 0,\r\n    }\r\n    page.script_style = document.head.appendChild(document.createElement('style'))\r\n    if (site.settings.hide_tooltips) page.script_style.sheet.insertRule(tooltip_icon_rule, 0)\r\n    page.menu_toggler = {\r\n      hide: function () {\r\n        page.menu_toggler.timeout = -1\r\n        this.classList.add('hidden')\r\n        content_resize()\r\n      },\r\n      toggle: function (type) {\r\n        if (page.menu_toggler.timeout > 0) clearTimeout(page.menu_toggler.timeout)\r\n        page.menu_toggler.timeout = -1\r\n        if ('closed' === this.parentElement.state) {\r\n          this.parentElement.state = 'open'\r\n          this.parentElement.firstElementChild.classList.remove('hidden')\r\n          this.parentElement.style[type] = '0px'\r\n          page.content.style[type] =\r\n            this.parentElement.getBoundingClientRect()['left' === type || 'right' === type ? 'width' : 'height'] + 'px'\r\n          if ('top' === type || 'bottom' === type) this.style[type] = page.content_bounds[type] + 'px'\r\n          setTimeout(trigger_resize, 300)\r\n        } else {\r\n          this.parentElement.state = 'closed'\r\n          if ('left' === type || 'right' === type) {\r\n            this.parentElement.style[type] = -this.parentElement.getBoundingClientRect().width + 'px'\r\n            page.content.style[type] = page.content_bounds[type] + 'px'\r\n          } else {\r\n            const b = this.parentElement.getBoundingClientRect()\r\n            page.content.style[type] = page.content_bounds[type] + ('top' === type ? 40 : 0) + 'px'\r\n            this.parentElement.style[type] = -b.height + ('top' === type ? page.content_bounds.top : 0) + 'px'\r\n            if ('top' === type || 'bottom' === type) this.style[type] = b.height + 'px'\r\n          }\r\n          page.menu_toggler.timeout = setTimeout(page.menu_toggler.hide.bind(this.parentElement.firstElementChild), 300)\r\n        }\r\n      },\r\n      timeout: -1,\r\n    }\r\n    page.modal = {\r\n      info: {\r\n        init: false,\r\n        e: document.createElement('div'),\r\n      },\r\n      filter: {\r\n        init: false,\r\n        e: document.createElement('div'),\r\n      },\r\n    }\r\n    page.load_screen = document.getElementById('load_screen')\r\n\r\n    // initialize tags\r\n    if (site.settings.tracking && site.tag_id) {\r\n      gtag('js', new Date())\r\n      gtag('config', site.tag_id)\r\n    }\r\n\r\n    // make variable info popup\r\n    e = page.modal.info.e\r\n    document.body.appendChild(e)\r\n    page.modal.info.init = true\r\n    e.id = 'variable_info_display'\r\n    e.className = 'modal fade'\r\n    e.setAttribute('tabindex', '-1')\r\n    e.setAttribute('aria-labelledby', 'variable_info_title')\r\n    e.ariaHidden = 'true'\r\n    e.appendChild(document.createElement('div'))\r\n    e.firstElementChild.className = 'modal-dialog modal-dialog-scrollable'\r\n    e.firstElementChild.appendChild(document.createElement('div'))\r\n    e.firstElementChild.firstElementChild.className = 'modal-content'\r\n    e.firstElementChild.firstElementChild.appendChild((page.modal.info.header = document.createElement('div')))\r\n    e = page.modal.info\r\n    e.header.className = 'modal-header'\r\n    e.header.appendChild(document.createElement('p'))\r\n    e.header.firstElementChild.className = 'h5 modal-title'\r\n    e.header.firstElementChild.id = 'variable_info_title'\r\n    e.header.appendChild(document.createElement('button'))\r\n    e.header.lastElementChild.type = 'button'\r\n    e.header.lastElementChild.className = 'btn-close'\r\n    e.header.lastElementChild.setAttribute('data-bs-dismiss', 'modal')\r\n    e.header.lastElementChild.title = 'close'\r\n    e.header.insertAdjacentElement('afterEnd', (e.body = document.createElement('div')))\r\n    e.body.className = 'modal-body'\r\n    e.body.appendChild((e.title = document.createElement('p')))\r\n    e.title.className = 'h4'\r\n    e.body.appendChild((e.description = document.createElement('p')))\r\n\r\n    e.body.appendChild(document.createElement('table'))\r\n    e.body.lastElementChild.className = 'info-feature-table'\r\n\r\n    e.body.lastElementChild.appendChild((e.name = document.createElement('tr')))\r\n    e.name.appendChild(document.createElement('th'))\r\n    e.name.firstElementChild.innerText = 'Name'\r\n    e.name.appendChild(document.createElement('td'))\r\n\r\n    e.body.lastElementChild.appendChild((e.type = document.createElement('tr')))\r\n    e.type.appendChild(document.createElement('th'))\r\n    e.type.firstElementChild.innerText = 'Type'\r\n    e.type.appendChild(document.createElement('td'))\r\n\r\n    e.body.appendChild((e.sources = document.createElement('div')))\r\n    e.sources.appendChild(document.createElement('p'))\r\n    e.sources.lastElementChild.innerText = 'Sources'\r\n    e.sources.lastElementChild.className = 'h3'\r\n    e.sources.appendChild(document.createElement('div'))\r\n    e.sources.lastElementChild.className = 'sources-cards'\r\n\r\n    e = page.modal.info\r\n    e.body.appendChild((e.references = document.createElement('div')))\r\n    e.references.appendChild(document.createElement('p'))\r\n    e.references.firstElementChild.className = 'h3'\r\n    e.references.firstElementChild.innerText = 'References'\r\n    e.references.appendChild((e = document.createElement('ul')))\r\n    e.className = 'reference-list'\r\n\r\n    // set up filter's time range\r\n    document.body.appendChild((e = page.modal.filter.e))\r\n    page.modal.filter.init = true\r\n    e.id = 'filter_display'\r\n    e.className = 'modal fade'\r\n    e.setAttribute('tabindex', '-1')\r\n    e.setAttribute('aria-labelledby', 'filter_title')\r\n    e.ariaHidden = 'true'\r\n    e.appendChild(document.createElement('div'))\r\n    e.firstElementChild.className = 'modal-dialog'\r\n    e.firstElementChild.appendChild(document.createElement('div'))\r\n    e.firstElementChild.firstElementChild.className = 'modal-content'\r\n    e.firstElementChild.firstElementChild.appendChild((page.modal.filter.header = document.createElement('div')))\r\n    e = page.modal.filter\r\n    e.header.className = 'modal-header'\r\n    e.header.appendChild(document.createElement('p'))\r\n    e.header.firstElementChild.className = 'h5 modal-title'\r\n    e.header.firstElementChild.id = 'filter_title'\r\n    e.header.firstElementChild.innerText = 'Filter'\r\n    e.header.appendChild(document.createElement('button'))\r\n    e.header.lastElementChild.type = 'button'\r\n    e.header.lastElementChild.className = 'btn-close'\r\n    e.header.lastElementChild.setAttribute('data-bs-dismiss', 'modal')\r\n    e.header.lastElementChild.title = 'close'\r\n    e.header.insertAdjacentElement('afterEnd', (e.body = document.createElement('div')))\r\n    e.body.className = 'modal-body'\r\n    e.body.appendChild(document.createElement('p'))\r\n    e.body.lastElementChild.className = 'h6 text-muted'\r\n    e.body.lastElementChild.innerText = 'Time Range'\r\n\r\n    e.body.appendChild((e.time_range = document.createElement('div')))\r\n    e.time_range.className = 'row'\r\n\r\n    e.time_range.appendChild(document.createElement('div'))\r\n    e.time_range.lastElementChild.className = 'col'\r\n    e.time_range.lastElementChild.appendChild((ee = document.createElement('div')))\r\n    ee.className = 'form-floating text-wrapper wrapper'\r\n    ee.appendChild(document.createElement('input'))\r\n    ee.lastElementChild.className = 'form-control auto-input'\r\n    ee.lastElementChild.setAttribute('data-autoType', 'number')\r\n    ee.lastElementChild.setAttribute('data-default', 'min')\r\n    ee.lastElementChild.max = 'filter.time_max'\r\n    ee.lastElementChild.type = 'number'\r\n    ee.lastElementChild.autoType = 'number'\r\n    ee.lastElementChild.id = 'filter.time_min'\r\n    ee.appendChild(document.createElement('label'))\r\n    ee.lastElementChild.innerText = 'First Time'\r\n    ee.lastElementChild.setAttribute('for', 'filter.time_min')\r\n    e.time_range.appendChild(document.createElement('div'))\r\n    e.time_range.lastElementChild.className = 'col'\r\n    e.time_range.lastElementChild.appendChild((ee = document.createElement('div')))\r\n    ee.className = 'form-floating text-wrapper wrapper'\r\n    ee.appendChild(document.createElement('input'))\r\n    ee.lastElementChild.className = 'form-control auto-input'\r\n    ee.lastElementChild.setAttribute('data-autoType', 'number')\r\n    ee.lastElementChild.setAttribute('data-default', 'max')\r\n    ee.lastElementChild.min = 'filter.time_min'\r\n    ee.lastElementChild.type = 'number'\r\n    ee.lastElementChild.autoType = 'number'\r\n    ee.lastElementChild.id = 'filter.time_max'\r\n    ee.appendChild(document.createElement('label'))\r\n    ee.lastElementChild.innerText = 'Last Time'\r\n    ee.lastElementChild.setAttribute('for', 'filter.time_max')\r\n\r\n    page.panels.length &&\r\n      page.panels.forEach(p => {\r\n        const side = p.classList.contains('panel-left') ? 'left' : 'right'\r\n        page.content_bounds[side] = p.getBoundingClientRect().width\r\n        p.style.marginTop = page.content_bounds.top + 'px'\r\n        p.lastElementChild.addEventListener(\r\n          'click',\r\n          function () {\r\n            const w = p.getBoundingClientRect().width,\r\n              bw = p.lastElementChild.getBoundingClientRect().width\r\n            if ('true' === p.lastElementChild.getAttribute('aria-expanded')) {\r\n              page.content_bounds[side] = bw\r\n              if (page.top_menu) page.top_menu.style[side] = bw + 'px'\r\n              if (page.bottom_menu) page.bottom_menu.style[side] = bw + 'px'\r\n              p.style[side] = -w + bw + 'px'\r\n              p.lastElementChild.setAttribute('aria-expanded', 'false')\r\n            } else {\r\n              page.content_bounds[side] = w\r\n              if (page.top_menu) page.top_menu.style[side] = w + 'px'\r\n              if (page.bottom_menu) page.bottom_menu.style[side] = w + 'px'\r\n              p.style[side] = '0px'\r\n              p.lastElementChild.setAttribute('aria-expanded', 'true')\r\n            }\r\n            content_resize()\r\n            setTimeout(trigger_resize, 200)\r\n          }.bind(p)\r\n        )\r\n      })\r\n    page.menus.length &&\r\n      page.menus.forEach(m => {\r\n        const has_toggler = m.lastElementChild.tagName === 'BUTTON'\r\n        m.state = m.getAttribute('data-state')\r\n        if (m.classList.contains('menu-top')) {\r\n          page.top_menu = m\r\n          page.top_menu.style.left = page.content_bounds.left + 'px'\r\n          page.top_menu.style.right = page.content_bounds.right + 'px'\r\n          if (has_toggler) {\r\n            m.lastElementChild.addEventListener('click', page.menu_toggler.toggle.bind(m.lastElementChild, 'top'))\r\n            m.lastElementChild.style.top = page.content_bounds.top + 'px'\r\n          }\r\n        } else if (m.classList.contains('menu-right')) {\r\n          page.right_menu = m\r\n          page.right_menu.style.right = page.content_bounds.right + 'px'\r\n          if (has_toggler) {\r\n            m.lastElementChild.addEventListener('click', page.menu_toggler.toggle.bind(m.lastElementChild, 'right'))\r\n            m.lastElementChild.style.top = page.content_bounds.top + 'px'\r\n          }\r\n        } else if (m.classList.contains('menu-bottom')) {\r\n          page.bottom_menu = m\r\n          page.content_bounds.bottom = 40\r\n          page.bottom_menu.style.left = page.content_bounds.left + 'px'\r\n          page.bottom_menu.style.right = page.content_bounds.right + 'px'\r\n          if (has_toggler) {\r\n            m.lastElementChild.addEventListener('click', page.menu_toggler.toggle.bind(m.lastElementChild, 'bottom'))\r\n          }\r\n        } else if (m.classList.contains('menu-left')) {\r\n          page.left_menu = m\r\n          page.left_menu.style.left = page.content_bounds.left + 'px'\r\n          if (has_toggler) {\r\n            m.lastElementChild.addEventListener('click', page.menu_toggler.toggle.bind(m.lastElementChild, 'left'))\r\n            m.lastElementChild.style.top = page.content_bounds.top + 'px'\r\n          }\r\n        }\r\n        if (site.url_options.close_menus && 'open' === m.state) m.lastElementChild.click()\r\n      })\r\n\r\n    // initialize global tooltip\r\n    page.tooltip = {\r\n      e: document.createElement('div'),\r\n      showing: '',\r\n    }\r\n    page.tooltip.e.className = 'tooltip hidden'\r\n    page.tooltip.e.appendChild(document.createElement('p'))\r\n    document.body.appendChild(page.tooltip.e)\r\n    document.body.addEventListener('mouseover', tooltip_clear)\r\n\r\n    // initialize inputs\r\n    if (site.dataviews) {\r\n      for (const k in site.dataviews)\r\n        if (k in site.dataviews) {\r\n          defaults.dataview = k\r\n          break\r\n        }\r\n    } else {\r\n      site.dataviews = {}\r\n      site.dataviews[defaults.dataview] = {}\r\n    }\r\n    document.querySelectorAll('.auto-input').forEach(elements.init_input)\r\n\r\n    // initialize variables\r\n    if (site.variables && site.variables.length) {\r\n      site.variables.forEach(v => {\r\n        const k = v.id,\r\n          u = {\r\n            id: k,\r\n            type: 'virtual',\r\n            source: v.default,\r\n            previous: void 0,\r\n            default: v.default,\r\n            display: v.display,\r\n            current_index: -1,\r\n            values: [],\r\n            states: v.states,\r\n            update: function () {\r\n              this.source = void 0\r\n              for (let p, i = this.states.length; i--; ) {\r\n                p = true\r\n                for (let c = this.states[i].condition.length; c--; ) {\r\n                  const r = this.states[i].condition[c]\r\n                  if (DataHandler.checks[r.type](valueOf(r.id), valueOf(r.value))) {\r\n                    if (r.any) {\r\n                      p = true\r\n                      break\r\n                    }\r\n                  } else p = false\r\n                }\r\n                if (p) {\r\n                  this.source = this.states[i].value\r\n                  break\r\n                }\r\n              }\r\n              if (!this.source) this.source = this.default\r\n              if (this.source !== this.previous) {\r\n                this.previous = this.source\r\n                request_queue(this.id)\r\n              } else if (this.source in _u) {\r\n                const r = _u[this.source].value()\r\n                if (r !== this.previous) {\r\n                  this.previous = r\r\n                  request_queue(this.id)\r\n                }\r\n              }\r\n            },\r\n            value: function () {\r\n              return valueOf(this.source)\r\n            },\r\n            set: function (v) {\r\n              if (-1 !== this.values.indexOf(v)) {\r\n                this.previous = this.source\r\n                this.source = v\r\n              } else if (this.source) {\r\n                const c = _u[this.source]\r\n                if (\r\n                  'select' === c.type || 'combobox' === c.type\r\n                    ? v in c.values || v in c.display\r\n                    : -1 !== c.values.indexOf(v)\r\n                ) {\r\n                  c.set(v)\r\n                }\r\n              }\r\n              request_queue(this.id)\r\n            },\r\n          }\r\n        _u[k] = u\r\n        if (u.source) u.values.push(u.source)\r\n        const p = {}\r\n        u.states.forEach(si => {\r\n          u.values.push(si.value)\r\n          si.condition.forEach(c => {\r\n            p[c.id] = {type: 'update', id: k}\r\n            add_dependency(c.id, {type: 'update', id: k})\r\n          })\r\n        })\r\n        u.values.forEach(id => {\r\n          if (id in _u) add_dependency(id, {type: 'update', id: k})\r\n        })\r\n      })\r\n    }\r\n\r\n    // initialize rules\r\n    if (site.rules && site.rules.length) {\r\n      site.rules.forEach((r, i) => {\r\n        if ('display' in r.effects) {\r\n          r.effects.display = {e: document.getElementById(r.effects.display)}\r\n          e = r.effects.display.e.querySelector('.auto-input')\r\n          if (e) {\r\n            const u = _u[e.id]\r\n            u.rule = r\r\n            r.effects.display.u = u\r\n          }\r\n        }\r\n        if ('lock' in r.effects) {\r\n          const us = new Map()\r\n          document.querySelectorAll('#' + r.effects.lock + ' .auto-input').forEach(e => us.set(e.id, _u[e.id]))\r\n          r.effects.lock = us\r\n        }\r\n        r.condition.forEach(c => {\r\n          if (c.type in DataHandler.checks) {\r\n            c.check = function () {\r\n              return DataHandler.checks[this.type](valueOf(this.id), valueOf(this.value))\r\n            }.bind(c)\r\n            if (c.id in _u) {\r\n              add_dependency(c.id, {type: 'rule', id: c.id, condition: c, rule: i})\r\n              if (!(c.id in rule_conditions)) rule_conditions[c.id] = {}\r\n              rule_conditions[c.id][i] = r\r\n            }\r\n            if (c.check()) {\r\n              Object.keys(r.effects).forEach(k => {\r\n                if (k in _u) _u[k].set(valueOf(r.effects[k]))\r\n              })\r\n            } else if (c.default) {\r\n              Object.keys(r.effects).forEach(k => {\r\n                if (k in _u) _u[k].set(valueOf(c.default))\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    keys._u = Object.keys(_u)\r\n    window.addEventListener('resize', content_resize)\r\n\r\n    if (!site.metadata.datasets) drop_load_screen()\r\n\r\n    if (!site.dataviews[defaults.dataview].dataset) {\r\n      if (1 === site.metadata.datasets.length) {\r\n        defaults.dataset = site.metadata.datasets[0]\r\n      } else {\r\n        const info = site.data.info\r\n        for (let i = keys._u.length; i--; ) {\r\n          const u = _u[keys._u[i]]\r\n          if (u.dataset in info) {\r\n            defaults.dataset = u.dataset\r\n            break\r\n          } else if (u.default in info) {\r\n            defaults.dataset = u.default\r\n            break\r\n          } else if ('select' === u.type && u.options[u.default] && u.options[u.default].value in info) {\r\n            defaults.dataset = u.options[u.default].value\r\n            break\r\n          } else if (Array.isArray(u.values) && u.values[u.default] && u.values[u.default] in info) {\r\n            defaults.dataset = u.values[u.default]\r\n            break\r\n          }\r\n        }\r\n        if (!defaults.dataset) defaults.dataset = site.metadata.datasets[site.metadata.datasets.length - 1]\r\n      }\r\n      keys._u.forEach(k => {\r\n        const u = _u[k]\r\n        if (!u.dataset) u.dataset = defaults.dataset\r\n      })\r\n      site.dataviews[defaults.dataview].dataset = defaults.dataset\r\n    }\r\n    if ('undefined' === typeof DataHandler) {\r\n      site.data = {}\r\n    } else {\r\n      defaults.dataset = valueOf(site.dataviews[defaults.dataview].dataset)\r\n      if ('number' === typeof defaults.dataset) defaults.dataset = site.metadata.datasets[defaults.dataset]\r\n      site.data = new DataHandler(site, defaults, site.data, {\r\n        init: init,\r\n        onload: function () {\r\n          if (site.data.inited) clearTimeout(site.data.inited.load_screen)\r\n          setTimeout(drop_load_screen, 600)\r\n          delete this.onload\r\n        },\r\n        data_load: function () {\r\n          Object.keys(_c).forEach(request_queue)\r\n        },\r\n      })\r\n    }\r\n\r\n    if (page.load_screen && site.data.inited) {\r\n      site.data.inited.load_screen = setTimeout(drop_load_screen, 3000)\r\n    } else {\r\n      page.wrap.style.visibility = 'visible'\r\n    }\r\n  }\r\n\r\n  function drop_load_screen() {\r\n    if (site.data.inited) clearTimeout(site.data.inited.load_screen)\r\n    page.wrap.style.visibility = 'visible'\r\n    page.load_screen.style.display = 'none'\r\n  }\r\n\r\n  function clear_storage() {\r\n    if (window.localStorage) storage.perm.removeItem(storage.name)\r\n    window.location.reload()\r\n  }\r\n\r\n  function content_resize(e, full) {\r\n    const f = page[full ? 'wrap' : 'content']\r\n    if (!full) {\r\n      f.style.top =\r\n        (page.top_menu && 'open' === page.top_menu.state\r\n          ? page.top_menu.getBoundingClientRect().height\r\n          : page.content_bounds.top +\r\n            ((!page.top_menu && !page.left_menu && !page.right_menu) ||\r\n            (page.right_menu && 'open' === page.right_menu.state) ||\r\n            (page.left_menu && 'open' === page.left_menu.state)\r\n              ? 0\r\n              : 40)) + 'px'\r\n      f.style.bottom =\r\n        page.content_bounds.bottom +\r\n        (!page.bottom_menu || 'closed' === page.bottom_menu.state\r\n          ? 0\r\n          : page.bottom_menu.getBoundingClientRect().height) +\r\n        'px'\r\n      f.style.left =\r\n        page.content_bounds.left +\r\n        (!page.left_menu || 'closed' === page.left_menu.state ? 0 : page.left_menu.getBoundingClientRect().width) +\r\n        'px'\r\n    }\r\n    f.style.right =\r\n      page.content_bounds[full ? 'outer_right' : 'right'] +\r\n      (!page.right_menu || 'closed' === page.right_menu.state ? 0 : page.right_menu.getBoundingClientRect().width) +\r\n      'px'\r\n  }\r\n\r\n  function trigger_resize() {\r\n    'undefined' === typeof module && window.dispatchEvent(new Event('resize'))\r\n  }\r\n\r\n  function get_options_url() {\r\n    let s = ''\r\n    keys._u.forEach(k => {\r\n      const u = _u[k]\r\n      if (u.input && !patterns.settings.test(k)) {\r\n        if (!u.range || u.range[0] !== u.range[1]) {\r\n          let v = u.value()\r\n          if ('off_default' in u ? u.off_default : v !== u.default) {\r\n            if (Array.isArray(v)) v = v.join(',')\r\n            if ('' !== v && null != v && '-1' != v) s += (s ? '&' : '?') + k + '=' + v\r\n          }\r\n        }\r\n      }\r\n    })\r\n    if (site.data && _u._base_filter.c.size) s += (s ? '&' : '?') + _u._base_filter.value([])\r\n    return window.location.protocol + '//' + window.location.host + window.location.pathname + s\r\n  }\r\n\r\n  function init() {\r\n    if (site.data.variables) {\r\n      defaults.variable = Object.keys(site.data.variables)\r\n      defaults.variable = defaults.variable[defaults.variable.length - 1]\r\n    }\r\n    if (!site.map) site.map = {}\r\n    if (!site.map._overlay_property_selectors) site.map._overlay_property_selectors = []\r\n    // initialize inputs\r\n    keys._u.forEach(async k => {\r\n      if (_u[k].type in elements) {\r\n        const o = _u[k],\r\n          combobox = 'combobox' === o.type\r\n        if (o.optionSource) {\r\n          if (patterns.palette.test(o.optionSource)) {\r\n            o.options = []\r\n            Object.keys(palettes).forEach(v => o.options.push(o.add(v, palettes[v].name)))\r\n            if (-1 === o.default) o.default = defaults.palette\r\n          } else if (patterns.datasets.test(o.optionSource)) {\r\n            o.options = []\r\n            site.metadata.datasets.forEach(d => o.options.push(o.add(d)))\r\n          } else {\r\n            o.sensitive = false\r\n            o.option_sets = {}\r\n            if (patterns.properties.test(o.optionSource)) {\r\n              site.map._overlay_property_selectors.push(o)\r\n            }\r\n            if (o.depends) add_dependency(o.depends, {type: 'options', id: o.id})\r\n            if (o.dataset in _u) add_dependency(o.dataset, {type: 'options', id: o.id})\r\n            if (o.view) add_dependency(o.view, {type: 'options', id: o.id})\r\n            const v = valueOf(o.dataset) || defaults.dataset\r\n            if (!o.dataset) o.dataset = v\r\n            if (v in site.data.info) conditionals.options(o)\r\n          }\r\n        }\r\n        if (combobox || 'select' === o.type) {\r\n          // resolve options\r\n          o.set_current = conditionals.set_current.bind(o)\r\n          if (Array.isArray(o.values)) {\r\n            o.values = {}\r\n            o.display = {}\r\n            let new_display = true\r\n            const select = 'select' === o.type\r\n            o.options.forEach(e => {\r\n              if (select) e.dataset.value = e.value\r\n              if (new_display) new_display = e.dataset.value === e.innerText\r\n            })\r\n            o.options.forEach((e, i) => {\r\n              o.values[e.dataset.value] = i\r\n              if (new_display) e.innerText = site.data.format_label(e.dataset.value)\r\n              o.display[e.innerText] = i\r\n            })\r\n            if (!(o.default in o.values) && !(o.default in _u)) {\r\n              o.default = Number(o.default)\r\n              if (isNaN(o.default)) o.default = -1\r\n              if (-1 !== o.default && o.default < o.options.length) {\r\n                o.default = o.options[o.default].dataset.value\r\n              } else {\r\n                o.default = -1\r\n              }\r\n            }\r\n            o.source = ''\r\n            o.id in site.url_options ? o.set(site.url_options[o.id]) : o.reset()\r\n          }\r\n          o.subset = o.e.getAttribute('data-subset') || 'all'\r\n          o.selection_subset = o.e.getAttribute('data-selectionSubset') || o.subset\r\n          if (o.type in site && o.id in site[o.type]) {\r\n            o.settings = site[o.type][o.id]\r\n            if (o.settings.filters) {\r\n              o.filters = o.settings.filters\r\n              o.current_filter = {}\r\n              Object.keys(o.filters).forEach(f => {\r\n                add_dependency(o.filters[f], {type: 'filter', id: o.id})\r\n              })\r\n              o.filter = function () {\r\n                Object.keys(this.filters).forEach(f => {\r\n                  this.current_filter[f] = valueOf(this.filters[f])\r\n                })\r\n                let first\r\n                Object.keys(this.values).forEach((v, i) => {\r\n                  let pass = false\r\n                  if (v in site.data.variables && 'meta' in site.data.variables[v]) {\r\n                    for (const k in this.current_filter)\r\n                      if (k in site.data.variables[v].meta) {\r\n                        pass = site.data.variables[v].meta[k] === this.current_filter[k]\r\n                        if (!pass) break\r\n                      }\r\n                  }\r\n                  if (pass && !first) first = v\r\n                  this.options[i].classList[pass ? 'remove' : 'add']('hidden')\r\n                })\r\n                this.current_index = this.values[this.value()]\r\n                if (\r\n                  first &&\r\n                  (-1 === this.current_index || this.options[this.current_index].classList.contains('hidden'))\r\n                ) {\r\n                  this.set(first)\r\n                }\r\n              }.bind(o)\r\n            }\r\n          }\r\n        } else if ('number' === o.type) {\r\n          // retrieve option values\r\n          o.min = o.e.getAttribute('min')\r\n          o.min_ref = parseFloat(o.min)\r\n          o.min_indicator = o.e.parentElement.parentElement.querySelector('.indicator-min')\r\n          if (o.min_indicator) {\r\n            o.min_indicator.addEventListener(\r\n              'click',\r\n              function () {\r\n                this.set(this.parsed.min)\r\n              }.bind(o)\r\n            )\r\n          }\r\n          o.max = o.e.getAttribute('max')\r\n          o.max_ref = parseFloat(o.max)\r\n          o.max_indicator = o.e.parentElement.parentElement.querySelector('.indicator-max')\r\n          if (o.max_indicator) {\r\n            o.max_indicator.addEventListener(\r\n              'click',\r\n              function () {\r\n                this.set(this.parsed.max)\r\n              }.bind(o)\r\n            )\r\n          }\r\n          o.ref = isNaN(o.min_ref) || isNaN(o.max_ref)\r\n          o.range = [o.min_ref, o.max_ref]\r\n          o.step = parseFloat(o.e.step) || 1\r\n          o.parsed = {min: undefined, max: undefined}\r\n          o.depends = {}\r\n          o.default_max = 'max' === o.default || 'last' === o.default\r\n          o.default_min = 'min' === o.default || 'first' === o.default\r\n          o.update = async function () {\r\n            const view = _u[this.view],\r\n              variable = valueOf(this.variable || view.y)\r\n            if (!view.time_range) view.time_range = {time: []}\r\n            let d = view.get ? view.get.dataset() : valueOf(this.dataset),\r\n              min = valueOf(this.min) || view.time,\r\n              max = valueOf(this.max) || view.time\r\n            if (patterns.minmax.test(min)) min = _u[this.min][min]\r\n            if (patterns.minmax.test(max)) max = _u[this.max][max]\r\n            this.parsed.min = isNaN(this.min_ref)\r\n              ? 'undefined' === typeof min\r\n                ? view.time_range.time[0]\r\n                : 'number' === typeof min\r\n                ? min\r\n                : min in site.data.variables\r\n                ? site.data.variables[min].info[d || site.data.variables[min].datasets[0]].min\r\n                : parseFloat(min)\r\n              : this.min_ref\r\n            this.parsed.max = isNaN(this.max_ref)\r\n              ? 'undefined' === typeof max\r\n                ? view.time_range.time[1]\r\n                : 'number' === typeof max\r\n                ? max\r\n                : max in site.data.variables\r\n                ? site.data.variables[max].info[d || site.data.variables[max].datasets[0]].max\r\n                : parseFloat(max)\r\n              : this.min_ref\r\n            if (this.default_min) {\r\n              this.current_default = this.parsed.min\r\n            } else if (this.default_max) {\r\n              this.current_default = this.parsed.max\r\n            }\r\n            if (this.ref && variable in site.data.variables) {\r\n              this.range[0] = this.e.min = isNaN(this.min_ref)\r\n                ? Math.max(view.time_range.time[0], this.parsed.min)\r\n                : this.min_ref\r\n              this.range[1] = this.e.max = isNaN(this.max_ref)\r\n                ? Math.min(view.time_range.time[1], this.parsed.max)\r\n                : this.max_ref\r\n              if (!this.depends[view.y]) {\r\n                this.depends[view.y] = true\r\n                add_dependency(view.y, {type: 'update', id: this.id})\r\n              }\r\n              if (this.source > this.parsed.max || this.source < this.parsed.min) this.reset()\r\n              this.variable = await site.data.get_variable(variable, this.view)\r\n            } else {\r\n              this.e.min = this.parsed.min\r\n              if (this.parsed.min > this.source || (!this.source && this.default_min)) this.set(this.parsed.min)\r\n              this.e.max = this.parsed.max\r\n              if (this.parsed.max < this.source || (!this.source && this.default_max)) this.set(this.parsed.max)\r\n            }\r\n          }.bind(o)\r\n          if (o.view) add_dependency(o.view, {type: 'update', id: o.id})\r\n          if (!(o.max in site.data.variables)) {\r\n            if (o.max in _u) {\r\n              add_dependency(o.max, {type: 'max', id: o.id})\r\n            } else o.e.max = parseFloat(o.max)\r\n          } else if (o.view) {\r\n            add_dependency(o.view + '_time', {type: 'max', id: o.id})\r\n          }\r\n          if (!(o.min in site.data.variables)) {\r\n            if (o.min in _u) {\r\n              add_dependency(o.min, {type: 'min', id: o.id})\r\n            } else o.e.min = parseFloat(o.min)\r\n          } else if (o.view) {\r\n            add_dependency(o.view + '_time', {type: 'min', id: o.id})\r\n          }\r\n          if ('undefined' !== typeof o.default) {\r\n            if (patterns.number.test(o.default)) {\r\n              o.default = Number(o.default)\r\n            } else\r\n              o.reset = o.default_max\r\n                ? function () {\r\n                    if (this.range) {\r\n                      this.current_default = valueOf(this.range[1])\r\n                      this.set(this.current_default)\r\n                    }\r\n                  }.bind(o)\r\n                : o.default_max\r\n                ? function () {\r\n                    if (this.range) {\r\n                      this.current_default = valueOf(this.range[0])\r\n                      this.set(this.current_default)\r\n                    }\r\n                  }.bind(o)\r\n                : this.default in _u\r\n                ? function () {\r\n                    this.current_default = valueOf(this.default)\r\n                    this.set(this.current_default)\r\n                  }.bind(o)\r\n                : function () {}\r\n          }\r\n          if (o.variable) {\r\n            const d = -1 === site.metadata.datasets.indexOf(o.dataset) ? defaults.dataset : o.dataset\r\n            if (o.variable in _u) {\r\n              add_dependency(o.variable, {type: 'update', id: o.id})\r\n            } else if (o.variable in site.data.variables) {\r\n              o.e.min = o.min = o.parsed.min = o.range[0] = site.data.variables[o.variable].info[d].min\r\n              o.e.max = o.max = o.parsed.max = o.range[1] = site.data.variables[o.variable].info[d].max\r\n            }\r\n          }\r\n        } else if ('checkbox' === o.type) {\r\n          o.source = []\r\n          o.current_index = []\r\n          o.default = o.default.split(',')\r\n        }\r\n        if (Array.isArray(o.values)) {\r\n          if (!o.values.length) {\r\n            o.values = []\r\n            if (o.options.length) o.options.forEach(e => o.values.push(e.value || e.dataset.value))\r\n          }\r\n          if (o.values.length && !(o.default in _u) && -1 === o.values.indexOf(o.default)) {\r\n            o.default = parseInt(o.default)\r\n            o.default = o.values.length > o.default ? o.values[o.default] : ''\r\n          }\r\n        }\r\n\r\n        // add listeners\r\n        if (combobox || 'select' === o.type || 'number' === o.type || 'intext' === o.type) {\r\n          o.e.addEventListener('change', o.listen)\r\n          if (\r\n            o.e.parentElement.lastElementChild &&\r\n            o.e.parentElement.lastElementChild.classList.contains('select-reset')\r\n          ) {\r\n            o.e.parentElement.lastElementChild.addEventListener('click', o.reset)\r\n          }\r\n        } else if ('switch' === o.type) {\r\n          if ('boolean' !== typeof o.default) o.default = o.e.checked\r\n          o.e.addEventListener('change', o.listen)\r\n        } else if (o.listen) {\r\n          o.options.forEach(oi => oi.addEventListener('click', o.listen))\r\n        }\r\n        // initialize settings inputs\r\n        if (patterns.settings.test(o.id)) {\r\n          o.setting = o.id.replace(patterns.settings, '')\r\n          if (null == o.default && o.setting in site.settings) o.default = site.settings[o.setting]\r\n          add_dependency(o.id, {type: 'setting', id: o.id})\r\n        }\r\n        if (!o.view) o.view = defaults.dataview\r\n        const v = site.url_options[o.id] || storage.get(o.id.replace(patterns.settings, ''))\r\n        if (v) {\r\n          o.set(patterns.bool.test(v) ? !!v || 'true' === v : v)\r\n        } else o.reset && o.reset()\r\n      }\r\n    })\r\n    // initialize dataviews\r\n    Object.keys(site.dataviews).forEach(k => {\r\n      const e = site.dataviews[k]\r\n      _u[k] = e\r\n      e.id = k\r\n      e.value = function () {\r\n        if (this.get) {\r\n          this.reparse()\r\n          return (\r\n            '' +\r\n            this.parsed.dataset +\r\n            _u._entity_filter.entities.size +\r\n            site.data.inited[this.parsed.dataset] +\r\n            this.parsed.id_source +\r\n            Object.keys(this.parsed.ids) +\r\n            this.parsed.features +\r\n            this.parsed.variables +\r\n            site.settings.summary_selection\r\n          )\r\n        }\r\n      }.bind(e)\r\n      if ('string' === typeof e.palette && e.palette in _u) {\r\n        add_dependency(e.palette, {type: 'dataview', id: k})\r\n      }\r\n      if ('string' === typeof e.dataset && e.dataset in _u) {\r\n        add_dependency(e.dataset, {type: 'dataview', id: k})\r\n      }\r\n      if ('string' === typeof e.ids && e.ids in _u) {\r\n        add_dependency(e.ids, {type: 'dataview', id: k})\r\n      }\r\n      e.time_range = {dataset: '', variable: '', index: [], time: [], filtered: []}\r\n      add_dependency(k, {type: 'time_range', id: k})\r\n      add_dependency('_base_filter', {type: 'dataview', id: k})\r\n      add_dependency('_entity_filter', {type: 'dataview', id: k})\r\n      if (e.x in _u) add_dependency(e.x, {type: 'time_range', id: k})\r\n      if (e.y in _u) add_dependency(e.y, {type: 'time_range', id: k})\r\n      if (e.features)\r\n        Object.keys(e.features).forEach(f => {\r\n          if ('string' === typeof e.features[f] && e.features[f] in _u) {\r\n            add_dependency(e.features[f], {type: 'dataview', id: k})\r\n          }\r\n        })\r\n      if (e.variables)\r\n        e.variables.forEach(v => {\r\n          if ('variable' in v) {\r\n            if (v.variable in _u) {\r\n              add_dependency(v.variable, {type: 'dataview', id: k})\r\n            }\r\n          } else e.variables.splice(i, 1)\r\n          if ('type' in v) {\r\n            if (v.type in _u) {\r\n              add_dependency(v.type, {type: 'dataview', id: k})\r\n            }\r\n          } else v.type = '='\r\n          if ('value' in v) {\r\n            if (v.value in _u) {\r\n              add_dependency(v.value, {type: 'dataview', id: k})\r\n            }\r\n          } else v.value = 0\r\n        })\r\n      compile_dataview(e)\r\n      conditionals.dataview(e)\r\n      e.reparse()\r\n    })\r\n    // initialize outputs\r\n    document.querySelectorAll('.auto-output').forEach(elements.init_output)\r\n\r\n    // make filter popup\r\n    e = page.modal.filter\r\n    e.body.className = 'filter-dialog'\r\n\r\n    // // entity filter\r\n    e.body.appendChild((e.entity_filters = document.createElement('div')))\r\n    e.entity_filters.appendChild(document.createElement('p'))\r\n    e.entity_filters.lastElementChild.className = 'h6 text-muted'\r\n    e.entity_filters.lastElementChild.innerText = 'Select Entities'\r\n    e.entity_filters.appendChild(document.createElement('div'))\r\n    e.entity_filters.lastElementChild.className = 'row'\r\n    e.entity_inputs = {}\r\n    Object.keys(site.data.loaded)\r\n      .reverse()\r\n      .forEach(d => {\r\n        const u = elements.combobox.create(d, void 0, {search: true, multi: true, clearable: true}, 'filter.' + d)\r\n        e.entity_inputs[d] = u\r\n        e.entity_filters.lastElementChild.appendChild(document.createElement('div'))\r\n        e.entity_filters.lastElementChild.lastElementChild.className = 'col-sm'\r\n        e.entity_filters.lastElementChild.lastElementChild.appendChild(u.e.parentElement)\r\n        u.e.parentElement.classList.add('form-floating')\r\n        u.listbox.classList.add('multi')\r\n        u.option_sets = {}\r\n        u.dataset = d\r\n        u.loader = function () {\r\n          site.data.retrieve(this.dataset, site.data.info[this.dataset].site_file)\r\n          this.e.removeEventListener('click', this.loader)\r\n        }.bind(u)\r\n        if (!site.data.loaded[d]) {\r\n          u.e.addEventListener('click', u.loader)\r\n        }\r\n        u.onchange = function () {\r\n          conditionals.id_filter()\r\n          request_queue('_entity_filter')\r\n        }.bind(u)\r\n        u.set_current = conditionals.set_current.bind(u)\r\n        fill_ids_options(\r\n          u,\r\n          d,\r\n          u.option_sets,\r\n          function () {\r\n            this.set_current()\r\n            toggle_input(this, !!this.options.length)\r\n            Object.keys(this.values).forEach(id => {\r\n              _u._entity_filter.entities.set(id, site.data.entities[id])\r\n            })\r\n            _u._entity_filter.registered[d] = true\r\n            this.set(this.id in site.url_options ? site.url_options[this.id].split(',') : -1)\r\n          }.bind(u)\r\n        )\r\n        toggle_input(u, !!u.options.length)\r\n      })\r\n\r\n    // // variable filter\r\n    e.body.appendChild((e.variable_filters = document.createElement('div')))\r\n    e.variable_filters.appendChild(document.createElement('p'))\r\n    e.variable_filters.lastElementChild.className = 'h6 text-muted'\r\n    e.variable_filters.lastElementChild.innerText = 'Variable Conditions'\r\n\r\n    function add_filter_condition(event, presets) {\r\n      if ('A' === event.target.tagName) {\r\n        presets = presets || {}\r\n        const e = document.createElement('tr'),\r\n          f = {\r\n            e,\r\n            index: _u._base_filter.c.size,\r\n            variable: event.target.dataset.value,\r\n            component: presets.component || 'last',\r\n            operator: presets.operator || '>=',\r\n            value: presets.value || '',\r\n            active: true,\r\n            id: 'vf' + _u._base_filter.c.size,\r\n            passed: 0,\r\n            failed: 0,\r\n            info: site.data.variables[event.target.dataset.value].info,\r\n            view: _u[defaults.dataview],\r\n          },\r\n          d = f.view.get.dataset(),\r\n          range = f.info[d].time_range,\r\n          times = site.data.meta.overall.value\r\n        e.setAttribute('data-index', _u._base_filter.c.size)\r\n        _u._base_filter.c.set(_u._base_filter.c.size, f)\r\n        if (presets.time_component) f.component = String(times[f.component])\r\n\r\n        let ee\r\n        // variable name\r\n        e.appendChild(document.createElement('td'))\r\n        e.lastElementChild.appendChild((ee = document.createElement('p')))\r\n        ee.className = 'cell-text'\r\n        ee.innerText = event.target.innerText + (range ? ' (' + times[range[0]] + '-' + times[range[1]] + ')' : '')\r\n\r\n        // filter result\r\n        e.appendChild(document.createElement('td'))\r\n        e.lastElementChild.appendChild((ee = document.createElement('p')))\r\n        ee.className = 'cell-text'\r\n        ee.innerText = '0/0'\r\n\r\n        // active switch\r\n        e.appendChild(document.createElement('td'))\r\n        e.lastElementChild.appendChild((ee = document.createElement('label')))\r\n        ee.innerText = 'Active'\r\n        ee.className = 'filter-label'\r\n        ee.id = f.id + '_switch'\r\n        e.lastElementChild.appendChild((ee = document.createElement('div')))\r\n        ee.className = 'form-check form-switch filter-form-input'\r\n        ee.appendChild((ee = document.createElement('input')))\r\n        ee.className = 'form-check-input'\r\n        ee.type = 'checkbox'\r\n        ee.role = 'switch'\r\n        ee.setAttribute('aria-labelledby', f.id + '_switch')\r\n        ee.checked = true\r\n        ee.addEventListener(\r\n          'change',\r\n          function () {\r\n            f.active = !f.active\r\n            request_queue('_base_filter')\r\n          }.bind(f)\r\n        )\r\n\r\n        // component combobox\r\n        e.appendChild(document.createElement('td'))\r\n        e.lastElementChild.appendChild((ee = document.createElement('label')))\r\n        ee.innerText = 'Component'\r\n        ee.className = 'filter-label'\r\n        ee.id = f.id + '_component'\r\n        const comp_select = elements.combobox.create('component', filter_components.Time)\r\n        comp_select.default = f.component\r\n        comp_select.set(f.component)\r\n        e.lastElementChild.appendChild(comp_select.e.parentElement)\r\n        comp_select.e.parentElement.removeChild(comp_select.e.parentElement.lastElementChild)\r\n        comp_select.e.parentElement.classList.add('filter-form-input')\r\n        comp_select.e.setAttribute('aria-labelledby', f.id + '_component')\r\n        comp_select.input_element.setAttribute('aria-labelledby', f.id + '_component')\r\n        comp_select.onchange = function () {\r\n          f.component = this.value()\r\n          request_queue('_base_filter')\r\n        }.bind(comp_select)\r\n\r\n        // operator select\r\n        e.appendChild(document.createElement('td'))\r\n        e.lastElementChild.appendChild((ee = document.createElement('label')))\r\n        ee.innerText = 'Operator'\r\n        ee.className = 'filter-label'\r\n        ee.id = f.id + '_operator'\r\n        e.lastElementChild.appendChild((ee = document.createElement('select')))\r\n        ee.className = 'form-select filter-form-input'\r\n        ee.setAttribute('aria-labelledby', f.id + '_operator')\r\n        ee.addEventListener('change', e => {\r\n          f.operator = e.target.selectedOptions[0].value\r\n          request_queue('_base_filter')\r\n        })\r\n        ;['>=', '=', '!=', '<='].forEach(k => {\r\n          ee.appendChild(document.createElement('option'))\r\n          ee.lastElementChild.value = ee.lastElementChild.innerText = k\r\n          if (k === f.operator) ee.lastElementChild.selected = true\r\n        })\r\n\r\n        // value input\r\n        e.appendChild(document.createElement('td'))\r\n        e.lastElementChild.appendChild((ee = document.createElement('label')))\r\n        ee.innerText = 'Value'\r\n        ee.className = 'filter-label'\r\n        ee.id = f.id + '_value'\r\n        const value_select = elements.combobox.create('component', ['min', 'q1', 'median', 'mean', 'q3', 'max'])\r\n        value_select.value_type = 'number'\r\n        value_select.default = f.value\r\n        value_select.set(f.value)\r\n        e.lastElementChild.appendChild(value_select.e.parentElement)\r\n        value_select.e.parentElement.removeChild(value_select.e.parentElement.lastElementChild)\r\n        value_select.e.parentElement.classList.add('filter-form-input')\r\n        value_select.e.setAttribute('aria-labelledby', f.id + '_value')\r\n        value_select.input_element.setAttribute('aria-labelledby', f.id + '_value')\r\n        value_select.onchange = async function (f) {\r\n          f.value = this.value()\r\n          if (patterns.number.test(f.value)) {\r\n            f.value = Number(f.value)\r\n            f.value_source = ''\r\n          } else {\r\n            f.view.reparse()\r\n            const v = await site.data.get_variable(f.variable, f.view.id),\r\n              s = v && v.views[f.view.id].summaries[f.view.parsed.dataset]\r\n            if (s && f.value in s) {\r\n              const a = f.view.parsed.variable_values[f.index]\r\n              f.value_source = f.value\r\n              f.value = s[f.value][a.comp_fun(a, f.view.parsed)]\r\n            }\r\n          }\r\n          request_queue('_base_filter')\r\n        }.bind(value_select, f)\r\n\r\n        // remove button\r\n        e.appendChild(document.createElement('td'))\r\n        e.lastElementChild.appendChild((ee = document.createElement('label')))\r\n        ee.innerText = 'Remove'\r\n        ee.className = 'filter-label'\r\n        ee.id = f.id + '_remove'\r\n        e.lastElementChild.appendChild((ee = document.createElement('button')))\r\n        ee.className = 'btn-close filter-form-input'\r\n        ee.type = 'button'\r\n        ee.setAttribute('aria-labelledby', f.id + '_remove')\r\n        ee.addEventListener(\r\n          'mouseup',\r\n          function (e) {\r\n            if (1 === e.which) {\r\n              this.e.parentElement.removeChild(this.e)\r\n              _u._base_filter.c.delete(this.index)\r\n              _u._base_filter.c.forEach((f, i) => {\r\n                if (i > this.index) f.index -= 1\r\n              })\r\n              request_queue('_base_filter')\r\n            }\r\n          }.bind(f)\r\n        )\r\n        request_queue('_base_filter')\r\n        page.modal.filter.variable_filters.lastElementChild.lastElementChild.appendChild(e)\r\n      }\r\n    }\r\n\r\n    // variable filter dropdown\r\n    e.variable_filters.appendChild((ee = document.createElement('div')))\r\n    ee.className = 'row'\r\n\r\n    ee.appendChild(document.createElement('div'))\r\n    ee.lastElementChild.className = 'col'\r\n    ee.lastElementChild.appendChild((c = document.createElement('div')))\r\n    c.className = 'dropdown'\r\n    c.appendChild(document.createElement('button'))\r\n    c.lastElementChild.type = 'button'\r\n    c.lastElementChild.id = 'filter_variable_dropdown'\r\n    c.lastElementChild.className = 'btn dropdown-toggle'\r\n    c.lastElementChild.setAttribute('data-bs-toggle', 'dropdown')\r\n    c.lastElementChild.setAttribute('aria-expanded', false)\r\n    c.lastElementChild.innerText = 'Add Variable Condition'\r\n    c.appendChild(document.createElement('ul'))\r\n    c.lastElementChild.addEventListener('click', add_filter_condition.bind(e))\r\n    c.lastElementChild.className = 'dropdown-menu'\r\n    c.lastElementChild.setAttribute('aria-labelledby', 'filter_variable_dropdown')\r\n    Object.keys(site.data.variables).forEach(k => {\r\n      if (!site.data.variables[k].is_time) {\r\n        const e = document.createElement('li')\r\n        e.appendChild(document.createElement('a'))\r\n        e.lastElementChild.className = 'dropdown-item'\r\n        e.lastElementChild.href = '#'\r\n        e.lastElementChild.dataset.value = k\r\n        e.lastElementChild.innerText = (site.data.variable_info[k] && site.data.variable_info[k].short_name) || k\r\n        c.lastElementChild.appendChild(e)\r\n      }\r\n    })\r\n\r\n    // variable filter table\r\n    e.variable_filters.appendChild((ee = document.createElement('table')))\r\n    ee.className = 'table'\r\n    ee.appendChild((ee = document.createElement('thead')))\r\n    ee.className = 'filter-header'\r\n    e.variable_filters.lastElementChild.appendChild(document.createElement('tbody'))\r\n    e.variable_filters.lastElementChild.lastElementChild.className = 'filter-body'\r\n    ee = ee.appendChild((ee = document.createElement('tr')))\r\n    ;['Variable', 'Result', 'Active', 'Component', 'Operator', 'Value', 'Remove'].forEach(h => {\r\n      ee.appendChild(document.createElement('th'))\r\n      if ('Component' === h || 'Result' === h) {\r\n        const l =\r\n          'Component' === h\r\n            ? {\r\n                wrapper: document.createElement('label'),\r\n                id: 'filter_component_header',\r\n                note: 'Component refers to which single value to filter on for each entity; select a dynamic time reference, or enter a time.',\r\n              }\r\n            : {\r\n                wrapper: document.createElement('label'),\r\n                id: 'filter_result_header',\r\n                note: 'Passing / total entities across loaded datasets.',\r\n              }\r\n        ee.lastElementChild.appendChild(l.wrapper)\r\n        ee.lastElementChild.className = 'has-note'\r\n        l.wrapper.innerText = h\r\n        l.wrapper.id = l.id\r\n        l.wrapper.setAttribute('data-of', l.id)\r\n        l.wrapper.setAttribute('aria-description', l.note)\r\n        ee.lastElementChild.addEventListener('mouseover', tooltip_trigger.bind(l))\r\n      } else {\r\n        ee.lastElementChild.innerText = h\r\n      }\r\n    })\r\n\r\n    keys._u = Object.keys(_u)\r\n    if (site.query) {\r\n      site.parsed_query = site.data.parse_query(site.query)\r\n      if (site.parsed_query.variables.conditions.length) {\r\n        site.parsed_query.variables.conditions.forEach(f => {\r\n          const info = site.data.variable_info[f.name]\r\n          if (info)\r\n            add_filter_condition({target: {tagName: 'A', dataset: {value: f.name}, innerText: info.short_name}}, f)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  function gtag() {\r\n    if (site.settings.tracking) window.dataLayer.push(arguments)\r\n  }\r\n\r\n  function valueOf(v) {\r\n    if (v in _u) v = _u[v]\r\n    if (v && v.value) v = valueOf(v.value())\r\n    return v\r\n  }\r\n\r\n  function tooltip_trigger() {\r\n    if (site.settings.hide_tooltips || this.id === page.tooltip.showing) return void 0\r\n    page.tooltip.showing = this.id\r\n    page.tooltip.e.firstElementChild.innerText = this.note\r\n    page.tooltip.e.classList.remove('hidden')\r\n    const p = this.wrapper.getBoundingClientRect(),\r\n      t = page.tooltip.e.getBoundingClientRect()\r\n    page.tooltip.e.style.left = Math.max(0, Math.min(p.x, p.x + p.width / 2 - t.width / 2)) + 'px'\r\n    page.tooltip.e.style.top = p.y + (p.y < t.height ? p.height + 5 : -t.height - 5) + 'px'\r\n  }\r\n\r\n  function tooltip_clear(e) {\r\n    if (\r\n      page.tooltip.showing &&\r\n      ('blur' === e.type || page.tooltip.showing !== (e.target.getAttribute('data-of') || e.target.id))\r\n    ) {\r\n      page.tooltip.showing = ''\r\n      page.tooltip.e.classList.add('hidden')\r\n    }\r\n  }\r\n\r\n  async function retrieve_layer(u, source, callback) {\r\n    const mapId = source.name ? source.name + (source.time || '') : source.url\r\n    if (source.url in site.map._raw) {\r\n      process_layer(source, u)\r\n      site.map._queue[mapId].retrieved = true\r\n      callback && callback()\r\n    } else {\r\n      if (site.map._queue[mapId] && 'retrieved' in site.map._queue[mapId]) {\r\n        if (callback) {\r\n          if (!site.map._queue[mapId].callbacks) site.map._queue[mapId].callbacks = []\r\n          site.map._queue[mapId].callbacks.push(callback)\r\n        }\r\n      } else {\r\n        site.map._queue[mapId].retrieved = false\r\n        const f = new window.XMLHttpRequest()\r\n        f.onreadystatechange = () => {\r\n          if (4 === f.readyState && 200 === f.status) {\r\n            site.map._raw[source.url] = f.responseText\r\n            if (source.name) {\r\n              site.map._queue[mapId].retrieved = true\r\n            }\r\n            if (site.map._queue[mapId].callbacks) {\r\n              if (callback) site.map._queue[mapId].callbacks.push(callback)\r\n              site.map._queue[mapId].callbacks.forEach(f => f())\r\n            } else callback && callback()\r\n          }\r\n        }\r\n        f.open('GET', source.url, true)\r\n        f.send()\r\n      }\r\n    }\r\n  }\r\n\r\n  function process_layer(source, u) {\r\n    let p, id\r\n    const has_time = 'time' in source,\r\n      layerId = source.name + (has_time ? source.time : '')\r\n    site.map[u.id]._layers[layerId] = L.geoJSON(JSON.parse(site.map._raw[source.url]), {\r\n      onEachFeature: (f, l) => {\r\n        l.on({\r\n          mouseover: elements.map.mouseover.bind(u),\r\n          mouseout: elements.map.mouseout.bind(u),\r\n          click: elements.map.click.bind(u),\r\n        })\r\n        l.setStyle({weight: 0, fillOpacity: 0})\r\n        l.source = source\r\n        p = l.feature.properties\r\n        id = p[source.id_property]\r\n        if (!(id in site.data.entities) && patterns.leading_zeros.test(id))\r\n          id = p[source.id_property] = id.replace(patterns.leading_zeros, '')\r\n        if (id in site.data.entities) {\r\n          if (!('layer' in site.data.entities[id])) site.data.entities[id].layer = {}\r\n        } else {\r\n          site.data.entities[id] = {layer: {}, features: {id: id}}\r\n        }\r\n        if (has_time) {\r\n          if (!(u.id in site.data.entities[id].layer)) site.data.entities[id].layer[u.id] = {has_time: true}\r\n          site.data.entities[id].layer[u.id][source.time] = l\r\n        } else site.data.entities[id].layer[u.id] = l\r\n        l.entity = site.data.entities[id]\r\n        if (site.data.entities[id].features)\r\n          Object.keys(p).forEach(f => {\r\n            if (!(f in site.data.entities[id].features)) {\r\n              if (\r\n                'name' === f.toLowerCase() &&\r\n                (!('name' in site.data.entities[id].features) ||\r\n                  site.data.entities[id].features.id === site.data.entities[id].features.name)\r\n              ) {\r\n                site.data.entities[id].features[f.toLowerCase()] = p[f]\r\n              } else {\r\n                site.data.entities[id].features[f] = p[f]\r\n              }\r\n            }\r\n          })\r\n      },\r\n    })\r\n    site.data.inited[layerId + u.id] = true\r\n    if (site.map._waiting && site.map._waiting[source.name]) {\r\n      for (let i = site.map._waiting[source.name].length; i--; ) {\r\n        request_queue(site.map._waiting[source.name][i])\r\n      }\r\n    }\r\n  }\r\n\r\n  function show_overlay(u, o, time) {\r\n    let i = 0,\r\n      source = 'string' === typeof o.source ? o.source : ''\r\n    if (!source && o.source) {\r\n      for (i = o.source.length; i--; ) {\r\n        if (!o.source[i].time || time === o.source[i].time) {\r\n          if (o.source[i].name) delete o.source[i].name\r\n          source = o.source[i].url\r\n          break\r\n        }\r\n      }\r\n    }\r\n    if (source) {\r\n      if (source in site.map._raw) {\r\n        if (!(source in site.map[u.id]._layers)) {\r\n          const s = {}\r\n          if (!site.map._queue[source].processed) {\r\n            site.map._queue[source].property_summaries = s\r\n          }\r\n          site.map[u.id]._layers[source] = L.geoJSON(JSON.parse(site.map._raw[source]), {\r\n            pointToLayer: (point, coords) => L.circleMarker(coords),\r\n            onEachFeature: l => {\r\n              const props = l.properties\r\n              if (props) {\r\n                Object.keys(props).forEach(f => {\r\n                  const v = props[f]\r\n                  if ('number' === typeof v) {\r\n                    if (!(f in s)) s[f] = [Infinity, -Infinity]\r\n                    if (v < s[f][0]) s[f][0] = v\r\n                    if (v > s[f][1]) s[f][1] = v\r\n                  }\r\n                })\r\n              }\r\n            },\r\n          }).on('mouseover', l => {\r\n            const layer = l.layer\r\n            if (layer && !layer._tooltip) {\r\n              const props = layer.feature && layer.feature.properties\r\n              if (props) {\r\n                const e = document.createElement('table')\r\n                Object.keys(props).forEach(f => {\r\n                  const v = props[f],\r\n                    r = document.createElement('tr')\r\n                  r.appendChild(document.createElement('td'))\r\n                  r.appendChild(document.createElement('td'))\r\n                  r.firstElementChild.innerText = f\r\n                  r.lastElementChild.innerText = v\r\n                  e.appendChild(r)\r\n                })\r\n                layer.bindTooltip(e)\r\n                layer.openTooltip()\r\n              }\r\n            }\r\n          })\r\n          Object.keys(s).forEach(f => {\r\n            s[f].push(s[f][1] - s[f][0])\r\n            if (!s[f][2]) delete s[f]\r\n          })\r\n          site.map._overlay_property_selectors.forEach(u => {\r\n            if (!(source in u.option_sets)) {\r\n              fill_overlay_properties_options(u, source, u.option_sets)\r\n              u.dataset = source\r\n              u.variable = ''\r\n            }\r\n          })\r\n        }\r\n        site.map._overlay_property_selectors.forEach(u => {\r\n          u.dataset = source\r\n          conditionals.options(u)\r\n        })\r\n        u.overlay.clearLayers()\r\n        let n = 0\r\n        const summaries = site.settings.circle_property && site.map._queue[source].property_summaries,\r\n          prop_summary = summaries && summaries[site.settings.circle_property]\r\n        site.map[u.id]._layers[source].eachLayer(l => {\r\n          if (o.filter) {\r\n            for (let i = o.filter.length; i--; ) {\r\n              if (!o.filter[i].check(l.feature.properties[o.filter[i].feature], o.filter[i].value)) return\r\n            }\r\n          }\r\n          n++\r\n          l.setRadius(\r\n            prop_summary\r\n              ? ((l.feature.properties[site.settings.circle_property] - prop_summary[0]) / prop_summary[2] + 0.5) *\r\n                  site.settings.circle_radius\r\n              : site.settings.circle_radius\r\n          ).setStyle({\r\n            weight: site.settings.polygon_outline,\r\n            color: 'white',\r\n            opacity: 0.5,\r\n            fillOpacity: 0.5,\r\n            fillColor: 'black',\r\n          })\r\n          l.addTo(u.overlay)\r\n        })\r\n        if (n) u.overlay_control.addTo(u.map)\r\n      } else return retrieve_layer(u, o.source[i], show_overlay.bind(null, u, o, time))\r\n    }\r\n  }\r\n  function component_fun(c) {\r\n    if ('string' === typeof c && patterns.number.test(c)) {\r\n      c = site.data.meta.overall.value.indexOf(Number(c))\r\n      if (-1 === c)\r\n        return function () {\r\n          return NaN\r\n        }\r\n    }\r\n    return 'number' === typeof c\r\n      ? time_funs.number.bind(c)\r\n      : c in time_funs\r\n      ? time_funs[c]\r\n      : function () {\r\n          return NaN\r\n        }\r\n  }\r\n  function compile_dataview(v) {\r\n    v.times = []\r\n    if (v.time_filters) {\r\n      v.time_filters = [\r\n        {variable: defaults.time, type: '>=', value: 'filter.time_min'},\r\n        {variable: defaults.time, type: '<=', value: 'filter.time_max'},\r\n      ]\r\n      add_dependency(v.id + '_time', {type: 'min', id: 'filter.time_min'})\r\n      add_dependency(v.id + '_time', {type: 'max', id: 'filter.time_max'})\r\n      v.time_filters.forEach(f => {\r\n        if (f.value in _u) {\r\n          add_dependency(f.value, {type: 'time_filters', id: v.id})\r\n        }\r\n      })\r\n    }\r\n    v.selection = {ids: {}, features: {}, variables: [], dataset: {}, filtered: {}, full_filter: {}, all: {}}\r\n    v.n_selected = {ids: 0, features: 0, variables: 0, dataset: 0, filtered: 0, full_filter: 0, all: 0}\r\n    v.get = {\r\n      dataset: function () {\r\n        return (\r\n          valueOf('string' === typeof v.dataset && v.dataset in _u ? _u[v.dataset].value() : v.dataset) ||\r\n          defaults.dataset\r\n        )\r\n      },\r\n      ids: function (single) {\r\n        const id = valueOf('string' === typeof v.ids && v.ids in _u ? _u[v.ids].value() : v.ids)\r\n        if ('' !== id && -1 != id) {\r\n          if (single) return id\r\n          const ids = {},\r\n            e = site.data.entities[id]\r\n          ids[id] = true\r\n          if (e && e.relations) Object.keys(e.relations.children).forEach(k => (ids[k] = true))\r\n          return ids\r\n        } else if (!single && _u._entity_filter.selected.length) {\r\n          return _u._entity_filter.select_ids\r\n        }\r\n        return false\r\n      },\r\n      features: function () {\r\n        let s = ''\r\n        v.features &&\r\n          Object.keys(v.features).forEach(k => {\r\n            s += k + valueOf(v.features[k])\r\n          })\r\n        return s\r\n      },\r\n      variables: function () {\r\n        if (v.variables || _u._base_filter.c.size) {\r\n          if (!v.parsed.variable_values.length) v.reparse()\r\n          let s = ''\r\n          v.parsed.variable_values.forEach(vi => {\r\n            s += vi.name + vi.operator + vi.component + vi.value + vi.active\r\n          })\r\n          return s\r\n        } else return ''\r\n      },\r\n      time_filters: function () {\r\n        let s = ''\r\n        v.time_filters &&\r\n          v.time_filters.forEach(f => {\r\n            s += f.value in _u ? valueOf(f.value) : f.value\r\n          })\r\n        return s\r\n      },\r\n    }\r\n    v.ids_check = function (a, b) {\r\n      return !a || b in a\r\n    }\r\n    v.parsed = {\r\n      dataset: '',\r\n      ids: '',\r\n      features: '',\r\n      variables: '',\r\n      time_filters: '',\r\n      time_agg: 0,\r\n      id_source: '',\r\n      variable_values: [],\r\n      feature_values: {},\r\n    }\r\n    v.reparse = function () {\r\n      this.parsed.dataset = this.get.dataset()\r\n      this.parsed.ids = this.get.ids()\r\n      this.parsed.time_filters = this.get.time_filters()\r\n      this.parsed.time_agg =\r\n        this.parsed.dataset in site.data.meta.times\r\n          ? valueOf(this.time_agg) - site.data.meta.times[this.parsed.dataset].range[0]\r\n          : 0\r\n      if (\r\n        'string' === typeof this.ids &&\r\n        this.ids in _u &&\r\n        (('virtual' === _u[this.ids].type && _u[this.ids].source in _u) ||\r\n          ('depends' in _u[this.ids] && _u[this.ids].depends in _u))\r\n      ) {\r\n        this.parsed.id_source =\r\n          'virtual' === _u[this.ids].type ? valueOf(_u[_u[this.ids].source].dataset) : _u[_u[this.ids].depends].value()\r\n      }\r\n      if (this.features) {\r\n        this.parsed.feature_values = {}\r\n        for (let k in this.features)\r\n          if (k in this.features) {\r\n            this.parsed.feature_values[k] = {value: valueOf(this.features[k])}\r\n            this.parsed.feature_values[k].operator =\r\n              'string' === typeof this.parsed.feature_values[k].value ? 'equals' : 'includes'\r\n          }\r\n        this.parsed.features = this.get.features()\r\n      } else this.parsed.features = ''\r\n      this.parsed.variable_values = []\r\n      if (_u._base_filter.c.size)\r\n        _u._base_filter.c.forEach(f => {\r\n          this.parsed.variable_values.push({\r\n            filter: f,\r\n            name: f.variable,\r\n            range: site.data.variables[f.variable].info[this.parsed.dataset].time_range,\r\n            operator: f.operator,\r\n            value: f.value ? Number(f.value) : NaN,\r\n            value_type: 'number',\r\n            component: f.component,\r\n            active: f.active,\r\n            comp_fun: component_fun(f.component),\r\n          })\r\n        })\r\n      if (this.variables || this.parsed.variable_values.length) {\r\n        if (this.variables)\r\n          for (let i = this.variables.length, v; i--; ) {\r\n            v = valueOf(this.variables[i].value)\r\n            this.parsed.variable_values.push({\r\n              name: valueOf(this.variables[i].variable),\r\n              operator: valueOf(this.variables[i].type),\r\n              value: v,\r\n              value_type: typeof v,\r\n            })\r\n          }\r\n        this.parsed.variables = this.get.variables()\r\n      } else this.parsed.variables = ''\r\n    }.bind(v)\r\n    v.checks = {\r\n      dataset: function (e) {\r\n        return this.parsed.dataset === e.group\r\n      }.bind(v),\r\n      ids: function (e) {\r\n        return e.features && this.ids_check(this.parsed.ids, e.features.id)\r\n      }.bind(v),\r\n      features: function (e) {\r\n        if (e.features) {\r\n          let k,\r\n            v,\r\n            pass = true\r\n          for (k in this.parsed.feature_values) {\r\n            if (k in this.parsed.feature_values) {\r\n              v = this.parsed.feature_values[k]\r\n              pass = DataHandler.checks[v.operator](v.value, valueOf(e.features[k]))\r\n              if (!pass) break\r\n            }\r\n          }\r\n          return pass\r\n        } else return true\r\n      }.bind(v),\r\n      variables: function (e) {\r\n        if (e.data) {\r\n          let pass = true\r\n          for (let i = this.parsed.variable_values.length; i--; ) {\r\n            const v = this.parsed.variable_values[i]\r\n            if (v.active && !isNaN(v.value)) {\r\n              const ev = e.get_value(v.name, v.comp_fun(v, this.parsed)),\r\n                ck = !isNaN(ev) && DataHandler.checks[v.operator](ev, v.value)\r\n              v.filter[ck ? 'passed' : 'failed']++\r\n              if (pass && !ck) pass = false\r\n            } else {\r\n              v.filter.failed++\r\n            }\r\n          }\r\n          return pass\r\n        } else return true\r\n      }.bind(v),\r\n    }\r\n    v.check = function (e) {\r\n      return {\r\n        ids: !this.ids || this.checks.ids(e),\r\n        features: !this.features || this.checks.features(e),\r\n        variables: (!this.variables && !_u._base_filter.c.size) || this.checks.variables(e),\r\n        dataset: !this.dataset || this.checks.dataset(e),\r\n      }\r\n    }.bind(v)\r\n  }\r\n\r\n  function global_update() {\r\n    meta.retain_state = false\r\n    keys._u.forEach(request_queue)\r\n  }\r\n\r\n  function global_reset() {\r\n    meta.retain_state = false\r\n    keys._u.forEach(k => {\r\n      if (!_u[k].setting && _u[k].reset) {\r\n        _u[k].reset()\r\n        request_queue(k)\r\n      }\r\n    })\r\n  }\r\n\r\n  function request_queue(id) {\r\n    queue[id] = true\r\n    if (queue._timeout > 0) clearTimeout(queue._timeout)\r\n    queue._timeout = setTimeout(run_queue, 20)\r\n    meta.lock_after = id\r\n  }\r\n\r\n  function run_queue() {\r\n    if (queue._timeout > 0) clearTimeout(queue._timeout)\r\n    queue._timeout = -1\r\n    keys._u.forEach(k => {\r\n      if (queue[k]) {\r\n        const d = refresh_conditions(k)\r\n        if (d) {\r\n          if (!(k in site.data.data_queue[d])) site.data.data_queue[d][k] = run_queue\r\n          return false\r\n        }\r\n        queue[k] = false\r\n      }\r\n    })\r\n    let k = get_options_url()\r\n    if (site.data.inited.first && k !== site.state) {\r\n      site.state = k\r\n      Object.keys(site.url_options).forEach(s => {\r\n        if (patterns.embed_setting.test(s))\r\n          k +=\r\n            '&' +\r\n            s +\r\n            '=' +\r\n            ('navcolor' === s ? site.url_options[s].replace(patterns.hashes, '%23') : site.url_options[s])\r\n      })\r\n      if (!site.settings.hide_url_parameters) {\r\n        window.history.replaceState(Date.now(), '', k)\r\n      }\r\n      setTimeout(content_resize, 50)\r\n    }\r\n  }\r\n\r\n  function refresh_conditions(id) {\r\n    if (id in _c) {\r\n      const c = _u[id],\r\n        d = _c[id],\r\n        r = [],\r\n        v = c && c.value() + ''\r\n      if (c && (!meta.retain_state || c.state !== v)) {\r\n        const view = site.dataviews[c.view],\r\n          dd = c.dataset ? valueOf(c.dataset) : view ? view.get.dataset() : v\r\n        if (site.data.info && dd in site.data.loaded && !site.data.loaded[dd]) {\r\n          if (!c.deferred) site.data.retrieve(dd, site.data.info[dd].site_file)\r\n          return dd\r\n        }\r\n        c.state = v\r\n        d.forEach(di => {\r\n          if ('rule' === di.type) {\r\n            if (-1 === r.indexOf(di.rule)) {\r\n              r.push(di.rule)\r\n            }\r\n          } else {\r\n            if ('function' === typeof _u[di.id][di.type]) {\r\n              _u[di.id][di.type]()\r\n            } else {\r\n              conditionals[di.type](_u[di.id], c)\r\n            }\r\n          }\r\n        })\r\n        r.forEach(i => {\r\n          let pass = false\r\n          const ri = site.rules[i],\r\n            n = ri.condition.length\r\n          for (let i = 0; i < n; i++) {\r\n            const ck = ri.condition[i]\r\n            pass = ck.check()\r\n            if (ck.any ? pass : !pass) break\r\n          }\r\n          Object.keys(ri.effects).forEach(k => {\r\n            const e = ri.effects[k]\r\n            if (pass) {\r\n              if ('display' === k) {\r\n                e.e.classList.remove('hidden')\r\n              } else if ('lock' === k) {\r\n                e.forEach(u => {\r\n                  u.e.classList.remove('locked')\r\n                  toggle_input(u, true)\r\n                })\r\n              } else if (k in _u) {\r\n                _u[k].set(valueOf(e))\r\n              }\r\n            } else if ('display' === k) {\r\n              if (!e.e.classList.contains('hidden')) {\r\n                e.e.classList.add('hidden')\r\n                if (e.u && e.u.reset) e.u.reset()\r\n                e.e.querySelectorAll('.auto-input').forEach(c => {\r\n                  if (c.id in _u && _u[c.id].reset) _u[c.id].reset()\r\n                })\r\n              }\r\n            } else if ('lock' === k) {\r\n              e.forEach(u => {\r\n                u.e.classList.add('locked')\r\n                toggle_input(u)\r\n              })\r\n            } else if ('default' in ri) {\r\n              if (k in _u) {\r\n                _u[k].set(valueOf(ri.default))\r\n              }\r\n            }\r\n          })\r\n        })\r\n        if (id === meta.lock_after) meta.retain_state = true\r\n      }\r\n    }\r\n  }\r\n}\r\nif ('undefined' === typeof module) {\r\n  community(window, document, site)\r\n} else module.exports = community\r\n","import {MeasureInfo} from '../types'\r\nimport {patterns} from './patterns'\r\nexport function set_description(e: HTMLElement, info: MeasureInfo) {\r\n  const description = info.long_description || info.description || info.short_description || ''\r\n  let has_equation = patterns.has_equation.test(description)\r\n  if (has_equation) {\r\n    const tags = description.split(patterns.bracket_content)\r\n    for (let i = tags.length; i--; ) {\r\n      const t = tags[i]\r\n      if (t && '/' !== t.substring(0, 1)) {\r\n        const p = t.split(patterns.space),\r\n          n = p.length\r\n        has_equation = patterns.math_tags.test(p[0])\r\n        if (!has_equation) break\r\n        for (let a = 1; a < n; a++) {\r\n          has_equation = patterns.math_attributes.test(p[a])\r\n          if (!has_equation) break\r\n        }\r\n        if (!has_equation) break\r\n      }\r\n    }\r\n  }\r\n  e[has_equation ? 'innerHTML' : 'innerText'] = description\r\n}\r\n"],"names":["palettes","rdylbu7","name","type","colors","orrd7","gnbu7","brbg7","puor7","prgn6","reds5","greens5","paired4","greys4","grey","brown","purple","prgn","puor","rdbu","vik","lajolla","patterns","seps","period","all_periods","word_start","settings","features","filter","data","variables","properties","palette","datasets","variable","levels","ids","minmax","int_types","end_punct","mustache","measure_name","http","bool","number","leading_zeros","url_spaces","hashes","embed_setting","median","location_string","time_ref","pre_colon","exclude_query","space","has_equation","bracket_content","math_tags","math_attributes","value_types","percent","v","minutes","dollar","defaults","time","dataview","background_highlight","border","border_highlight_true","border_highlight_false","missing","summary_levels","dataset","filtered","children","all","community","window","document","site","tooltip_icon_rule","conditionals","setting","u","value","theme","body","classList","replace","plotly","Object","keys","forEach","k","update_plot_theme","map","tiles","l","removeFrom","addTo","history","replaceState","Date","now","hide_url_parameters","location","protocol","host","pathname","get_options_url","page","script_style","sheet","insertRule","removeRule","id","update","overlay","clearLayers","overlay_control","remove","tag_id","dataLayer","length","gtag","analytics_storage","global_update","event_category","event_label","storage","set","options","no_view","view","dataviews","selection","d","valueOf","va","combobox","option_sets","test","optionSource","fill_variables_options","fill_levels_options","fill_ids_options","fresh","current_set","sensitive","c","selection_subset","innerHTML","values","display","ns","subset","_u","rel","entity_tree","parents","si","groups","appendChild","add","e","toggle_input","source","selectedIndex","url_options","state","reset","set_current","this","min","async","cv","uv","parsed","y","time_range","Math","max","parseFloat","isFinite","min_indicator","firstElementChild","innerText","max_indicator","f","_entity_filter","registered","inited","valid","n_selected","full_filter","_base_filter","passed","failed","entities","check","request_queue","data_queue","time_filters","Infinity","get","meta","times","current","filtered_index","i","n","pass","index","tf","DataHandler","checks","_c","ci","passive","tv","t","info","s","r","get_variable","su","retain_state","current_default","id_filter","selected","select_ids","metadata","modal","entity_inputs","cs","push","relations","elements","button","init","o","target","getAttribute","endpoint","setAttribute","notification","createElement","className","parentElement","add_dependency","bind","addEventListener","effects","query","include","api","q","join","Array","isArray","size","time_agg","href","navigator","clipboard","writeText","then","text","setTimeout","export","global_reset","clear_storage","Number","active","buttongroup","retrieve","checked","setter","previous","current_index","indexOf","undefined","listener","adder","noadd","autocomplete","format_label","radio","role","childElementCount","lastElementChild","checkbox","off_default","split","splice","switch","up","querySelector","down","nextElementSibling","intext","condition","depends","Map","oi","init_text","parts","reference_options","ki","has","b","select","title","description","short_description","create","label","elementCount","clearable","tabindex","init_input","by_name","g","listbox","querySelectorAll","hover_index","cleared_selection","expanded","group","container","style","input_element","contains","focus","multi","default","close","removeEventListener","resize","getBoundingClientRect","left","x","width","screen","height","top","bottom","toggle","tagName","ou","highlight","accordion","previousElementSibling","port","item","scrollTo","scrollTop","clear_highlight","filter_reset","filter_index","search","filterer","toLowerCase","includes","action","keymap","code","preventDefault","vv","strict","value_type","firstChild","textContent","onchange","previous_span","color","click","clickto","traces","tab","getElementById","trigger_resize","show","revert","trace","make_data_entry","theme_dark","line","marker","Plotly","addTraces","deleteTraces","p","es","pl","ei","textfont","hoverinfo","JSON","stringify","base_trace","queue","queue_init","showing","deferred","newPlot","on","mouseover","mouseout","points","fullData","restyle","update_subs","clearTimeout","layout","varx","vary","varcol","x_range","y_range","range","summary","views","summaries","display_time","rank","order","jump","fn","lim","trace_limit","summary_selection","color_scale_center","color_by_order","show_empty_times","ceil","boxplots","iqr_box","parse","box","q3","q1","upperfence","lowerfence","isNaN","med","_","get_value","yaxis","xaxis","autorange","any_skipped","is_time","start","end","adj","log","dtick","config","react","layer","highlight_style","weight","polygon_outline","fillOpacity","setStyle","match_time","overall","default_style","dep","overlays_from_measures","variable_info","overlays","temp","ranges","url","lastIndex","feature","L","featureGroup","displaying","control","layers","setPosition","addOverlay","tileLayer","_raw","_queue","_layers","by_time","shapes","shape","has_time","mapId","loaded","background_shapes","retrieve_layer","sort","triggers","overlay_summaries","processed","property_summaries","fs","fa","operator","id_property","entity","caller","map_time","vstate","background_top","background_polygon_outline","a","map_overlay","show_overlay","ys","parseInt","varc","_zoomAnimated","map_animations","fresh_shapes","skl","fg","cl","interactive","bringToBack","bringToFront","flyToBounds","getBounds","fitBounds","cstate","ls","lsi","fillColor","pal","_waiting","parse_part","parent","ref","format_value","NaN","value_source","show_summary","h","has_default","add_subs","floating","content","base","show_variable_info","rows","op","minHeight","var","parse_variables","subto","filter_components","ss","result","short_name","component","make_variable_source","datatable","time_index","header","rowIds","head","table_autoscroll","table_scroll_behavior","pending","row","node","variable_source","single_variable","is_single","variable_header","render","retrievers","row_time","wide","filters","current_filter","offset","int","jQuery","DataTable","columns","table","$","vn","digits","clear","destroy","empty","nshowing","column","visible","selector","varstate","renderer","draw","dark_highlight","rules","table_autosort","w","scroll","behavior","_DT_CellIndex","scrollHeight","createHeader","tr","appendRows","dn","current_variable","td","col","legend","lock","cooldown","trigger","ticks","scale","center","substring","string","level_ids","integer","po","marginLeft","var_info","ep","pn","refresh","bins","odd","remake","current_palette","of","prop","backgroundColor","right","floor","background","norm_median","clientX","relatedTarget","credits","credit_output","exclude","version","note","input","wrapper","tooltip_trigger","tooltip_clear","listen","loader","init_output","perm","localStorage","setItem","getItem","removeItem","opt","Enter","NumpadEnter","ArrowUp","Home","ArrowDown","End","Escape","Tab","Time","time_funs","first","last","load_screen","wrap","navbar","menus","getElementsByClassName","panels","_timeout","subs","rule_conditions","agg","as_state","time_component","tree","which","total","centered","fixed","center_source","upper","m","out","onend","sets","disp","ck","ee","for","url_set","ck_suffix","schema","fields","lk","enable","removeAttribute","sort_tree_children","_n","uid","fun","dark_theme","getComputedStyle","font","modebar","paper_bgcolor","plot_bgcolor","bgcolor","_fullLayout","showgrid","gridcolor","borderColor","relayout","yr","xr","make_variable_reference","author","j","family","given","year","journal","volume","doi","date_accessed","location_url","long_name","long_description","tags","set_description","sources","citations","references","_references","reference","element","exec","hide_logo","hide_title","hide_navcontent","hide_panels","close_menus","panel","content_bounds","outer_right","content_resize","navcolor","hash","copy","poly_channel","ch","pos","coefs","pow","drop_load_screen","visibility","reload","full","top_menu","left_menu","right_menu","bottom_menu","module","dispatchEvent","Event","add_filter_condition","event","presets","String","comp_select","removeChild","selectedOptions","value_select","reparse","variable_values","comp_fun","delete","variable_filters","_overlay_property_selectors","new_display","min_ref","max_ref","step","default_max","default_min","id_source","single","vi","ids_check","feature_values","component_fun","ev","compile_dataview","entity_filters","reverse","site_file","parsed_query","parse_query","conditions","tracking","arguments","hide_tooltips","tooltip","callback","layerId","geoJSON","onEachFeature","process_layer","retrieved","callbacks","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","send","pointToLayer","point","coords","circleMarker","props","_tooltip","bindTooltip","openTooltip","fill_overlay_properties_options","circle_property","prop_summary","eachLayer","setRadius","circle_radius","opacity","run_queue","lock_after","dd","di","rule","ri","any","refresh_conditions","onload","menu_toggler","hide","timeout","ariaHidden","insertAdjacentElement","autoType","side","marginTop","bw","has_toggler","states","us","data_load","exports"],"mappings":"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"}